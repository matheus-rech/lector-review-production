function Ty(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();function Kg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wg={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=Symbol.for("react.transitional.element"),Ry=Symbol.for("react.fragment");function Zg(e,t,i){var n=null;if(i!==void 0&&(n=""+i),t.key!==void 0&&(n=""+t.key),"key"in t){i={};for(var s in t)s!=="key"&&(i[s]=t[s])}else i=t;return t=i.ref,{$$typeof:My,type:e,key:n,ref:t!==void 0?t:null,props:i}}Wo.Fragment=Ry;Wo.jsx=Zg;Wo.jsxs=Zg;Wg.exports=Wo;var S=Wg.exports,Qg={exports:{}},$={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.transitional.element"),Dy=Symbol.for("react.portal"),Ny=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),ky=Symbol.for("react.consumer"),zy=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),Iy=Symbol.for("react.memo"),Jg=Symbol.for("react.lazy"),Fy=Symbol.for("react.activity"),md=Symbol.iterator;function Hy(e){return e===null||typeof e!="object"?null:(e=md&&e[md]||e["@@iterator"],typeof e=="function"?e:null)}var tp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ep=Object.assign,ip={};function $s(e,t,i){this.props=e,this.context=t,this.refs=ip,this.updater=i||tp}$s.prototype.isReactComponent={};$s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function np(){}np.prototype=$s.prototype;function Xu(e,t,i){this.props=e,this.context=t,this.refs=ip,this.updater=i||tp}var Yu=Xu.prototype=new np;Yu.constructor=Xu;ep(Yu,$s.prototype);Yu.isPureReactComponent=!0;var bd=Array.isArray;function kc(){}var St={H:null,A:null,T:null,S:null},sp=Object.prototype.hasOwnProperty;function $u(e,t,i){var n=i.ref;return{$$typeof:qu,type:e,key:t,ref:n!==void 0?n:null,props:i}}function By(e,t){return $u(e.type,t,e.props)}function Ku(e){return typeof e=="object"&&e!==null&&e.$$typeof===qu}function Uy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var yd=/\/+/g;function Pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uy(""+e.key):t.toString(36)}function Gy(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(kc,kc):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function os(e,t,i,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case qu:case Dy:r=!0;break;case Jg:return r=e._init,os(r(e._payload),t,i,n,s)}}if(r)return s=s(e),r=n===""?"."+Pl(e,0):n,bd(s)?(i="",r!=null&&(i=r.replace(yd,"$&/")+"/"),os(s,t,i,"",function(c){return c})):s!=null&&(Ku(s)&&(s=By(s,i+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(yd,"$&/")+"/")+r)),t.push(s)),1;r=0;var o=n===""?".":n+":";if(bd(e))for(var l=0;l<e.length;l++)n=e[l],a=o+Pl(n,l),r+=os(n,t,i,a,s);else if(l=Hy(e),typeof l=="function")for(e=l.call(e),l=0;!(n=e.next()).done;)n=n.value,a=o+Pl(n,l++),r+=os(n,t,i,a,s);else if(a==="object"){if(typeof e.then=="function")return os(Gy(e),t,i,n,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Tr(e,t,i){if(e==null)return e;var n=[],s=0;return os(e,n,"","",function(a){return t.call(i,a,s++)}),n}function Vy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vd=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qy={map:Tr,forEach:function(e,t,i){Tr(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Tr(e,function(){t++}),t},toArray:function(e){return Tr(e,function(t){return t})||[]},only:function(e){if(!Ku(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$.Activity=Fy;$.Children=qy;$.Component=$s;$.Fragment=Ny;$.Profiler=Ly;$.PureComponent=Xu;$.StrictMode=Oy;$.Suspense=jy;$.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;$.__COMPILER_RUNTIME={__proto__:null,c:function(e){return St.H.useMemoCache(e)}};$.cache=function(e){return function(){return e.apply(null,arguments)}};$.cacheSignal=function(){return null};$.cloneElement=function(e,t,i){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=ep({},e.props),s=e.key;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)!sp.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(n[a]=t[a]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var r=Array(a),o=0;o<a;o++)r[o]=arguments[o+2];n.children=r}return $u(e.type,s,n)};$.createContext=function(e){return e={$$typeof:zy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:ky,_context:e},e};$.createElement=function(e,t,i){var n,s={},a=null;if(t!=null)for(n in t.key!==void 0&&(a=""+t.key),t)sp.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=t[n]);var r=arguments.length-2;if(r===1)s.children=i;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(n in r=e.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return $u(e,a,s)};$.createRef=function(){return{current:null}};$.forwardRef=function(e){return{$$typeof:Py,render:e}};$.isValidElement=Ku;$.lazy=function(e){return{$$typeof:Jg,_payload:{_status:-1,_result:e},_init:Vy}};$.memo=function(e,t){return{$$typeof:Iy,type:e,compare:t===void 0?null:t}};$.startTransition=function(e){var t=St.T,i={};St.T=i;try{var n=e(),s=St.S;s!==null&&s(i,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(kc,vd)}catch(a){vd(a)}finally{t!==null&&i.types!==null&&(t.types=i.types),St.T=t}};$.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()};$.use=function(e){return St.H.use(e)};$.useActionState=function(e,t,i){return St.H.useActionState(e,t,i)};$.useCallback=function(e,t){return St.H.useCallback(e,t)};$.useContext=function(e){return St.H.useContext(e)};$.useDebugValue=function(){};$.useDeferredValue=function(e,t){return St.H.useDeferredValue(e,t)};$.useEffect=function(e,t){return St.H.useEffect(e,t)};$.useEffectEvent=function(e){return St.H.useEffectEvent(e)};$.useId=function(){return St.H.useId()};$.useImperativeHandle=function(e,t,i){return St.H.useImperativeHandle(e,t,i)};$.useInsertionEffect=function(e,t){return St.H.useInsertionEffect(e,t)};$.useLayoutEffect=function(e,t){return St.H.useLayoutEffect(e,t)};$.useMemo=function(e,t){return St.H.useMemo(e,t)};$.useOptimistic=function(e,t){return St.H.useOptimistic(e,t)};$.useReducer=function(e,t,i){return St.H.useReducer(e,t,i)};$.useRef=function(e){return St.H.useRef(e)};$.useState=function(e){return St.H.useState(e)};$.useSyncExternalStore=function(e,t,i){return St.H.useSyncExternalStore(e,t,i)};$.useTransition=function(){return St.H.useTransition()};$.version="19.2.0";Qg.exports=$;var _=Qg.exports;const $e=Kg(_),Xy=Ty({__proto__:null,default:$e},[_]);var ap={exports:{}},Zo={},rp={exports:{}},op={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,O){var L=C.length;C.push(O);t:for(;0<L;){var k=L-1>>>1,j=C[k];if(0<s(j,O))C[k]=O,C[L]=j,L=k;else break t}}function i(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var O=C[0],L=C.pop();if(L!==O){C[0]=L;t:for(var k=0,j=C.length,st=j>>>1;k<st;){var K=2*(k+1)-1,ht=C[K],Dt=K+1,$t=C[Dt];if(0>s(ht,L))Dt<j&&0>s($t,ht)?(C[k]=$t,C[Dt]=L,k=Dt):(C[k]=ht,C[K]=L,k=K);else if(Dt<j&&0>s($t,L))C[k]=$t,C[Dt]=L,k=Dt;else break t}}return O}function s(C,O){var L=C.sortIndex-O.sortIndex;return L!==0?L:C.id-O.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();e.unstable_now=function(){return r.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function A(C){for(var O=i(c);O!==null;){if(O.callback===null)n(c);else if(O.startTime<=C)n(c),O.sortIndex=O.expirationTime,t(l,O);else break;O=i(c)}}function x(C){if(p=!1,A(C),!g)if(i(l)!==null)g=!0,E||(E=!0,H());else{var O=i(c);O!==null&&P(x,O.startTime-C)}}var E=!1,w=-1,T=5,M=-1;function D(){return v?!0:!(e.unstable_now()-M<T)}function z(){if(v=!1,E){var C=e.unstable_now();M=C;var O=!0;try{t:{g=!1,p&&(p=!1,b(w),w=-1),f=!0;var L=d;try{e:{for(A(C),h=i(l);h!==null&&!(h.expirationTime>C&&D());){var k=h.callback;if(typeof k=="function"){h.callback=null,d=h.priorityLevel;var j=k(h.expirationTime<=C);if(C=e.unstable_now(),typeof j=="function"){h.callback=j,A(C),O=!0;break e}h===i(l)&&n(l),A(C)}else n(l);h=i(l)}if(h!==null)O=!0;else{var st=i(c);st!==null&&P(x,st.startTime-C),O=!1}}break t}finally{h=null,d=L,f=!1}O=void 0}}finally{O?H():E=!1}}}var H;if(typeof y=="function")H=function(){y(z)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=z,H=function(){F.postMessage(null)}}else H=function(){m(z,0)};function P(C,O){w=m(function(){C(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_next=function(C){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var L=d;d=O;try{return C()}finally{d=L}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(C,O){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var L=d;d=C;try{return O()}finally{d=L}},e.unstable_scheduleCallback=function(C,O,L){var k=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?k+L:k):L=k,C){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=L+j,C={id:u++,callback:O,priorityLevel:C,startTime:L,expirationTime:j,sortIndex:-1},L>k?(C.sortIndex=L,t(c,C),i(l)===null&&C===i(c)&&(p?(b(w),w=-1):p=!0,P(x,L-k))):(C.sortIndex=j,t(l,C),g||f||(g=!0,E||(E=!0,H()))),C},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(C){var O=d;return function(){var L=d;d=O;try{return C.apply(this,arguments)}finally{d=L}}}})(op);rp.exports=op;var Yy=rp.exports,lp={exports:{}},ge={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y=_;function cp(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Bi(){}var de={d:{f:Bi,r:function(){throw Error(cp(522))},D:Bi,C:Bi,L:Bi,m:Bi,X:Bi,S:Bi,M:Bi},p:0,findDOMNode:null},Ky=Symbol.for("react.portal");function Wy(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ky,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}var Ta=$y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qo(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ge.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de;ge.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(cp(299));return Wy(e,t,null,i)};ge.flushSync=function(e){var t=Ta.T,i=de.p;try{if(Ta.T=null,de.p=2,e)return e()}finally{Ta.T=t,de.p=i,de.d.f()}};ge.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,de.d.C(e,t))};ge.prefetchDNS=function(e){typeof e=="string"&&de.d.D(e)};ge.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var i=t.as,n=Qo(i,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;i==="style"?de.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:a}):i==="script"&&de.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ge.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var i=Qo(t.as,t.crossOrigin);de.d.M(e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&de.d.M(e)};ge.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var i=t.as,n=Qo(i,t.crossOrigin);de.d.L(e,i,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ge.preloadModule=function(e,t){if(typeof e=="string")if(t){var i=Qo(t.as,t.crossOrigin);de.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else de.d.m(e)};ge.requestFormReset=function(e){de.d.r(e)};ge.unstable_batchedUpdates=function(e,t){return e(t)};ge.useFormState=function(e,t,i){return Ta.H.useFormState(e,t,i)};ge.useFormStatus=function(){return Ta.H.useHostTransitionStatus()};ge.version="19.2.0";function up(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(up)}catch(e){console.error(e)}}up(),lp.exports=ge;var Wu=lp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=Yy,hp=_,Zy=Wu;function N(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function dp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function fp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gp(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ad(e){if(rr(e)!==e)throw Error(N(188))}function Qy(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(N(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===i)return Ad(s),e;if(a===n)return Ad(s),t;a=a.sibling}throw Error(N(188))}if(i.return!==n.return)i=s,n=a;else{for(var r=!1,o=s.child;o;){if(o===i){r=!0,i=s,n=a;break}if(o===n){r=!0,n=s,i=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===i){r=!0,i=a,n=s;break}if(o===n){r=!0,n=a,i=s;break}o=o.sibling}if(!r)throw Error(N(189))}}if(i.alternate!==n)throw Error(N(190))}if(i.tag!==3)throw Error(N(188));return i.stateNode.current===i?e:t}function pp(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=pp(e),t!==null)return t;e=e.sibling}return null}var _t=Object.assign,Jy=Symbol.for("react.element"),Mr=Symbol.for("react.transitional.element"),Aa=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),mp=Symbol.for("react.strict_mode"),zc=Symbol.for("react.profiler"),bp=Symbol.for("react.consumer"),Ti=Symbol.for("react.context"),Zu=Symbol.for("react.forward_ref"),Pc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),Qu=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),Ic=Symbol.for("react.activity"),tv=Symbol.for("react.memo_cache_sentinel"),Sd=Symbol.iterator;function la(e){return e===null||typeof e!="object"?null:(e=Sd&&e[Sd]||e["@@iterator"],typeof e=="function"?e:null)}var ev=Symbol.for("react.client.reference");function Fc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ev?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case zc:return"Profiler";case mp:return"StrictMode";case Pc:return"Suspense";case jc:return"SuspenseList";case Ic:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Aa:return"Portal";case Ti:return e.displayName||"Context";case bp:return(e._context.displayName||"Context")+".Consumer";case Zu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qu:return t=e.displayName||null,t!==null?t:Fc(e.type)||"Memo";case Ui:t=e._payload,e=e._init;try{return Fc(e(t))}catch{}}return null}var Sa=Array.isArray,X=hp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=Zy.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rn={pending:!1,data:null,method:null,action:null},Hc=[],fs=-1;function pi(e){return{current:e}}function Jt(e){0>fs||(e.current=Hc[fs],Hc[fs]=null,fs--)}function yt(e,t){fs++,Hc[fs]=e.current,e.current=t}var di=pi(null),Va=pi(null),tn=pi(null),fo=pi(null);function go(e,t){switch(yt(tn,t),yt(Va,e),yt(di,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mf(t),e=jb(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Jt(di),yt(di,e)}function ks(){Jt(di),Jt(Va),Jt(tn)}function Bc(e){e.memoizedState!==null&&yt(fo,e);var t=di.current,i=jb(t,e.type);t!==i&&(yt(Va,e),yt(di,i))}function po(e){Va.current===e&&(Jt(di),Jt(Va)),fo.current===e&&(Jt(fo),er._currentValue=Rn)}var jl,xd;function wn(e){if(jl===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||"",xd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jl+e+xd}var Il=!1;function Fl(e,t){if(!e||Il)return"";Il=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(f){var d=f}Reflect.construct(e,[],h)}else{try{h.call()}catch(f){d=f}e.call(h.prototype)}}else{try{throw Error()}catch(f){d=f}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(f){if(f&&d&&typeof f.stack=="string")return[f.stack,d.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var l=r.split(`
`),c=o.split(`
`);for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===c.length)for(n=l.length-1,s=c.length-1;1<=n&&0<=s&&l[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==c[s]){if(n!==1||s!==1)do if(n--,s--,0>s||l[n]!==c[s]){var u=`
`+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=n&&0<=s);break}}}finally{Il=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?wn(i):""}function iv(e,t){switch(e.tag){case 26:case 27:case 5:return wn(e.type);case 16:return wn("Lazy");case 13:return e.child!==t&&t!==null?wn("Suspense Fallback"):wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return Fl(e.type,!1);case 11:return Fl(e.type.render,!1);case 1:return Fl(e.type,!0);case 31:return wn("Activity");default:return""}}function _d(e){try{var t="",i=null;do t+=iv(e,i),i=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Uc=Object.prototype.hasOwnProperty,Ju=Yt.unstable_scheduleCallback,Hl=Yt.unstable_cancelCallback,nv=Yt.unstable_shouldYield,sv=Yt.unstable_requestPaint,Ne=Yt.unstable_now,av=Yt.unstable_getCurrentPriorityLevel,yp=Yt.unstable_ImmediatePriority,vp=Yt.unstable_UserBlockingPriority,mo=Yt.unstable_NormalPriority,rv=Yt.unstable_LowPriority,Ap=Yt.unstable_IdlePriority,ov=Yt.log,lv=Yt.unstable_setDisableYieldValue,or=null,Oe=null;function Ki(e){if(typeof ov=="function"&&lv(e),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(or,e)}catch{}}var Le=Math.clz32?Math.clz32:hv,cv=Math.log,uv=Math.LN2;function hv(e){return e>>>=0,e===0?32:31-(cv(e)/uv|0)|0}var Rr=256,Dr=262144,Nr=4194304;function En(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jo(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var o=n&134217727;return o!==0?(n=o&~a,n!==0?s=En(n):(r&=o,r!==0?s=En(r):i||(i=o&~e,i!==0&&(s=En(i))))):(o=n&~a,o!==0?s=En(o):r!==0?s=En(r):i||(i=n&~e,i!==0&&(s=En(i)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===32&&(i&4194048)!==0)?t:s}function lr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function dv(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sp(){var e=Nr;return Nr<<=1,!(Nr&62914560)&&(Nr=4194304),e}function Bl(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function cr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fv(e,t,i,n,s,a){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=r&~i;0<i;){var u=31-Le(i),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];f!==null&&(f.lane&=-536870913)}i&=~h}n!==0&&xp(e,n,0),a!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=a&~(r&~t))}function xp(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Le(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&261930}function _p(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-Le(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function wp(e,t){var i=t&-t;return i=i&42?1:th(i),i&(e.suspendedLanes|t)?0:i}function th(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function eh(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Ep(){var e=ut.p;return e!==0?e:(e=window.event,e===void 0?32:$b(e.type))}function wd(e,t){var i=ut.p;try{return ut.p=e,t()}finally{ut.p=i}}var vn=Math.random().toString(36).slice(2),ie="__reactFiber$"+vn,_e="__reactProps$"+vn,Ks="__reactContainer$"+vn,Gc="__reactEvents$"+vn,gv="__reactListeners$"+vn,pv="__reactHandles$"+vn,Ed="__reactResources$"+vn,ur="__reactMarker$"+vn;function ih(e){delete e[ie],delete e[_e],delete e[Gc],delete e[gv],delete e[pv]}function gs(e){var t=e[ie];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ks]||i[ie]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Lf(e);e!==null;){if(i=e[ie])return i;e=Lf(e)}return t}e=i,i=e.parentNode}return null}function Ws(e){if(e=e[ie]||e[Ks]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(N(33))}function Es(e){var t=e[Ed];return t||(t=e[Ed]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qt(e){e[ur]=!0}var Cp=new Set,Tp={};function Gn(e,t){zs(e,t),zs(e+"Capture",t)}function zs(e,t){for(Tp[e]=t,e=0;e<t.length;e++)Cp.add(t[e])}var mv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cd={},Td={};function bv(e){return Uc.call(Td,e)?!0:Uc.call(Cd,e)?!1:mv.test(e)?Td[e]=!0:(Cd[e]=!0,!1)}function $r(e,t,i){if(bv(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Or(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function yi(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}function Be(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yv(e,t,i){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,a.call(this,r)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vc(e){if(!e._valueTracker){var t=Mp(e)?"checked":"value";e._valueTracker=yv(e,t,""+e[t])}}function Rp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Mp(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vv=/[\n"\\]/g;function qe(e){return e.replace(vv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function qc(e,t,i,n,s,a,r,o){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Be(t)):e.value!==""+Be(t)&&(e.value=""+Be(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Xc(e,r,Be(t)):i!=null?Xc(e,r,Be(i)):n!=null&&e.removeAttribute("value"),s==null&&a!=null&&(e.defaultChecked=!!a),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+Be(o):e.removeAttribute("name")}function Dp(e,t,i,n,s,a,r,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||i!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Vc(e);return}i=i!=null?""+Be(i):"",t=t!=null?""+Be(t):i,o||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Vc(e)}function Xc(e,t,i){t==="number"&&bo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Cs(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Be(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Np(e,t,i){if(t!=null&&(t=""+Be(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Be(i):""}function Op(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(N(92));if(Sa(n)){if(1<n.length)throw Error(N(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=Be(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n),Vc(e)}function Ps(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Av=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Md(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||Av.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Lp(e,t,i){if(t!=null&&typeof t!="object")throw Error(N(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&Md(e,s,n)}else for(var a in t)t.hasOwnProperty(a)&&Md(e,a,t[a])}function nh(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kr(e){return xv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mi(){}var Yc=null;function sh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,Ts=null;function Rd(e){var t=Ws(e);if(t&&(e=t.stateNode)){var i=e[_e]||null;t:switch(e=t.stateNode,t.type){case"input":if(qc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+qe(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[_e]||null;if(!s)throw Error(N(90));qc(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&Rp(n)}break t;case"textarea":Np(e,i.value,i.defaultValue);break t;case"select":t=i.value,t!=null&&Cs(e,!!i.multiple,t,!1)}}}var Ul=!1;function kp(e,t,i){if(Ul)return e(t,i);Ul=!0;try{var n=e(t);return n}finally{if(Ul=!1,(ps!==null||Ts!==null)&&(hl(),ps&&(t=ps,e=Ts,Ts=ps=null,Rd(t),e)))for(t=0;t<e.length;t++)Rd(e[t])}}function qa(e,t){var i=e.stateNode;if(i===null)return null;var n=i[_e]||null;if(n===null)return null;i=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(N(231,t,typeof i));return i}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=!1;if(Li)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){$c=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{$c=!1}var Wi=null,ah=null,Wr=null;function zp(){if(Wr)return Wr;var e,t=ah,i=t.length,n,s="value"in Wi?Wi.value:Wi.textContent,a=s.length;for(e=0;e<i&&t[e]===s[e];e++);var r=i-e;for(n=1;n<=r&&t[i-n]===s[a-n];n++);return Wr=s.slice(e,1<n?1-n:void 0)}function Zr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Lr(){return!0}function Dd(){return!1}function we(e){function t(i,n,s,a,r){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Lr:Dd,this.isPropagationStopped=Dd,this}return _t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),t}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=we(Vn),hr=_t({},Vn,{view:0,detail:0}),_v=we(hr),Gl,Vl,ua,el=_t({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ua&&(ua&&e.type==="mousemove"?(Gl=e.screenX-ua.screenX,Vl=e.screenY-ua.screenY):Vl=Gl=0,ua=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),Nd=we(el),wv=_t({},el,{dataTransfer:0}),Ev=we(wv),Cv=_t({},hr,{relatedTarget:0}),ql=we(Cv),Tv=_t({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mv=we(Tv),Rv=_t({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dv=we(Rv),Nv=_t({},Vn,{data:0}),Od=we(Nv),Ov={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kv[e])?!!t[e]:!1}function rh(){return zv}var Pv=_t({},hr,{key:function(e){if(e.key){var t=Ov[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rh,charCode:function(e){return e.type==="keypress"?Zr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jv=we(Pv),Iv=_t({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=we(Iv),Fv=_t({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rh}),Hv=we(Fv),Bv=_t({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uv=we(Bv),Gv=_t({},el,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=we(Gv),qv=_t({},Vn,{newState:0,oldState:0}),Xv=we(qv),Yv=[9,13,27,32],oh=Li&&"CompositionEvent"in window,Ma=null;Li&&"documentMode"in document&&(Ma=document.documentMode);var $v=Li&&"TextEvent"in window&&!Ma,Pp=Li&&(!oh||Ma&&8<Ma&&11>=Ma),kd=" ",zd=!1;function jp(e,t){switch(e){case"keyup":return Yv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function Kv(e,t){switch(e){case"compositionend":return Ip(t);case"keypress":return t.which!==32?null:(zd=!0,kd);case"textInput":return e=t.data,e===kd&&zd?null:e;default:return null}}function Wv(e,t){if(ms)return e==="compositionend"||!oh&&jp(e,t)?(e=zp(),Wr=ah=Wi=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pp&&t.locale!=="ko"?null:t.data;default:return null}}var Zv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zv[e.type]:t==="textarea"}function Fp(e,t,i,n){ps?Ts?Ts.push(n):Ts=[n]:ps=n,t=zo(t,"onChange"),0<t.length&&(i=new tl("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Ra=null,Xa=null;function Qv(e){kb(e,0)}function il(e){var t=xa(e);if(Rp(t))return e}function jd(e,t){if(e==="change")return t}var Hp=!1;if(Li){var Xl;if(Li){var Yl="oninput"in document;if(!Yl){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),Yl=typeof Id.oninput=="function"}Xl=Yl}else Xl=!1;Hp=Xl&&(!document.documentMode||9<document.documentMode)}function Fd(){Ra&&(Ra.detachEvent("onpropertychange",Bp),Xa=Ra=null)}function Bp(e){if(e.propertyName==="value"&&il(Xa)){var t=[];Fp(t,Xa,e,sh(e)),kp(Qv,t)}}function Jv(e,t,i){e==="focusin"?(Fd(),Ra=t,Xa=i,Ra.attachEvent("onpropertychange",Bp)):e==="focusout"&&Fd()}function tA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return il(Xa)}function eA(e,t){if(e==="click")return il(t)}function iA(e,t){if(e==="input"||e==="change")return il(t)}function nA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pe=typeof Object.is=="function"?Object.is:nA;function Ya(e,t){if(Pe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!Uc.call(t,s)||!Pe(e[s],t[s]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bd(e,t){var i=Hd(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Hd(i)}}function Up(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Up(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=bo(e.document)}return t}function lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sA=Li&&"documentMode"in document&&11>=document.documentMode,bs=null,Kc=null,Da=null,Wc=!1;function Ud(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Wc||bs==null||bs!==bo(n)||(n=bs,"selectionStart"in n&&lh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Da&&Ya(Da,n)||(Da=n,n=zo(Kc,"onSelect"),0<n.length&&(t=new tl("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=bs)))}function _n(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ys={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionrun:_n("Transition","TransitionRun"),transitionstart:_n("Transition","TransitionStart"),transitioncancel:_n("Transition","TransitionCancel"),transitionend:_n("Transition","TransitionEnd")},$l={},Vp={};Li&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function qn(e){if($l[e])return $l[e];if(!ys[e])return e;var t=ys[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Vp)return $l[e]=t[i];return e}var qp=qn("animationend"),Xp=qn("animationiteration"),Yp=qn("animationstart"),aA=qn("transitionrun"),rA=qn("transitionstart"),oA=qn("transitioncancel"),$p=qn("transitionend"),Kp=new Map,Zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zc.push("scrollEnd");function ai(e,t){Kp.set(e,t),Gn(t,[e])}var yo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},He=[],vs=0,ch=0;function nl(){for(var e=vs,t=ch=vs=0;t<e;){var i=He[t];He[t++]=null;var n=He[t];He[t++]=null;var s=He[t];He[t++]=null;var a=He[t];if(He[t++]=null,n!==null&&s!==null){var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}a!==0&&Wp(i,s,a)}}function sl(e,t,i,n){He[vs++]=e,He[vs++]=t,He[vs++]=i,He[vs++]=n,ch|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function uh(e,t,i,n){return sl(e,t,i,n),vo(e)}function Xn(e,t){return sl(e,null,null,t),vo(e)}function Wp(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var s=!1,a=e.return;a!==null;)a.childLanes|=i,n=a.alternate,n!==null&&(n.childLanes|=i),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(s=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,s&&t!==null&&(s=31-Le(i),e=a.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=i|536870912),a):null}function vo(e){if(50<Fa)throw Fa=0,yu=null,Error(N(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var As={};function lA(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Me(e,t,i,n){return new lA(e,t,i,n)}function hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Di(e,t){var i=e.alternate;return i===null?(i=Me(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Zp(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qr(e,t,i,n,s,a){var r=0;if(n=e,typeof e=="function")hh(e)&&(r=1);else if(typeof e=="string")r=fS(e,i,di.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Ic:return e=Me(31,i,t,s),e.elementType=Ic,e.lanes=a,e;case ds:return Dn(i.children,s,a,t);case mp:r=8,s|=24;break;case zc:return e=Me(12,i,t,s|2),e.elementType=zc,e.lanes=a,e;case Pc:return e=Me(13,i,t,s),e.elementType=Pc,e.lanes=a,e;case jc:return e=Me(19,i,t,s),e.elementType=jc,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ti:r=10;break t;case bp:r=9;break t;case Zu:r=11;break t;case Qu:r=14;break t;case Ui:r=16,n=null;break t}r=29,i=Error(N(130,e===null?"null":typeof e,"")),n=null}return t=Me(r,i,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function Dn(e,t,i,n){return e=Me(7,e,n,t),e.lanes=i,e}function Kl(e,t,i){return e=Me(6,e,null,t),e.lanes=i,e}function Qp(e){var t=Me(18,null,null,0);return t.stateNode=e,t}function Wl(e,t,i){return t=Me(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gd=new WeakMap;function Xe(e,t){if(typeof e=="object"&&e!==null){var i=Gd.get(e);return i!==void 0?i:(t={value:e,source:t,stack:_d(t)},Gd.set(e,t),t)}return{value:e,source:t,stack:_d(t)}}var Ss=[],xs=0,Ao=null,$a=0,Ue=[],Ge=0,dn=null,ci=1,ui="";function Ei(e,t){Ss[xs++]=$a,Ss[xs++]=Ao,Ao=e,$a=t}function Jp(e,t,i){Ue[Ge++]=ci,Ue[Ge++]=ui,Ue[Ge++]=dn,dn=e;var n=ci;e=ui;var s=32-Le(n)-1;n&=~(1<<s),i+=1;var a=32-Le(t)+s;if(30<a){var r=s-s%5;a=(n&(1<<r)-1).toString(32),n>>=r,s-=r,ci=1<<32-Le(t)+s|i<<s|n,ui=a+e}else ci=1<<a|i<<s|n,ui=e}function dh(e){e.return!==null&&(Ei(e,1),Jp(e,1,0))}function fh(e){for(;e===Ao;)Ao=Ss[--xs],Ss[xs]=null,$a=Ss[--xs],Ss[xs]=null;for(;e===dn;)dn=Ue[--Ge],Ue[Ge]=null,ui=Ue[--Ge],Ue[Ge]=null,ci=Ue[--Ge],Ue[Ge]=null}function tm(e,t){Ue[Ge++]=ci,Ue[Ge++]=ui,Ue[Ge++]=dn,ci=t.id,ui=t.overflow,dn=e}var ne=null,At=null,lt=!1,en=null,Ye=!1,Qc=Error(N(519));function fn(e){var t=Error(N(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ka(Xe(t,e)),Qc}function Vd(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[ie]=e,t[_e]=n,i){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(i=0;i<Ja.length;i++)it(Ja[i],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),Dp(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),Op(t,n.value,n.defaultValue,n.children)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||Pb(t.textContent,i)?(n.popover!=null&&(it("beforetoggle",t),it("toggle",t)),n.onScroll!=null&&it("scroll",t),n.onScrollEnd!=null&&it("scrollend",t),n.onClick!=null&&(t.onclick=Mi),t=!0):t=!1,t||fn(e,!0)}function qd(e){for(ne=e.return;ne;)switch(ne.tag){case 5:case 31:case 13:Ye=!1;return;case 27:case 3:Ye=!0;return;default:ne=ne.return}}function es(e){if(e!==ne)return!1;if(!lt)return qd(e),lt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||_u(e.type,e.memoizedProps)),i=!i),i&&At&&fn(e),qd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));At=Of(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));At=Of(e)}else t===27?(t=At,An(e.type)?(e=Tu,Tu=null,At=e):At=t):At=ne?We(e.stateNode.nextSibling):null;return!0}function zn(){At=ne=null,lt=!1}function Zl(){var e=en;return e!==null&&(Ae===null?Ae=e:Ae.push.apply(Ae,e),en=null),e}function Ka(e){en===null?en=[e]:en.push(e)}var Jc=pi(null),Yn=null,Ri=null;function Vi(e,t,i){yt(Jc,t._currentValue),t._currentValue=i}function Ni(e){e._currentValue=Jc.current,Jt(Jc)}function tu(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function eu(e,t,i,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){var r=s.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=s;for(var l=0;l<t.length;l++)if(o.context===t[l]){a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),tu(a.return,i,e),n||(r=null);break t}a=o.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(N(341));r.lanes|=i,a=r.alternate,a!==null&&(a.lanes|=i),tu(r,i,e),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===e){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function Zs(e,t,i,n){e=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(N(387));if(r=r.memoizedProps,r!==null){var o=s.type;Pe(s.pendingProps.value,r.value)||(e!==null?e.push(o):e=[o])}}else if(s===fo.current){if(r=s.alternate,r===null)throw Error(N(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(er):e=[er])}s=s.return}e!==null&&eu(t,e,i,n),t.flags|=262144}function So(e){for(e=e.firstContext;e!==null;){if(!Pe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pn(e){Yn=e,Ri=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function se(e){return em(Yn,e)}function kr(e,t){return Yn===null&&Pn(e),em(e,t)}function em(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ri===null){if(e===null)throw Error(N(308));Ri=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ri=Ri.next=t;return i}var cA=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},uA=Yt.unstable_scheduleCallback,hA=Yt.unstable_NormalPriority,Bt={$$typeof:Ti,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gh(){return{controller:new cA,data:new Map,refCount:0}}function dr(e){e.refCount--,e.refCount===0&&uA(hA,function(){e.controller.abort()})}var Na=null,iu=0,js=0,Ms=null;function dA(e,t){if(Na===null){var i=Na=[];iu=0,js=Fh(),Ms={status:"pending",value:void 0,then:function(n){i.push(n)}}}return iu++,t.then(Xd,Xd),t}function Xd(){if(--iu===0&&Na!==null){Ms!==null&&(Ms.status="fulfilled");var e=Na;Na=null,js=0,Ms=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fA(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),n}var Yd=X.S;X.S=function(e,t){pb=Ne(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&dA(e,t),Yd!==null&&Yd(e,t)};var Nn=pi(null);function ph(){var e=Nn.current;return e!==null?e:bt.pooledCache}function Jr(e,t){t===null?yt(Nn,Nn.current):yt(Nn,t.pool)}function im(){var e=ph();return e===null?null:{parent:Bt._currentValue,pool:e}}var Qs=Error(N(460)),mh=Error(N(474)),al=Error(N(542)),xo={then:function(){}};function $d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nm(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Mi,Mi),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e;default:if(typeof t.status=="string")t.then(Mi,Mi);else{if(e=bt,e!==null&&100<e.shellSuspendCounter)throw Error(N(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e}throw On=t,Qs}}function Cn(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(On=i,Qs):i}}var On=null;function Kd(){if(On===null)throw Error(N(459));var e=On;return On=null,e}function Wd(e){if(e===Qs||e===al)throw Error(N(483))}var Rs=null,Wa=0;function zr(e){var t=Wa;return Wa+=1,Rs===null&&(Rs=[]),nm(Rs,e,t)}function ha(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Pr(e,t){throw t.$$typeof===Jy?Error(N(525)):(e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sm(e){function t(m,b){if(e){var y=m.deletions;y===null?(m.deletions=[b],m.flags|=16):y.push(b)}}function i(m,b){if(!e)return null;for(;b!==null;)t(m,b),b=b.sibling;return null}function n(m){for(var b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function s(m,b){return m=Di(m,b),m.index=0,m.sibling=null,m}function a(m,b,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<b?(m.flags|=67108866,b):y):(m.flags|=67108866,b)):(m.flags|=1048576,b)}function r(m){return e&&m.alternate===null&&(m.flags|=67108866),m}function o(m,b,y,A){return b===null||b.tag!==6?(b=Kl(y,m.mode,A),b.return=m,b):(b=s(b,y),b.return=m,b)}function l(m,b,y,A){var x=y.type;return x===ds?u(m,b,y.props.children,A,y.key):b!==null&&(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ui&&Cn(x)===b.type)?(b=s(b,y.props),ha(b,y),b.return=m,b):(b=Qr(y.type,y.key,y.props,null,m.mode,A),ha(b,y),b.return=m,b)}function c(m,b,y,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Wl(y,m.mode,A),b.return=m,b):(b=s(b,y.children||[]),b.return=m,b)}function u(m,b,y,A,x){return b===null||b.tag!==7?(b=Dn(y,m.mode,A,x),b.return=m,b):(b=s(b,y),b.return=m,b)}function h(m,b,y){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Kl(""+b,m.mode,y),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mr:return y=Qr(b.type,b.key,b.props,null,m.mode,y),ha(y,b),y.return=m,y;case Aa:return b=Wl(b,m.mode,y),b.return=m,b;case Ui:return b=Cn(b),h(m,b,y)}if(Sa(b)||la(b))return b=Dn(b,m.mode,y,null),b.return=m,b;if(typeof b.then=="function")return h(m,zr(b),y);if(b.$$typeof===Ti)return h(m,kr(m,b),y);Pr(m,b)}return null}function d(m,b,y,A){var x=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return x!==null?null:o(m,b,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mr:return y.key===x?l(m,b,y,A):null;case Aa:return y.key===x?c(m,b,y,A):null;case Ui:return y=Cn(y),d(m,b,y,A)}if(Sa(y)||la(y))return x!==null?null:u(m,b,y,A,null);if(typeof y.then=="function")return d(m,b,zr(y),A);if(y.$$typeof===Ti)return d(m,b,kr(m,y),A);Pr(m,y)}return null}function f(m,b,y,A,x){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return m=m.get(y)||null,o(b,m,""+A,x);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mr:return m=m.get(A.key===null?y:A.key)||null,l(b,m,A,x);case Aa:return m=m.get(A.key===null?y:A.key)||null,c(b,m,A,x);case Ui:return A=Cn(A),f(m,b,y,A,x)}if(Sa(A)||la(A))return m=m.get(y)||null,u(b,m,A,x,null);if(typeof A.then=="function")return f(m,b,y,zr(A),x);if(A.$$typeof===Ti)return f(m,b,y,kr(b,A),x);Pr(b,A)}return null}function g(m,b,y,A){for(var x=null,E=null,w=b,T=b=0,M=null;w!==null&&T<y.length;T++){w.index>T?(M=w,w=null):M=w.sibling;var D=d(m,w,y[T],A);if(D===null){w===null&&(w=M);break}e&&w&&D.alternate===null&&t(m,w),b=a(D,b,T),E===null?x=D:E.sibling=D,E=D,w=M}if(T===y.length)return i(m,w),lt&&Ei(m,T),x;if(w===null){for(;T<y.length;T++)w=h(m,y[T],A),w!==null&&(b=a(w,b,T),E===null?x=w:E.sibling=w,E=w);return lt&&Ei(m,T),x}for(w=n(w);T<y.length;T++)M=f(w,m,T,y[T],A),M!==null&&(e&&M.alternate!==null&&w.delete(M.key===null?T:M.key),b=a(M,b,T),E===null?x=M:E.sibling=M,E=M);return e&&w.forEach(function(z){return t(m,z)}),lt&&Ei(m,T),x}function p(m,b,y,A){if(y==null)throw Error(N(151));for(var x=null,E=null,w=b,T=b=0,M=null,D=y.next();w!==null&&!D.done;T++,D=y.next()){w.index>T?(M=w,w=null):M=w.sibling;var z=d(m,w,D.value,A);if(z===null){w===null&&(w=M);break}e&&w&&z.alternate===null&&t(m,w),b=a(z,b,T),E===null?x=z:E.sibling=z,E=z,w=M}if(D.done)return i(m,w),lt&&Ei(m,T),x;if(w===null){for(;!D.done;T++,D=y.next())D=h(m,D.value,A),D!==null&&(b=a(D,b,T),E===null?x=D:E.sibling=D,E=D);return lt&&Ei(m,T),x}for(w=n(w);!D.done;T++,D=y.next())D=f(w,m,T,D.value,A),D!==null&&(e&&D.alternate!==null&&w.delete(D.key===null?T:D.key),b=a(D,b,T),E===null?x=D:E.sibling=D,E=D);return e&&w.forEach(function(H){return t(m,H)}),lt&&Ei(m,T),x}function v(m,b,y,A){if(typeof y=="object"&&y!==null&&y.type===ds&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Mr:t:{for(var x=y.key;b!==null;){if(b.key===x){if(x=y.type,x===ds){if(b.tag===7){i(m,b.sibling),A=s(b,y.props.children),A.return=m,m=A;break t}}else if(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ui&&Cn(x)===b.type){i(m,b.sibling),A=s(b,y.props),ha(A,y),A.return=m,m=A;break t}i(m,b);break}else t(m,b);b=b.sibling}y.type===ds?(A=Dn(y.props.children,m.mode,A,y.key),A.return=m,m=A):(A=Qr(y.type,y.key,y.props,null,m.mode,A),ha(A,y),A.return=m,m=A)}return r(m);case Aa:t:{for(x=y.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){i(m,b.sibling),A=s(b,y.children||[]),A.return=m,m=A;break t}else{i(m,b);break}else t(m,b);b=b.sibling}A=Wl(y,m.mode,A),A.return=m,m=A}return r(m);case Ui:return y=Cn(y),v(m,b,y,A)}if(Sa(y))return g(m,b,y,A);if(la(y)){if(x=la(y),typeof x!="function")throw Error(N(150));return y=x.call(y),p(m,b,y,A)}if(typeof y.then=="function")return v(m,b,zr(y),A);if(y.$$typeof===Ti)return v(m,b,kr(m,y),A);Pr(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,b!==null&&b.tag===6?(i(m,b.sibling),A=s(b,y),A.return=m,m=A):(i(m,b),A=Kl(y,m.mode,A),A.return=m,m=A),r(m)):i(m,b)}return function(m,b,y,A){try{Wa=0;var x=v(m,b,y,A);return Rs=null,x}catch(w){if(w===Qs||w===al)throw w;var E=Me(29,w,null,m.mode);return E.lanes=A,E.return=m,E}finally{}}}var jn=sm(!0),am=sm(!1),Gi=!1;function bh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function nn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sn(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ct&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=vo(e),Wp(e,null,i),t}return sl(e,n,t,i),vo(e)}function Oa(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,_p(e,i)}}function Ql(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};a===null?s=a=r:a=a.next=r,i=i.next}while(i!==null);a===null?s=a=t:a=a.next=t}else s=a=t;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var su=!1;function La(){if(su){var e=Ms;if(e!==null)throw e}}function ka(e,t,i,n){su=!1;var s=e.updateQueue;Gi=!1;var a=s.firstBaseUpdate,r=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,r===null?a=c:r.next=c,r=l;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==r&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var h=s.baseState;r=0,u=c=l=null,o=a;do{var d=o.lane&-536870913,f=d!==o.lane;if(f?(rt&d)===d:(n&d)===d){d!==0&&d===js&&(su=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var g=e,p=o;d=t;var v=i;switch(p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(v,h,d);break t}h=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,d=typeof g=="function"?g.call(v,h,d):g,d==null)break t;h=_t({},h,d);break t;case 2:Gi=!0}}d=o.callback,d!==null&&(e.flags|=64,f&&(e.flags|=8192),f=s.callbacks,f===null?s.callbacks=[d]:f.push(d))}else f={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,r|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,a===null&&(s.shared.lanes=0),pn|=r,e.lanes=r,e.memoizedState=h}}function rm(e,t){if(typeof e!="function")throw Error(N(191,e));e.call(t)}function om(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)rm(i[e],t)}var Is=pi(null),_o=pi(0);function Zd(e,t){e=ji,yt(_o,e),yt(Is,t),ji=e|t.baseLanes}function au(){yt(_o,ji),yt(Is,Is.current)}function yh(){ji=_o.current,Jt(Is),Jt(_o)}var je=pi(null),Ke=null;function qi(e){var t=e.alternate;yt(kt,kt.current&1),yt(je,e),Ke===null&&(t===null||Is.current!==null||t.memoizedState!==null)&&(Ke=e)}function ru(e){yt(kt,kt.current),yt(je,e),Ke===null&&(Ke=e)}function lm(e){e.tag===22?(yt(kt,kt.current),yt(je,e),Ke===null&&(Ke=e)):Xi()}function Xi(){yt(kt,kt.current),yt(je,je.current)}function Te(e){Jt(je),Ke===e&&(Ke=null),Jt(kt)}var kt=pi(0);function wo(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Eu(i)||Cu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ki=0,W=null,pt=null,Ft=null,Eo=!1,Ds=!1,In=!1,Co=0,Za=0,Ns=null,gA=0;function Mt(){throw Error(N(321))}function vh(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Pe(e[i],t[i]))return!1;return!0}function Ah(e,t,i,n,s,a){return ki=a,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X.H=e===null||e.memoizedState===null?Fm:Nh,In=!1,a=i(n,s),In=!1,Ds&&(a=um(t,i,n,s)),cm(e),a}function cm(e){X.H=Qa;var t=pt!==null&&pt.next!==null;if(ki=0,Ft=pt=W=null,Eo=!1,Za=0,Ns=null,t)throw Error(N(300));e===null||Gt||(e=e.dependencies,e!==null&&So(e)&&(Gt=!0))}function um(e,t,i,n){W=e;var s=0;do{if(Ds&&(Ns=null),Za=0,Ds=!1,25<=s)throw Error(N(301));if(s+=1,Ft=pt=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}X.H=Hm,a=t(i,n)}while(Ds);return a}function pA(){var e=X.H,t=e.useState()[0];return t=typeof t.then=="function"?fr(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(W.flags|=1024),t}function Sh(){var e=Co!==0;return Co=0,e}function xh(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function _h(e){if(Eo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Eo=!1}ki=0,Ft=pt=W=null,Ds=!1,Za=Co=0,Ns=null}function ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?W.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function zt(){if(pt===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Ft===null?W.memoizedState:Ft.next;if(t!==null)Ft=t,pt=e;else{if(e===null)throw W.alternate===null?Error(N(467)):Error(N(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ft===null?W.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fr(e){var t=Za;return Za+=1,Ns===null&&(Ns=[]),e=nm(Ns,e,t),t=W,(Ft===null?t.memoizedState:Ft.next)===null&&(t=t.alternate,X.H=t===null||t.memoizedState===null?Fm:Nh),e}function ol(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fr(e);if(e.$$typeof===Ti)return se(e)}throw Error(N(438,String(e)))}function wh(e){var t=null,i=W.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=W.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=rl(),W.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=tv;return t.index++,i}function zi(e,t){return typeof t=="function"?t(e):t}function to(e){var t=zt();return Eh(t,pt,e)}function Eh(e,t,i){var n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=i;var s=e.baseQueue,a=n.pending;if(a!==null){if(s!==null){var r=s.next;s.next=a.next,a.next=r}t.baseQueue=s=a,n.pending=null}if(a=e.baseState,s===null)e.memoizedState=a;else{t=s.next;var o=r=null,l=null,c=t,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(rt&h)===h:(ki&h)===h){var d=c.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===js&&(u=!0);else if((ki&d)===d){c=c.next,d===js&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,r=a):l=l.next=h,W.lanes|=d,pn|=d;h=c.action,In&&i(a,h),a=c.hasEagerState?c.eagerState:i(a,h)}else d={lane:h,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,r=a):l=l.next=d,W.lanes|=h,pn|=h;c=c.next}while(c!==null&&c!==t);if(l===null?r=a:l.next=o,!Pe(a,e.memoizedState)&&(Gt=!0,u&&(i=Ms,i!==null)))throw i;e.memoizedState=a,e.baseState=r,e.baseQueue=l,n.lastRenderedState=a}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Jl(e){var t=zt(),i=t.queue;if(i===null)throw Error(N(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,a=t.memoizedState;if(s!==null){i.pending=null;var r=s=s.next;do a=e(a,r.action),r=r.next;while(r!==s);Pe(a,t.memoizedState)||(Gt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function hm(e,t,i){var n=W,s=zt(),a=lt;if(a){if(i===void 0)throw Error(N(407));i=i()}else i=t();var r=!Pe((pt||s).memoizedState,i);if(r&&(s.memoizedState=i,Gt=!0),s=s.queue,Ch(gm.bind(null,n,s,e),[e]),s.getSnapshot!==t||r||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Fs(9,{destroy:void 0},fm.bind(null,n,s,i,t),null),bt===null)throw Error(N(349));a||ki&127||dm(n,t,i)}return i}function dm(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=W.updateQueue,t===null?(t=rl(),W.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fm(e,t,i,n){t.value=i,t.getSnapshot=n,pm(t)&&mm(e)}function gm(e,t,i){return i(function(){pm(t)&&mm(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Pe(e,i)}catch{return!0}}function mm(e){var t=Xn(e,2);t!==null&&xe(t,e,2)}function ou(e){var t=ue();if(typeof e=="function"){var i=e;if(e=i(),In){Ki(!0);try{i()}finally{Ki(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t}function bm(e,t,i,n){return e.baseState=i,Eh(e,pt,typeof n=="function"?n:zi)}function mA(e,t,i,n,s){if(cl(e))throw Error(N(485));if(e=t.action,e!==null){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};X.T!==null?i(!0):a.isTransition=!1,n(a),i=t.pending,i===null?(a.next=t.pending=a,ym(t,a)):(a.next=i.next,t.pending=i.next=a)}}function ym(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var a=X.T,r={};X.T=r;try{var o=i(s,n),l=X.S;l!==null&&l(r,o),Qd(e,t,o)}catch(c){lu(e,t,c)}finally{a!==null&&r.types!==null&&(a.types=r.types),X.T=a}}else try{a=i(s,n),Qd(e,t,a)}catch(c){lu(e,t,c)}}function Qd(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){Jd(e,t,n)},function(n){return lu(e,t,n)}):Jd(e,t,i)}function Jd(e,t,i){t.status="fulfilled",t.value=i,vm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function lu(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,vm(t),t=t.next;while(t!==n)}e.action=null}function vm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Am(e,t){return t}function tf(e,t){if(lt){var i=bt.formState;if(i!==null){t:{var n=W;if(lt){if(At){e:{for(var s=At,a=Ye;s.nodeType!==8;){if(!a){s=null;break e}if(s=We(s.nextSibling),s===null){s=null;break e}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){At=We(s.nextSibling),n=s.data==="F!";break t}}fn(n)}n=!1}n&&(t=i[0])}}return i=ue(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:t},i.queue=n,i=Pm.bind(null,W,n),n.dispatch=i,n=ou(!1),a=Dh.bind(null,W,!1,n.queue),n=ue(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,i=mA.bind(null,W,s,a,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function ef(e){var t=zt();return Sm(t,pt,e)}function Sm(e,t,i){if(t=Eh(e,t,Am)[0],e=to(zi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=fr(t)}catch(r){throw r===Qs?al:r}else n=t;t=zt();var s=t.queue,a=s.dispatch;return i!==t.memoizedState&&(W.flags|=2048,Fs(9,{destroy:void 0},bA.bind(null,s,i),null)),[n,a,e]}function bA(e,t){e.action=t}function nf(e){var t=zt(),i=pt;if(i!==null)return Sm(t,i,e);zt(),t=t.memoizedState,i=zt();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Fs(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=W.updateQueue,t===null&&(t=rl(),W.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function xm(){return zt().memoizedState}function eo(e,t,i,n){var s=ue();W.flags|=e,s.memoizedState=Fs(1|t,{destroy:void 0},i,n===void 0?null:n)}function ll(e,t,i,n){var s=zt();n=n===void 0?null:n;var a=s.memoizedState.inst;pt!==null&&n!==null&&vh(n,pt.memoizedState.deps)?s.memoizedState=Fs(t,a,i,n):(W.flags|=e,s.memoizedState=Fs(1|t,a,i,n))}function sf(e,t){eo(8390656,8,e,t)}function Ch(e,t){ll(2048,8,e,t)}function yA(e){W.flags|=4;var t=W.updateQueue;if(t===null)t=rl(),W.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function _m(e){var t=zt().memoizedState;return yA({ref:t,nextImpl:e}),function(){if(ct&2)throw Error(N(440));return t.impl.apply(void 0,arguments)}}function wm(e,t){return ll(4,2,e,t)}function Em(e,t){return ll(4,4,e,t)}function Cm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tm(e,t,i){i=i!=null?i.concat([e]):null,ll(4,4,Cm.bind(null,t,e),i)}function Th(){}function Mm(e,t){var i=zt();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&vh(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Rm(e,t){var i=zt();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&vh(t,n[1]))return n[0];if(n=e(),In){Ki(!0);try{e()}finally{Ki(!1)}}return i.memoizedState=[n,t],n}function Mh(e,t,i){return i===void 0||ki&1073741824&&!(rt&261930)?e.memoizedState=t:(e.memoizedState=i,e=bb(),W.lanes|=e,pn|=e,i)}function Dm(e,t,i,n){return Pe(i,t)?i:Is.current!==null?(e=Mh(e,i,n),Pe(e,t)||(Gt=!0),e):!(ki&42)||ki&1073741824&&!(rt&261930)?(Gt=!0,e.memoizedState=i):(e=bb(),W.lanes|=e,pn|=e,t)}function Nm(e,t,i,n,s){var a=ut.p;ut.p=a!==0&&8>a?a:8;var r=X.T,o={};X.T=o,Dh(e,!1,t,i);try{var l=s(),c=X.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=fA(l,n);za(e,t,u,ke(e))}else za(e,t,n,ke(e))}catch(h){za(e,t,{then:function(){},status:"rejected",reason:h},ke())}finally{ut.p=a,r!==null&&o.types!==null&&(r.types=o.types),X.T=r}}function vA(){}function cu(e,t,i,n){if(e.tag!==5)throw Error(N(476));var s=Om(e).queue;Nm(e,s,t,Rn,i===null?vA:function(){return Lm(e),i(n)})}function Om(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Rn,baseState:Rn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:Rn},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lm(e){var t=Om(e);t.next===null&&(t=e.alternate.memoizedState),za(e,t.next.queue,{},ke())}function Rh(){return se(er)}function km(){return zt().memoizedState}function zm(){return zt().memoizedState}function AA(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=ke();e=nn(i);var n=sn(t,e,i);n!==null&&(xe(n,t,i),Oa(n,t,i)),t={cache:gh()},e.payload=t;return}t=t.return}}function SA(e,t,i){var n=ke();i={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},cl(e)?jm(t,i):(i=uh(e,t,i,n),i!==null&&(xe(i,e,n),Im(i,t,n)))}function Pm(e,t,i){var n=ke();za(e,t,i,n)}function za(e,t,i,n){var s={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(cl(e))jm(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var r=t.lastRenderedState,o=a(r,i);if(s.hasEagerState=!0,s.eagerState=o,Pe(o,r))return sl(e,t,s,0),bt===null&&nl(),!1}catch{}finally{}if(i=uh(e,t,s,n),i!==null)return xe(i,e,n),Im(i,t,n),!0}return!1}function Dh(e,t,i,n){if(n={lane:2,revertLane:Fh(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},cl(e)){if(t)throw Error(N(479))}else t=uh(e,i,n,2),t!==null&&xe(t,e,2)}function cl(e){var t=e.alternate;return e===W||t!==null&&t===W}function jm(e,t){Ds=Eo=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Im(e,t,i){if(i&4194048){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,_p(e,i)}}var Qa={readContext:se,use:ol,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Qa.useEffectEvent=Mt;var Fm={readContext:se,use:ol,useCallback:function(e,t){return ue().memoizedState=[e,t===void 0?null:t],e},useContext:se,useEffect:sf,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,eo(4194308,4,Cm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return eo(4194308,4,e,t)},useInsertionEffect:function(e,t){eo(4,2,e,t)},useMemo:function(e,t){var i=ue();t=t===void 0?null:t;var n=e();if(In){Ki(!0);try{e()}finally{Ki(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=ue();if(i!==void 0){var s=i(t);if(In){Ki(!0);try{i(t)}finally{Ki(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=SA.bind(null,W,e),[n.memoizedState,e]},useRef:function(e){var t=ue();return e={current:e},t.memoizedState=e},useState:function(e){e=ou(e);var t=e.queue,i=Pm.bind(null,W,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Th,useDeferredValue:function(e,t){var i=ue();return Mh(i,e,t)},useTransition:function(){var e=ou(!1);return e=Nm.bind(null,W,e.queue,!0,!1),ue().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=W,s=ue();if(lt){if(i===void 0)throw Error(N(407));i=i()}else{if(i=t(),bt===null)throw Error(N(349));rt&127||dm(n,t,i)}s.memoizedState=i;var a={value:i,getSnapshot:t};return s.queue=a,sf(gm.bind(null,n,a,e),[e]),n.flags|=2048,Fs(9,{destroy:void 0},fm.bind(null,n,a,i,t),null),i},useId:function(){var e=ue(),t=bt.identifierPrefix;if(lt){var i=ui,n=ci;i=(n&~(1<<32-Le(n)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Co++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=gA++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Rh,useFormState:tf,useActionState:tf,useOptimistic:function(e){var t=ue();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Dh.bind(null,W,!0,i),i.dispatch=t,[e,t]},useMemoCache:wh,useCacheRefresh:function(){return ue().memoizedState=AA.bind(null,W)},useEffectEvent:function(e){var t=ue(),i={impl:e};return t.memoizedState=i,function(){if(ct&2)throw Error(N(440));return i.impl.apply(void 0,arguments)}}},Nh={readContext:se,use:ol,useCallback:Mm,useContext:se,useEffect:Ch,useImperativeHandle:Tm,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Rm,useReducer:to,useRef:xm,useState:function(){return to(zi)},useDebugValue:Th,useDeferredValue:function(e,t){var i=zt();return Dm(i,pt.memoizedState,e,t)},useTransition:function(){var e=to(zi)[0],t=zt().memoizedState;return[typeof e=="boolean"?e:fr(e),t]},useSyncExternalStore:hm,useId:km,useHostTransitionStatus:Rh,useFormState:ef,useActionState:ef,useOptimistic:function(e,t){var i=zt();return bm(i,pt,e,t)},useMemoCache:wh,useCacheRefresh:zm};Nh.useEffectEvent=_m;var Hm={readContext:se,use:ol,useCallback:Mm,useContext:se,useEffect:Ch,useImperativeHandle:Tm,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Rm,useReducer:Jl,useRef:xm,useState:function(){return Jl(zi)},useDebugValue:Th,useDeferredValue:function(e,t){var i=zt();return pt===null?Mh(i,e,t):Dm(i,pt.memoizedState,e,t)},useTransition:function(){var e=Jl(zi)[0],t=zt().memoizedState;return[typeof e=="boolean"?e:fr(e),t]},useSyncExternalStore:hm,useId:km,useHostTransitionStatus:Rh,useFormState:nf,useActionState:nf,useOptimistic:function(e,t){var i=zt();return pt!==null?bm(i,pt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:wh,useCacheRefresh:zm};Hm.useEffectEvent=_m;function tc(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:_t({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var uu={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ke(),s=nn(n);s.payload=t,i!=null&&(s.callback=i),t=sn(e,s,n),t!==null&&(xe(t,e,n),Oa(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ke(),s=nn(n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=sn(e,s,n),t!==null&&(xe(t,e,n),Oa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ke(),n=nn(i);n.tag=2,t!=null&&(n.callback=t),t=sn(e,n,i),t!==null&&(xe(t,e,i),Oa(t,e,i))}};function af(e,t,i,n,s,a,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,r):t.prototype&&t.prototype.isPureReactComponent?!Ya(i,n)||!Ya(s,a):!0}function rf(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&uu.enqueueReplaceState(t,t.state,null)}function Fn(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=_t({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function Bm(e){yo(e)}function Um(e){console.error(e)}function Gm(e){yo(e)}function To(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function of(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function hu(e,t,i){return i=nn(i),i.tag=3,i.payload={element:null},i.callback=function(){To(e,t)},i}function Vm(e){return e=nn(e),e.tag=3,e}function qm(e,t,i,n){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;e.payload=function(){return s(a)},e.callback=function(){of(t,i,n)}}var r=i.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){of(t,i,n),typeof s!="function"&&(an===null?an=new Set([this]):an.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})})}function xA(e,t,i,n,s){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&Zs(t,i,s,!0),i=je.current,i!==null){switch(i.tag){case 31:case 13:return Ke===null?Oo():i.alternate===null&&Rt===0&&(Rt=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===xo?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),hc(e,n,s)),!1;case 22:return i.flags|=65536,n===xo?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),hc(e,n,s)),!1}throw Error(N(435,i.tag))}return hc(e,n,s),Oo(),!1}if(lt)return t=je.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Qc&&(e=Error(N(422),{cause:n}),Ka(Xe(e,i)))):(n!==Qc&&(t=Error(N(423),{cause:n}),Ka(Xe(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Xe(n,i),s=hu(e.stateNode,n,s),Ql(e,s),Rt!==4&&(Rt=2)),!1;var a=Error(N(520),{cause:n});if(a=Xe(a,i),Ia===null?Ia=[a]:Ia.push(a),Rt!==4&&(Rt=2),t===null)return!0;n=Xe(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=hu(i.stateNode,n,e),Ql(i,e),!1;case 1:if(t=i.type,a=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(an===null||!an.has(a))))return i.flags|=65536,s&=-s,i.lanes|=s,s=Vm(s),qm(s,e,i,n),Ql(i,s),!1}i=i.return}while(i!==null);return!1}var Oh=Error(N(461)),Gt=!1;function ee(e,t,i,n){t.child=e===null?am(t,null,i,n):jn(t,e.child,i,n)}function lf(e,t,i,n,s){i=i.render;var a=t.ref;if("ref"in n){var r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}else r=n;return Pn(t),n=Ah(e,t,i,r,a,s),o=Sh(),e!==null&&!Gt?(xh(e,t,s),Pi(e,t,s)):(lt&&o&&dh(t),t.flags|=1,ee(e,t,n,s),t.child)}function cf(e,t,i,n,s){if(e===null){var a=i.type;return typeof a=="function"&&!hh(a)&&a.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=a,Xm(e,t,a,n,s)):(e=Qr(i.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Lh(e,s)){var r=a.memoizedProps;if(i=i.compare,i=i!==null?i:Ya,i(r,n)&&e.ref===t.ref)return Pi(e,t,s)}return t.flags|=1,e=Di(a,n),e.ref=t.ref,e.return=t,t.child=e}function Xm(e,t,i,n,s){if(e!==null){var a=e.memoizedProps;if(Ya(a,n)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=n=a,Lh(e,s))e.flags&131072&&(Gt=!0);else return t.lanes=e.lanes,Pi(e,t,s)}return du(e,t,i,n,s)}function Ym(e,t,i,n){var s=n.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|i:i,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~a}else n=0,t.child=null;return uf(e,t,a,i,n)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jr(t,a!==null?a.cachePool:null),a!==null?Zd(t,a):au(),lm(t);else return n=t.lanes=536870912,uf(e,t,a!==null?a.baseLanes|i:i,i,n)}else a!==null?(Jr(t,a.cachePool),Zd(t,a),Xi(),t.memoizedState=null):(e!==null&&Jr(t,null),au(),Xi());return ee(e,t,s,i),t.child}function _a(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function uf(e,t,i,n,s){var a=ph();return a=a===null?null:{parent:Bt._currentValue,pool:a},t.memoizedState={baseLanes:i,cachePool:a},e!==null&&Jr(t,null),au(),lm(t),e!==null&&Zs(e,t,n,!0),t.childLanes=s,null}function io(e,t){return t=Mo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function hf(e,t,i){return jn(t,e.child,null,i),e=io(t,t.pendingProps),e.flags|=2,Te(t),t.memoizedState=null,e}function _A(e,t,i){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(lt){if(n.mode==="hidden")return e=io(t,n),t.lanes=536870912,_a(null,e);if(ru(t),(e=At)?(e=Fb(e,Ye),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dn!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},i=Qp(e),i.return=t,t.child=i,ne=t,At=null)):e=null,e===null)throw fn(t);return t.lanes=536870912,null}return io(t,n)}var a=e.memoizedState;if(a!==null){var r=a.dehydrated;if(ru(t),s)if(t.flags&256)t.flags&=-257,t=hf(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(N(558));else if(Gt||Zs(e,t,i,!1),s=(i&e.childLanes)!==0,Gt||s){if(n=bt,n!==null&&(r=wp(n,i),r!==0&&r!==a.retryLane))throw a.retryLane=r,Xn(e,r),xe(n,e,r),Oh;Oo(),t=hf(e,t,i)}else e=a.treeContext,At=We(r.nextSibling),ne=t,lt=!0,en=null,Ye=!1,e!==null&&tm(t,e),t=io(t,n),t.flags|=4096;return t}return e=Di(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function no(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(N(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function du(e,t,i,n,s){return Pn(t),i=Ah(e,t,i,n,void 0,s),n=Sh(),e!==null&&!Gt?(xh(e,t,s),Pi(e,t,s)):(lt&&n&&dh(t),t.flags|=1,ee(e,t,i,s),t.child)}function df(e,t,i,n,s,a){return Pn(t),t.updateQueue=null,i=um(t,n,i,s),cm(e),n=Sh(),e!==null&&!Gt?(xh(e,t,a),Pi(e,t,a)):(lt&&n&&dh(t),t.flags|=1,ee(e,t,i,a),t.child)}function ff(e,t,i,n,s){if(Pn(t),t.stateNode===null){var a=As,r=i.contextType;typeof r=="object"&&r!==null&&(a=se(r)),a=new i(n,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=uu,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=n,a.state=t.memoizedState,a.refs={},bh(t),r=i.contextType,a.context=typeof r=="object"&&r!==null?se(r):As,a.state=t.memoizedState,r=i.getDerivedStateFromProps,typeof r=="function"&&(tc(t,i,r,n),a.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&uu.enqueueReplaceState(a,a.state,null),ka(t,n,a,s),La(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){a=t.stateNode;var o=t.memoizedProps,l=Fn(i,o);a.props=l;var c=a.context,u=i.contextType;r=As,typeof u=="object"&&u!==null&&(r=se(u));var h=i.getDerivedStateFromProps;u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==r)&&rf(t,a,n,r),Gi=!1;var d=t.memoizedState;a.state=d,ka(t,n,a,s),La(),c=t.memoizedState,o||d!==c||Gi?(typeof h=="function"&&(tc(t,i,h,n),c=t.memoizedState),(l=Gi||af(t,i,l,n,d,c,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=r,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,nu(e,t),r=t.memoizedProps,u=Fn(i,r),a.props=u,h=t.pendingProps,d=a.context,c=i.contextType,l=As,typeof c=="object"&&c!==null&&(l=se(c)),o=i.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==h||d!==l)&&rf(t,a,n,l),Gi=!1,d=t.memoizedState,a.state=d,ka(t,n,a,s),La();var f=t.memoizedState;r!==h||d!==f||Gi||e!==null&&e.dependencies!==null&&So(e.dependencies)?(typeof o=="function"&&(tc(t,i,o,n),f=t.memoizedState),(u=Gi||af(t,i,u,n,d,f,l)||e!==null&&e.dependencies!==null&&So(e.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,no(e,t),n=(t.flags&128)!==0,a||n?(a=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&n?(t.child=jn(t,e.child,null,s),t.child=jn(t,null,i,s)):ee(e,t,i,s),t.memoizedState=a.state,e=t.child):e=Pi(e,t,s),e}function gf(e,t,i,n){return zn(),t.flags|=256,ee(e,t,i,n),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(e){return{baseLanes:e,cachePool:im()}}function nc(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=De),e}function $m(e,t,i){var n=t.pendingProps,s=!1,a=(t.flags&128)!==0,r;if((r=a)||(r=e!==null&&e.memoizedState===null?!1:(kt.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(lt){if(s?qi(t):Xi(),(e=At)?(e=Fb(e,Ye),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dn!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},i=Qp(e),i.return=t,t.child=i,ne=t,At=null)):e=null,e===null)throw fn(t);return Cu(e)?t.lanes=32:t.lanes=536870912,null}var o=n.children;return n=n.fallback,s?(Xi(),s=t.mode,o=Mo({mode:"hidden",children:o},s),n=Dn(n,s,i,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n=t.child,n.memoizedState=ic(i),n.childLanes=nc(e,r,i),t.memoizedState=ec,_a(null,n)):(qi(t),fu(t,o))}var l=e.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(a)t.flags&256?(qi(t),t.flags&=-257,t=sc(e,t,i)):t.memoizedState!==null?(Xi(),t.child=e.child,t.flags|=128,t=null):(Xi(),o=n.fallback,s=t.mode,n=Mo({mode:"visible",children:n.children},s),o=Dn(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,jn(t,e.child,null,i),n=t.child,n.memoizedState=ic(i),n.childLanes=nc(e,r,i),t.memoizedState=ec,t=_a(null,n));else if(qi(t),Cu(o)){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;r=c,n=Error(N(419)),n.stack="",n.digest=r,Ka({value:n,source:null,stack:null}),t=sc(e,t,i)}else if(Gt||Zs(e,t,i,!1),r=(i&e.childLanes)!==0,Gt||r){if(r=bt,r!==null&&(n=wp(r,i),n!==0&&n!==l.retryLane))throw l.retryLane=n,Xn(e,n),xe(r,e,n),Oh;Eu(o)||Oo(),t=sc(e,t,i)}else Eu(o)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,At=We(o.nextSibling),ne=t,lt=!0,en=null,Ye=!1,e!==null&&tm(t,e),t=fu(t,n.children),t.flags|=4096);return t}return s?(Xi(),o=n.fallback,s=t.mode,l=e.child,c=l.sibling,n=Di(l,{mode:"hidden",children:n.children}),n.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Di(c,o):(o=Dn(o,s,i,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,_a(null,n),n=t.child,o=e.child.memoizedState,o===null?o=ic(i):(s=o.cachePool,s!==null?(l=Bt._currentValue,s=s.parent!==l?{parent:l,pool:l}:s):s=im(),o={baseLanes:o.baseLanes|i,cachePool:s}),n.memoizedState=o,n.childLanes=nc(e,r,i),t.memoizedState=ec,_a(e.child,n)):(qi(t),i=e.child,e=i.sibling,i=Di(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function fu(e,t){return t=Mo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mo(e,t){return e=Me(22,e,null,t),e.lanes=0,e}function sc(e,t,i){return jn(t,e.child,null,i),e=fu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pf(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),tu(e.return,t,i)}function ac(e,t,i,n,s,a){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s,treeForkCount:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s,r.treeForkCount=a)}function Km(e,t,i){var n=t.pendingProps,s=n.revealOrder,a=n.tail;n=n.children;var r=kt.current,o=(r&2)!==0;if(o?(r=r&1|2,t.flags|=128):r&=1,yt(kt,r),ee(e,t,n,i),n=lt?$a:0,!o&&e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pf(e,i,t);else if(e.tag===19)pf(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&wo(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),ac(t,!1,s,i,a,n);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&wo(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}ac(t,!0,i,null,a,n);break;case"together":ac(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Pi(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),pn|=t.lanes,!(i&t.childLanes))if(e!==null){if(Zs(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,i=Di(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Di(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Lh(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&So(e)))}function wA(e,t,i){switch(t.tag){case 3:go(t,t.stateNode.containerInfo),Vi(t,Bt,e.memoizedState.cache),zn();break;case 27:case 5:Bc(t);break;case 4:go(t,t.stateNode.containerInfo);break;case 10:Vi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ru(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(qi(t),t.flags|=128,null):i&t.child.childLanes?$m(e,t,i):(qi(t),e=Pi(e,t,i),e!==null?e.sibling:null);qi(t);break;case 19:var s=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(Zs(e,t,i,!1),n=(i&t.childLanes)!==0),s){if(n)return Km(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(kt,kt.current),n)break;return null;case 22:return t.lanes=0,Ym(e,t,i,t.pendingProps);case 24:Vi(t,Bt,e.memoizedState.cache)}return Pi(e,t,i)}function Wm(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Gt=!0;else{if(!Lh(e,i)&&!(t.flags&128))return Gt=!1,wA(e,t,i);Gt=!!(e.flags&131072)}else Gt=!1,lt&&t.flags&1048576&&Jp(t,$a,t.index);switch(t.lanes=0,t.tag){case 16:t:{var n=t.pendingProps;if(e=Cn(t.elementType),t.type=e,typeof e=="function")hh(e)?(n=Fn(e,n),t.tag=1,t=ff(null,t,e,n,i)):(t.tag=0,t=du(null,t,e,n,i));else{if(e!=null){var s=e.$$typeof;if(s===Zu){t.tag=11,t=lf(null,t,e,n,i);break t}else if(s===Qu){t.tag=14,t=cf(null,t,e,n,i);break t}}throw t=Fc(e)||e,Error(N(306,t,""))}}return t;case 0:return du(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,s=Fn(n,t.pendingProps),ff(e,t,n,s,i);case 3:t:{if(go(t,t.stateNode.containerInfo),e===null)throw Error(N(387));n=t.pendingProps;var a=t.memoizedState;s=a.element,nu(e,t),ka(t,n,null,i);var r=t.memoizedState;if(n=r.cache,Vi(t,Bt,n),n!==a.cache&&eu(t,[Bt],i,!0),La(),n=r.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=gf(e,t,n,i);break t}else if(n!==s){s=Xe(Error(N(424)),t),Ka(s),t=gf(e,t,n,i);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(At=We(e.firstChild),ne=t,lt=!0,en=null,Ye=!0,i=am(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(zn(),n===s){t=Pi(e,t,i);break t}ee(e,t,n,i)}t=t.child}return t;case 26:return no(e,t),e===null?(i=zf(t.type,null,t.pendingProps,null))?t.memoizedState=i:lt||(i=t.type,e=t.pendingProps,n=Po(tn.current).createElement(i),n[ie]=t,n[_e]=e,ae(n,i,e),Qt(n),t.stateNode=n):t.memoizedState=zf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Bc(t),e===null&&lt&&(n=t.stateNode=Hb(t.type,t.pendingProps,tn.current),ne=t,Ye=!0,s=At,An(t.type)?(Tu=s,At=We(n.firstChild)):At=s),ee(e,t,t.pendingProps.children,i),no(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&lt&&((s=n=At)&&(n=tS(n,t.type,t.pendingProps,Ye),n!==null?(t.stateNode=n,ne=t,At=We(n.firstChild),Ye=!1,s=!0):s=!1),s||fn(t)),Bc(t),s=t.type,a=t.pendingProps,r=e!==null?e.memoizedProps:null,n=a.children,_u(s,a)?n=null:r!==null&&_u(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=Ah(e,t,pA,null,null,i),er._currentValue=s),no(e,t),ee(e,t,n,i),t.child;case 6:return e===null&&lt&&((e=i=At)&&(i=eS(i,t.pendingProps,Ye),i!==null?(t.stateNode=i,ne=t,At=null,e=!0):e=!1),e||fn(t)),null;case 13:return $m(e,t,i);case 4:return go(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=jn(t,null,n,i):ee(e,t,n,i),t.child;case 11:return lf(e,t,t.type,t.pendingProps,i);case 7:return ee(e,t,t.pendingProps,i),t.child;case 8:return ee(e,t,t.pendingProps.children,i),t.child;case 12:return ee(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,Vi(t,t.type,n.value),ee(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Pn(t),s=se(s),n=n(s),t.flags|=1,ee(e,t,n,i),t.child;case 14:return cf(e,t,t.type,t.pendingProps,i);case 15:return Xm(e,t,t.type,t.pendingProps,i);case 19:return Km(e,t,i);case 31:return _A(e,t,i);case 22:return Ym(e,t,i,t.pendingProps);case 24:return Pn(t),n=se(Bt),e===null?(s=ph(),s===null&&(s=bt,a=gh(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=i),s=a),t.memoizedState={parent:n,cache:s},bh(t),Vi(t,Bt,s)):(e.lanes&i&&(nu(e,t),ka(t,null,null,i),La()),s=e.memoizedState,a=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Vi(t,Bt,n)):(n=a.cache,Vi(t,Bt,n),n!==s.cache&&eu(t,[Bt],i,!0))),ee(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function vi(e){e.flags|=4}function rc(e,t,i,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Ab())e.flags|=8192;else throw On=xo,mh}else e.flags&=-16777217}function mf(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Gb(t))if(Ab())e.flags|=8192;else throw On=xo,mh}function jr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Sp():536870912,e.lanes|=t,Hs|=t)}function da(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function EA(e,t,i){var n=t.pendingProps;switch(fh(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ni(Bt),ks(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(es(t)?vi(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zl())),vt(t),null;case 26:var s=t.type,a=t.memoizedState;return e===null?(vi(t),a!==null?(vt(t),mf(t,a)):(vt(t),rc(t,s,null,n,i))):a?a!==e.memoizedState?(vi(t),vt(t),mf(t,a)):(vt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&vi(t),vt(t),rc(t,s,e,n,i)),null;case 27:if(po(t),i=tn.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&vi(t);else{if(!n){if(t.stateNode===null)throw Error(N(166));return vt(t),null}e=di.current,es(t)?Vd(t):(e=Hb(s,n,i),t.stateNode=e,vi(t))}return vt(t),null;case 5:if(po(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&vi(t);else{if(!n){if(t.stateNode===null)throw Error(N(166));return vt(t),null}if(a=di.current,es(t))Vd(t);else{var r=Po(tn.current);switch(a){case 1:a=r.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=r.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=r.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof n.is=="string"?r.createElement("select",{is:n.is}):r.createElement("select"),n.multiple?a.multiple=!0:n.size&&(a.size=n.size);break;default:a=typeof n.is=="string"?r.createElement(s,{is:n.is}):r.createElement(s)}}a[ie]=t,a[_e]=n;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)a.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=a;t:switch(ae(a,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&vi(t)}}return vt(t),rc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&vi(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(N(166));if(e=tn.current,es(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,s=ne,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[ie]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||Pb(e.nodeValue,i)),e||fn(t,!0)}else e=Po(e).createTextNode(n),e[ie]=t,t.stateNode=e}return vt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(n=es(t),i!==null){if(e===null){if(!n)throw Error(N(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(557));e[ie]=t}else zn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),e=!1}else i=Zl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Te(t),t):(Te(t),null);if(t.flags&128)throw Error(N(558))}return vt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=es(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(N(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[ie]=t}else zn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),s=!1}else s=Zl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Te(t),t):(Te(t),null)}return Te(t),t.flags&128?(t.lanes=i,t):(i=n!==null,e=e!==null&&e.memoizedState!==null,i&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==s&&(n.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),jr(t,t.updateQueue),vt(t),null);case 4:return ks(),e===null&&Hh(t.stateNode.containerInfo),vt(t),null;case 10:return Ni(t.type),vt(t),null;case 19:if(Jt(kt),n=t.memoizedState,n===null)return vt(t),null;if(s=(t.flags&128)!==0,a=n.rendering,a===null)if(s)da(n,!1);else{if(Rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=wo(e),a!==null){for(t.flags|=128,da(n,!1),e=a.updateQueue,t.updateQueue=e,jr(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Zp(i,e),i=i.sibling;return yt(kt,kt.current&1|2),lt&&Ei(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&Ne()>Do&&(t.flags|=128,s=!0,da(n,!1),t.lanes=4194304)}else{if(!s)if(e=wo(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,jr(t,e),da(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!lt)return vt(t),null}else 2*Ne()-n.renderingStartTime>Do&&i!==536870912&&(t.flags|=128,s=!0,da(n,!1),t.lanes=4194304);n.isBackwards?(a.sibling=t.child,t.child=a):(e=n.last,e!==null?e.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Ne(),e.sibling=null,i=kt.current,yt(kt,s?i&1|2:i&1),lt&&Ei(t,n.treeForkCount),e):(vt(t),null);case 22:case 23:return Te(t),yh(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?i&536870912&&!(t.flags&128)&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),i=t.updateQueue,i!==null&&jr(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&Jt(Nn),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ni(Bt),vt(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function CA(e,t){switch(fh(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ni(Bt),ks(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return po(t),null;case 31:if(t.memoizedState!==null){if(Te(t),t.alternate===null)throw Error(N(340));zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Te(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(kt),null;case 4:return ks(),null;case 10:return Ni(t.type),null;case 22:case 23:return Te(t),yh(),e!==null&&Jt(Nn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ni(Bt),null;case 25:return null;default:return null}}function Zm(e,t){switch(fh(t),t.tag){case 3:Ni(Bt),ks();break;case 26:case 27:case 5:po(t);break;case 4:ks();break;case 31:t.memoizedState!==null&&Te(t);break;case 13:Te(t);break;case 19:Jt(kt);break;case 10:Ni(t.type);break;case 22:case 23:Te(t),yh(),e!==null&&Jt(Nn);break;case 24:Ni(Bt)}}function gr(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var a=i.create,r=i.inst;n=a(),r.destroy=n}i=i.next}while(i!==s)}}catch(o){ft(t,t.return,o)}}function gn(e,t,i){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&e)===e){var r=n.inst,o=r.destroy;if(o!==void 0){r.destroy=void 0,s=t;var l=i,c=o;try{c()}catch(u){ft(s,l,u)}}}n=n.next}while(n!==a)}}catch(u){ft(t,t.return,u)}}function Qm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{om(t,i)}catch(n){ft(e,e.return,n)}}}function Jm(e,t,i){i.props=Fn(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){ft(e,t,n)}}function Pa(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(s){ft(e,t,s)}}function hi(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(s){ft(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){ft(e,t,s)}else i.current=null}function tb(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break t;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){ft(e,e.return,s)}}function oc(e,t,i){try{var n=e.stateNode;$A(n,e.type,i,t),n[_e]=t}catch(s){ft(e,e.return,s)}}function eb(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&An(e.type)||e.tag===4}function lc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||eb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&An(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Mi));else if(n!==4&&(n===27&&An(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(gu(e,t,i),e=e.sibling;e!==null;)gu(e,t,i),e=e.sibling}function Ro(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&An(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ro(e,t,i),e=e.sibling;e!==null;)Ro(e,t,i),e=e.sibling}function ib(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ae(t,n,i),t[ie]=e,t[_e]=i}catch(a){ft(e,e.return,a)}}var Ci=!1,Ht=!1,cc=!1,bf=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function TA(e,t){if(e=e.containerInfo,Su=Ho,e=Gp(e),lh(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break t}var r=0,o=-1,l=-1,c=0,u=0,h=e,d=null;e:for(;;){for(var f;h!==i||s!==0&&h.nodeType!==3||(o=r+s),h!==a||n!==0&&h.nodeType!==3||(l=r+n),h.nodeType===3&&(r+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===e)break e;if(d===i&&++c===s&&(o=r),d===a&&++u===n&&(l=r),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}i=o===-1||l===-1?null:{start:o,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(xu={focusedElem:e,selectionRange:i},Ho=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){switch(t=Zt,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,i=t,s=a.memoizedProps,a=a.memoizedState,n=i.stateNode;try{var g=Fn(i.type,s);e=n.getSnapshotBeforeUpdate(g,a),n.__reactInternalSnapshotBeforeUpdate=e}catch(p){ft(i,i.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)wu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(N(163))}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}}function nb(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:Si(e,i),n&4&&gr(5,i);break;case 1:if(Si(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(r){ft(i,i.return,r)}else{var s=Fn(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){ft(i,i.return,r)}}n&64&&Qm(i),n&512&&Pa(i,i.return);break;case 3:if(Si(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{om(e,t)}catch(r){ft(i,i.return,r)}}break;case 27:t===null&&n&4&&ib(i);case 26:case 5:Si(e,i),t===null&&n&4&&tb(i),n&512&&Pa(i,i.return);break;case 12:Si(e,i);break;case 31:Si(e,i),n&4&&rb(e,i);break;case 13:Si(e,i),n&4&&ob(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=PA.bind(null,i),iS(e,i))));break;case 22:if(n=i.memoizedState!==null||Ci,!n){t=t!==null&&t.memoizedState!==null||Ht,s=Ci;var a=Ht;Ci=n,(Ht=t)&&!a?xi(e,i,(i.subtreeFlags&8772)!==0):Si(e,i),Ci=s,Ht=a}break;case 30:break;default:Si(e,i)}}function sb(e){var t=e.alternate;t!==null&&(e.alternate=null,sb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ih(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,ve=!1;function Ai(e,t,i){for(i=i.child;i!==null;)ab(e,t,i),i=i.sibling}function ab(e,t,i){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(or,i)}catch{}switch(i.tag){case 26:Ht||hi(i,t),Ai(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ht||hi(i,t);var n=wt,s=ve;An(i.type)&&(wt=i.stateNode,ve=!1),Ai(e,t,i),Ha(i.stateNode),wt=n,ve=s;break;case 5:Ht||hi(i,t);case 6:if(n=wt,s=ve,wt=null,Ai(e,t,i),wt=n,ve=s,wt!==null)if(ve)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(i.stateNode)}catch(a){ft(i,t,a)}else try{wt.removeChild(i.stateNode)}catch(a){ft(i,t,a)}break;case 18:wt!==null&&(ve?(e=wt,Df(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Vs(e)):Df(wt,i.stateNode));break;case 4:n=wt,s=ve,wt=i.stateNode.containerInfo,ve=!0,Ai(e,t,i),wt=n,ve=s;break;case 0:case 11:case 14:case 15:gn(2,i,t),Ht||gn(4,i,t),Ai(e,t,i);break;case 1:Ht||(hi(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&Jm(i,t,n)),Ai(e,t,i);break;case 21:Ai(e,t,i);break;case 22:Ht=(n=Ht)||i.memoizedState!==null,Ai(e,t,i),Ht=n;break;default:Ai(e,t,i)}}function rb(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(i){ft(t,t.return,i)}}}function ob(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(i){ft(t,t.return,i)}}function MA(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new bf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new bf),t;default:throw Error(N(435,e.tag))}}function Ir(e,t){var i=MA(e);t.forEach(function(n){if(!i.has(n)){i.add(n);var s=jA.bind(null,e,n);n.then(s,s)}})}function pe(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n],a=e,r=t,o=r;t:for(;o!==null;){switch(o.tag){case 27:if(An(o.type)){wt=o.stateNode,ve=!1;break t}break;case 5:wt=o.stateNode,ve=!1;break t;case 3:case 4:wt=o.stateNode.containerInfo,ve=!0;break t}o=o.return}if(wt===null)throw Error(N(160));ab(a,r,s),wt=null,ve=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)lb(t,e),t=t.sibling}var ii=null;function lb(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pe(t,e),me(e),n&4&&(gn(3,e,e.return),gr(3,e),gn(5,e,e.return));break;case 1:pe(t,e),me(e),n&512&&(Ht||i===null||hi(i,i.return)),n&64&&Ci&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var s=ii;if(pe(t,e),me(e),n&512&&(Ht||i===null||hi(i,i.return)),n&4){var a=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){t:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;e:switch(n){case"title":a=s.getElementsByTagName("title")[0],(!a||a[ur]||a[ie]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(n),s.head.insertBefore(a,s.querySelector("head > title"))),ae(a,n,i),a[ie]=e,Qt(a),n=a;break t;case"link":var r=jf("link","href",s).get(n+(i.href||""));if(r){for(var o=0;o<r.length;o++)if(a=r[o],a.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&a.getAttribute("rel")===(i.rel==null?null:i.rel)&&a.getAttribute("title")===(i.title==null?null:i.title)&&a.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){r.splice(o,1);break e}}a=s.createElement(n),ae(a,n,i),s.head.appendChild(a);break;case"meta":if(r=jf("meta","content",s).get(n+(i.content||""))){for(o=0;o<r.length;o++)if(a=r[o],a.getAttribute("content")===(i.content==null?null:""+i.content)&&a.getAttribute("name")===(i.name==null?null:i.name)&&a.getAttribute("property")===(i.property==null?null:i.property)&&a.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&a.getAttribute("charset")===(i.charSet==null?null:i.charSet)){r.splice(o,1);break e}}a=s.createElement(n),ae(a,n,i),s.head.appendChild(a);break;default:throw Error(N(468,n))}a[ie]=e,Qt(a),n=a}e.stateNode=n}else If(s,e.type,e.stateNode);else e.stateNode=Pf(s,n,e.memoizedProps);else a!==n?(a===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):a.count--,n===null?If(s,e.type,e.stateNode):Pf(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&oc(e,e.memoizedProps,i.memoizedProps)}break;case 27:pe(t,e),me(e),n&512&&(Ht||i===null||hi(i,i.return)),i!==null&&n&4&&oc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(pe(t,e),me(e),n&512&&(Ht||i===null||hi(i,i.return)),e.flags&32){s=e.stateNode;try{Ps(s,"")}catch(g){ft(e,e.return,g)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,oc(e,s,i!==null?i.memoizedProps:s)),n&1024&&(cc=!0);break;case 6:if(pe(t,e),me(e),n&4){if(e.stateNode===null)throw Error(N(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(g){ft(e,e.return,g)}}break;case 3:if(ro=null,s=ii,ii=jo(t.containerInfo),pe(t,e),ii=s,me(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(g){ft(e,e.return,g)}cc&&(cc=!1,cb(e));break;case 4:n=ii,ii=jo(e.stateNode.containerInfo),pe(t,e),me(e),ii=n;break;case 12:pe(t,e),me(e);break;case 31:pe(t,e),me(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ir(e,n)));break;case 13:pe(t,e),me(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ul=Ne()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ir(e,n)));break;case 22:s=e.memoizedState!==null;var l=i!==null&&i.memoizedState!==null,c=Ci,u=Ht;if(Ci=c||s,Ht=u||l,pe(t,e),Ht=u,Ci=c,me(e),n&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||l||Ci||Ht||Tn(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){l=i=t;try{if(a=l.stateNode,s)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=l.stateNode;var h=l.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(g){ft(l,l.return,g)}}}else if(t.tag===6){if(i===null){l=t;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(g){ft(l,l.return,g)}}}else if(t.tag===18){if(i===null){l=t;try{var f=l.stateNode;s?Nf(f,!0):Nf(l.stateNode,!1)}catch(g){ft(l,l.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,Ir(e,i))));break;case 19:pe(t,e),me(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ir(e,n)));break;case 30:break;case 21:break;default:pe(t,e),me(e)}}function me(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(eb(n)){i=n;break}n=n.return}if(i==null)throw Error(N(160));switch(i.tag){case 27:var s=i.stateNode,a=lc(e);Ro(e,a,s);break;case 5:var r=i.stateNode;i.flags&32&&(Ps(r,""),i.flags&=-33);var o=lc(e);Ro(e,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,c=lc(e);gu(e,c,l);break;default:throw Error(N(161))}}catch(u){ft(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cb(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;cb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Si(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)nb(e,t.alternate,t),t=t.sibling}function Tn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gn(4,t,t.return),Tn(t);break;case 1:hi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Jm(t,t.return,i),Tn(t);break;case 27:Ha(t.stateNode);case 26:case 5:hi(t,t.return),Tn(t);break;case 22:t.memoizedState===null&&Tn(t);break;case 30:Tn(t);break;default:Tn(t)}e=e.sibling}}function xi(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:xi(s,a,i),gr(4,a);break;case 1:if(xi(s,a,i),n=a,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){ft(n,n.return,c)}if(n=a,s=n.updateQueue,s!==null){var o=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)rm(l[s],o)}catch(c){ft(n,n.return,c)}}i&&r&64&&Qm(a),Pa(a,a.return);break;case 27:ib(a);case 26:case 5:xi(s,a,i),i&&n===null&&r&4&&tb(a),Pa(a,a.return);break;case 12:xi(s,a,i);break;case 31:xi(s,a,i),i&&r&4&&rb(s,a);break;case 13:xi(s,a,i),i&&r&4&&ob(s,a);break;case 22:a.memoizedState===null&&xi(s,a,i),Pa(a,a.return);break;case 30:break;default:xi(s,a,i)}t=t.sibling}}function kh(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&dr(i))}function zh(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dr(e))}function ti(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ub(e,t,i,n),t=t.sibling}function ub(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ti(e,t,i,n),s&2048&&gr(9,t);break;case 1:ti(e,t,i,n);break;case 3:ti(e,t,i,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dr(e)));break;case 12:if(s&2048){ti(e,t,i,n),e=t.stateNode;try{var a=t.memoizedProps,r=a.id,o=a.onPostCommit;typeof o=="function"&&o(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ft(t,t.return,l)}}else ti(e,t,i,n);break;case 31:ti(e,t,i,n);break;case 13:ti(e,t,i,n);break;case 23:break;case 22:a=t.stateNode,r=t.alternate,t.memoizedState!==null?a._visibility&2?ti(e,t,i,n):ja(e,t):a._visibility&2?ti(e,t,i,n):(a._visibility|=2,ls(e,t,i,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&kh(r,t);break;case 24:ti(e,t,i,n),s&2048&&zh(t.alternate,t);break;default:ti(e,t,i,n)}}function ls(e,t,i,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,r=t,o=i,l=n,c=r.flags;switch(r.tag){case 0:case 11:case 15:ls(a,r,o,l,s),gr(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?ls(a,r,o,l,s):ja(a,r):(u._visibility|=2,ls(a,r,o,l,s)),s&&c&2048&&kh(r.alternate,r);break;case 24:ls(a,r,o,l,s),s&&c&2048&&zh(r.alternate,r);break;default:ls(a,r,o,l,s)}t=t.sibling}}function ja(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:ja(i,n),s&2048&&kh(n.alternate,n);break;case 24:ja(i,n),s&2048&&zh(n.alternate,n);break;default:ja(i,n)}t=t.sibling}}var wa=8192;function is(e,t,i){if(e.subtreeFlags&wa)for(e=e.child;e!==null;)hb(e,t,i),e=e.sibling}function hb(e,t,i){switch(e.tag){case 26:is(e,t,i),e.flags&wa&&e.memoizedState!==null&&gS(i,ii,e.memoizedState,e.memoizedProps);break;case 5:is(e,t,i);break;case 3:case 4:var n=ii;ii=jo(e.stateNode.containerInfo),is(e,t,i),ii=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=wa,wa=16777216,is(e,t,i),wa=n):is(e,t,i));break;default:is(e,t,i)}}function db(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function fa(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Zt=n,gb(n,e)}db(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)fb(e),e=e.sibling}function fb(e){switch(e.tag){case 0:case 11:case 15:fa(e),e.flags&2048&&gn(9,e,e.return);break;case 3:fa(e);break;case 12:fa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,so(e)):fa(e);break;default:fa(e)}}function so(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];Zt=n,gb(n,e)}db(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:gn(8,t,t.return),so(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,so(t));break;default:so(t)}e=e.sibling}}function gb(e,t){for(;Zt!==null;){var i=Zt;switch(i.tag){case 0:case 11:case 15:gn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:dr(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,Zt=n;else t:for(i=e;Zt!==null;){n=Zt;var s=n.sibling,a=n.return;if(sb(n),n===i){Zt=null;break t}if(s!==null){s.return=a,Zt=s;break t}Zt=a}}}var RA={getCacheForType:function(e){var t=se(Bt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return se(Bt).controller.signal}},DA=typeof WeakMap=="function"?WeakMap:Map,ct=0,bt=null,nt=null,rt=0,dt=0,Ce=null,Zi=!1,Js=!1,Ph=!1,ji=0,Rt=0,pn=0,Ln=0,jh=0,De=0,Hs=0,Ia=null,Ae=null,pu=!1,ul=0,pb=0,Do=1/0,No=null,an=null,Xt=0,rn=null,Bs=null,Oi=0,mu=0,bu=null,mb=null,Fa=0,yu=null;function ke(){return ct&2&&rt!==0?rt&-rt:X.T!==null?Fh():Ep()}function bb(){if(De===0)if(!(rt&536870912)||lt){var e=Dr;Dr<<=1,!(Dr&3932160)&&(Dr=262144),De=e}else De=536870912;return e=je.current,e!==null&&(e.flags|=32),De}function xe(e,t,i){(e===bt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(Us(e,0),Qi(e,rt,De,!1)),cr(e,i),(!(ct&2)||e!==bt)&&(e===bt&&(!(ct&2)&&(Ln|=i),Rt===4&&Qi(e,rt,De,!1)),mi(e))}function yb(e,t,i){if(ct&6)throw Error(N(327));var n=!i&&(t&127)===0&&(t&e.expiredLanes)===0||lr(e,t),s=n?LA(e,t):uc(e,t,!0),a=n;do{if(s===0){Js&&!n&&Qi(e,t,0,!1);break}else{if(i=e.current.alternate,a&&!NA(i)){s=uc(e,t,!1),a=!1;continue}if(s===2){if(a=t,e.errorRecoveryDisabledLanes&a)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var o=e;s=Ia;var l=o.current.memoizedState.isDehydrated;if(l&&(Us(o,r).flags|=256),r=uc(o,r,!1),r!==2){if(Ph&&!l){o.errorRecoveryDisabledLanes|=a,Ln|=a,s=4;break t}a=Ae,Ae=s,a!==null&&(Ae===null?Ae=a:Ae.push.apply(Ae,a))}s=r}if(a=!1,s!==2)continue}}if(s===1){Us(e,0),Qi(e,t,0,!0);break}t:{switch(n=e,a=s,a){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:Qi(n,t,De,!Zi);break t;case 2:Ae=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(s=ul+300-Ne(),10<s)){if(Qi(n,t,De,!Zi),Jo(n,0,!0)!==0)break t;Oi=t,n.timeoutHandle=Ib(yf.bind(null,n,i,Ae,No,pu,t,De,Ln,Hs,Zi,a,"Throttled",-0,0),s);break t}yf(n,i,Ae,No,pu,t,De,Ln,Hs,Zi,a,null,-0,0)}}break}while(!0);mi(e)}function yf(e,t,i,n,s,a,r,o,l,c,u,h,d,f){if(e.timeoutHandle=-1,h=t.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mi},hb(t,a,h);var g=(a&62914560)===a?ul-Ne():(a&4194048)===a?pb-Ne():0;if(g=pS(h,g),g!==null){Oi=a,e.cancelPendingCommit=g(Af.bind(null,e,t,a,i,n,s,r,o,l,u,h,null,d,f)),Qi(e,a,r,!c);return}}Af(e,t,a,i,n,s,r,o,l)}function NA(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var s=i[n],a=s.getSnapshot;s=s.value;try{if(!Pe(a(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qi(e,t,i,n){t&=~jh,t&=~Ln,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var a=31-Le(s),r=1<<a;n[a]=-1,s&=~r}i!==0&&xp(e,i,t)}function hl(){return ct&6?!0:(pr(0),!1)}function Ih(){if(nt!==null){if(dt===0)var e=nt.return;else e=nt,Ri=Yn=null,_h(e),Rs=null,Wa=0,e=nt;for(;e!==null;)Zm(e.alternate,e),e=e.return;nt=null}}function Us(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,ZA(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Oi=0,Ih(),bt=e,nt=i=Di(e.current,null),rt=t,dt=0,Ce=null,Zi=!1,Js=lr(e,t),Ph=!1,Hs=De=jh=Ln=pn=Rt=0,Ae=Ia=null,pu=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-Le(n),a=1<<s;t|=e[s],n&=~a}return ji=t,nl(),i}function vb(e,t){W=null,X.H=Qa,t===Qs||t===al?(t=Kd(),dt=3):t===mh?(t=Kd(),dt=4):dt=t===Oh?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ce=t,nt===null&&(Rt=1,To(e,Xe(t,e.current)))}function Ab(){var e=je.current;return e===null?!0:(rt&4194048)===rt?Ke===null:(rt&62914560)===rt||rt&536870912?e===Ke:!1}function Sb(){var e=X.H;return X.H=Qa,e===null?Qa:e}function xb(){var e=X.A;return X.A=RA,e}function Oo(){Rt=4,Zi||(rt&4194048)!==rt&&je.current!==null||(Js=!0),!(pn&134217727)&&!(Ln&134217727)||bt===null||Qi(bt,rt,De,!1)}function uc(e,t,i){var n=ct;ct|=2;var s=Sb(),a=xb();(bt!==e||rt!==t)&&(No=null,Us(e,t)),t=!1;var r=Rt;t:do try{if(dt!==0&&nt!==null){var o=nt,l=Ce;switch(dt){case 8:Ih(),r=6;break t;case 3:case 2:case 9:case 6:je.current===null&&(t=!0);var c=dt;if(dt=0,Ce=null,_s(e,o,l,c),i&&Js){r=0;break t}break;default:c=dt,dt=0,Ce=null,_s(e,o,l,c)}}OA(),r=Rt;break}catch(u){vb(e,u)}while(!0);return t&&e.shellSuspendCounter++,Ri=Yn=null,ct=n,X.H=s,X.A=a,nt===null&&(bt=null,rt=0,nl()),r}function OA(){for(;nt!==null;)_b(nt)}function LA(e,t){var i=ct;ct|=2;var n=Sb(),s=xb();bt!==e||rt!==t?(No=null,Do=Ne()+500,Us(e,t)):Js=lr(e,t);t:do try{if(dt!==0&&nt!==null){t=nt;var a=Ce;e:switch(dt){case 1:dt=0,Ce=null,_s(e,t,a,1);break;case 2:case 9:if($d(a)){dt=0,Ce=null,vf(t);break}t=function(){dt!==2&&dt!==9||bt!==e||(dt=7),mi(e)},a.then(t,t);break t;case 3:dt=7;break t;case 4:dt=5;break t;case 7:$d(a)?(dt=0,Ce=null,vf(t)):(dt=0,Ce=null,_s(e,t,a,7));break;case 5:var r=null;switch(nt.tag){case 26:r=nt.memoizedState;case 5:case 27:var o=nt;if(r?Gb(r):o.stateNode.complete){dt=0,Ce=null;var l=o.sibling;if(l!==null)nt=l;else{var c=o.return;c!==null?(nt=c,dl(c)):nt=null}break e}}dt=0,Ce=null,_s(e,t,a,5);break;case 6:dt=0,Ce=null,_s(e,t,a,6);break;case 8:Ih(),Rt=6;break t;default:throw Error(N(462))}}kA();break}catch(u){vb(e,u)}while(!0);return Ri=Yn=null,X.H=n,X.A=s,ct=i,nt!==null?0:(bt=null,rt=0,nl(),Rt)}function kA(){for(;nt!==null&&!nv();)_b(nt)}function _b(e){var t=Wm(e.alternate,e,ji);e.memoizedProps=e.pendingProps,t===null?dl(e):nt=t}function vf(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=df(i,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=df(i,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:_h(t);default:Zm(i,t),t=nt=Zp(t,ji),t=Wm(i,t,ji)}e.memoizedProps=e.pendingProps,t===null?dl(e):nt=t}function _s(e,t,i,n){Ri=Yn=null,_h(t),Rs=null,Wa=0;var s=t.return;try{if(xA(e,s,t,i,rt)){Rt=1,To(e,Xe(i,e.current)),nt=null;return}}catch(a){if(s!==null)throw nt=s,a;Rt=1,To(e,Xe(i,e.current)),nt=null;return}t.flags&32768?(lt||n===1?e=!0:Js||rt&536870912?e=!1:(Zi=e=!0,(n===2||n===9||n===3||n===6)&&(n=je.current,n!==null&&n.tag===13&&(n.flags|=16384))),wb(t,e)):dl(t)}function dl(e){var t=e;do{if(t.flags&32768){wb(t,Zi);return}e=t.return;var i=EA(t.alternate,t,ji);if(i!==null){nt=i;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);Rt===0&&(Rt=5)}function wb(e,t){do{var i=CA(e.alternate,e);if(i!==null){i.flags&=32767,nt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=i}while(e!==null);Rt=6,nt=null}function Af(e,t,i,n,s,a,r,o,l){e.cancelPendingCommit=null;do fl();while(Xt!==0);if(ct&6)throw Error(N(327));if(t!==null){if(t===e.current)throw Error(N(177));if(a=t.lanes|t.childLanes,a|=ch,fv(e,i,a,r,o,l),e===bt&&(nt=bt=null,rt=0),Bs=t,rn=e,Oi=i,mu=a,bu=s,mb=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,IA(mo,function(){return Rb(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=X.T,X.T=null,s=ut.p,ut.p=2,r=ct,ct|=4;try{TA(e,t,i)}finally{ct=r,ut.p=s,X.T=n}}Xt=1,Eb(),Cb(),Tb()}}function Eb(){if(Xt===1){Xt=0;var e=rn,t=Bs,i=(t.flags&13878)!==0;if(t.subtreeFlags&13878||i){i=X.T,X.T=null;var n=ut.p;ut.p=2;var s=ct;ct|=4;try{lb(t,e);var a=xu,r=Gp(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&Up(o.ownerDocument.documentElement,o)){if(l!==null&&lh(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),g=o.textContent.length,p=Math.min(l.start,g),v=l.end===void 0?p:Math.min(l.end,g);!f.extend&&p>v&&(r=v,v=p,p=r);var m=Bd(o,p),b=Bd(o,v);if(m&&b&&(f.rangeCount!==1||f.anchorNode!==m.node||f.anchorOffset!==m.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var y=h.createRange();y.setStart(m.node,m.offset),f.removeAllRanges(),p>v?(f.addRange(y),f.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),f.addRange(y))}}}}for(h=[],f=o;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var A=h[o];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}Ho=!!Su,xu=Su=null}finally{ct=s,ut.p=n,X.T=i}}e.current=t,Xt=2}}function Cb(){if(Xt===2){Xt=0;var e=rn,t=Bs,i=(t.flags&8772)!==0;if(t.subtreeFlags&8772||i){i=X.T,X.T=null;var n=ut.p;ut.p=2;var s=ct;ct|=4;try{nb(e,t.alternate,t)}finally{ct=s,ut.p=n,X.T=i}}Xt=3}}function Tb(){if(Xt===4||Xt===3){Xt=0,sv();var e=rn,t=Bs,i=Oi,n=mb;t.subtreeFlags&10256||t.flags&10256?Xt=5:(Xt=0,Bs=rn=null,Mb(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(an=null),eh(i),t=t.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(or,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=X.T,s=ut.p,ut.p=2,X.T=null;try{for(var a=e.onRecoverableError,r=0;r<n.length;r++){var o=n[r];a(o.value,{componentStack:o.stack})}}finally{X.T=t,ut.p=s}}Oi&3&&fl(),mi(e),s=e.pendingLanes,i&261930&&s&42?e===yu?Fa++:(Fa=0,yu=e):Fa=0,pr(0)}}function Mb(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,dr(t)))}function fl(){return Eb(),Cb(),Tb(),Rb()}function Rb(){if(Xt!==5)return!1;var e=rn,t=mu;mu=0;var i=eh(Oi),n=X.T,s=ut.p;try{ut.p=32>i?32:i,X.T=null,i=bu,bu=null;var a=rn,r=Oi;if(Xt=0,Bs=rn=null,Oi=0,ct&6)throw Error(N(331));var o=ct;if(ct|=4,fb(a.current),ub(a,a.current,r,i),ct=o,pr(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(or,a)}catch{}return!0}finally{ut.p=s,X.T=n,Mb(e,t)}}function Sf(e,t,i){t=Xe(i,t),t=hu(e.stateNode,t,2),e=sn(e,t,2),e!==null&&(cr(e,2),mi(e))}function ft(e,t,i){if(e.tag===3)Sf(e,e,i);else for(;t!==null;){if(t.tag===3){Sf(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(an===null||!an.has(n))){e=Xe(i,e),i=Vm(2),n=sn(t,i,2),n!==null&&(qm(i,n,t,e),cr(n,2),mi(n));break}}t=t.return}}function hc(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new DA;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(i)||(Ph=!0,s.add(i),e=zA.bind(null,e,t,i),t.then(e,e))}function zA(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,bt===e&&(rt&i)===i&&(Rt===4||Rt===3&&(rt&62914560)===rt&&300>Ne()-ul?!(ct&2)&&Us(e,0):jh|=i,Hs===rt&&(Hs=0)),mi(e)}function Db(e,t){t===0&&(t=Sp()),e=Xn(e,t),e!==null&&(cr(e,t),mi(e))}function PA(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Db(e,i)}function jA(e,t){var i=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(N(314))}n!==null&&n.delete(t),Db(e,i)}function IA(e,t){return Ju(e,t)}var Lo=null,cs=null,vu=!1,ko=!1,dc=!1,Ji=0;function mi(e){e!==cs&&e.next===null&&(cs===null?Lo=cs=e:cs=cs.next=e),ko=!0,vu||(vu=!0,HA())}function pr(e,t){if(!dc&&ko){dc=!0;do for(var i=!1,n=Lo;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var a=0;else{var r=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-Le(42|e)+1)-1,a&=s&~(r&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(i=!0,xf(n,a))}else a=rt,a=Jo(n,n===bt?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(a&3)||lr(n,a)||(i=!0,xf(n,a));n=n.next}while(i);dc=!1}}function FA(){Nb()}function Nb(){ko=vu=!1;var e=0;Ji!==0&&WA()&&(e=Ji);for(var t=Ne(),i=null,n=Lo;n!==null;){var s=n.next,a=Ob(n,t);a===0?(n.next=null,i===null?Lo=s:i.next=s,s===null&&(cs=i)):(i=n,(e!==0||a&3)&&(ko=!0)),n=s}Xt!==0&&Xt!==5||pr(e),Ji!==0&&(Ji=0)}function Ob(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var r=31-Le(a),o=1<<r,l=s[r];l===-1?(!(o&i)||o&n)&&(s[r]=dv(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(t=bt,i=rt,i=Jo(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Hl(n),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||lr(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&Hl(n),eh(i)){case 2:case 8:i=vp;break;case 32:i=mo;break;case 268435456:i=Ap;break;default:i=mo}return n=Lb.bind(null,e),i=Ju(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&Hl(n),e.callbackPriority=2,e.callbackNode=null,2}function Lb(e,t){if(Xt!==0&&Xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(fl()&&e.callbackNode!==i)return null;var n=rt;return n=Jo(e,e===bt?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(yb(e,n,t),Ob(e,Ne()),e.callbackNode!=null&&e.callbackNode===i?Lb.bind(null,e):null)}function xf(e,t){if(fl())return null;yb(e,t,!0)}function HA(){QA(function(){ct&6?Ju(yp,FA):Nb()})}function Fh(){if(Ji===0){var e=js;e===0&&(e=Rr,Rr<<=1,!(Rr&261888)&&(Rr=256)),Ji=e}return Ji}function _f(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Kr(""+e)}function wf(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function BA(e,t,i,n,s){if(t==="submit"&&i&&i.stateNode===s){var a=_f((s[_e]||null).action),r=n.submitter;r&&(t=(t=r[_e]||null)?_f(t.formAction):r.getAttribute("formAction"),t!==null&&(a=t,r=null));var o=new tl("action","action",null,n,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ji!==0){var l=r?wf(s,r):new FormData(s);cu(i,{pending:!0,data:l,method:s.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=r?wf(s,r):new FormData(s),cu(i,{pending:!0,data:l,method:s.method,action:a},a,l))},currentTarget:s}]})}}for(var fc=0;fc<Zc.length;fc++){var gc=Zc[fc],UA=gc.toLowerCase(),GA=gc[0].toUpperCase()+gc.slice(1);ai(UA,"on"+GA)}ai(qp,"onAnimationEnd");ai(Xp,"onAnimationIteration");ai(Yp,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(aA,"onTransitionRun");ai(rA,"onTransitionStart");ai(oA,"onTransitionCancel");ai($p,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ja));function kb(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;t:{var a=void 0;if(t)for(var r=n.length-1;0<=r;r--){var o=n[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break t;a=o,s.currentTarget=c;try{a(s)}catch(u){yo(u)}s.currentTarget=null,a=l}else for(r=0;r<n.length;r++){if(o=n[r],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break t;a=o,s.currentTarget=c;try{a(s)}catch(u){yo(u)}s.currentTarget=null,a=l}}}}function it(e,t){var i=t[Gc];i===void 0&&(i=t[Gc]=new Set);var n=e+"__bubble";i.has(n)||(zb(t,e,2,!1),i.add(n))}function pc(e,t,i){var n=0;t&&(n|=4),zb(i,e,n,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Hh(e){if(!e[Fr]){e[Fr]=!0,Cp.forEach(function(i){i!=="selectionchange"&&(VA.has(i)||pc(i,!1,e),pc(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fr]||(t[Fr]=!0,pc("selectionchange",!1,t))}}function zb(e,t,i,n){switch($b(t)){case 2:var s=yS;break;case 8:s=vS;break;default:s=Vh}i=s.bind(null,t,i,e),s=void 0,!$c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function mc(e,t,i,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var o=n.stateNode.containerInfo;if(o===s)break;if(r===4)for(r=n.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;o!==null;){if(r=gs(o),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){n=a=r;continue t}o=o.parentNode}}n=n.return}kp(function(){var c=a,u=sh(i),h=[];t:{var d=Kp.get(e);if(d!==void 0){var f=tl,g=e;switch(e){case"keypress":if(Zr(i)===0)break t;case"keydown":case"keyup":f=jv;break;case"focusin":g="focus",f=ql;break;case"focusout":g="blur",f=ql;break;case"beforeblur":case"afterblur":f=ql;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Ev;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Hv;break;case qp:case Xp:case Yp:f=Mv;break;case $p:f=Uv;break;case"scroll":case"scrollend":f=_v;break;case"wheel":f=Vv;break;case"copy":case"cut":case"paste":f=Dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ld;break;case"toggle":case"beforetoggle":f=Xv}var p=(t&4)!==0,v=!p&&(e==="scroll"||e==="scrollend"),m=p?d!==null?d+"Capture":null:d;p=[];for(var b=c,y;b!==null;){var A=b;if(y=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||y===null||m===null||(A=qa(b,m),A!=null&&p.push(tr(b,A,y))),v)break;b=b.return}0<p.length&&(d=new f(d,g,null,i,u),h.push({event:d,listeners:p}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&i!==Yc&&(g=i.relatedTarget||i.fromElement)&&(gs(g)||g[Ks]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=i.relatedTarget||i.toElement,f=c,g=g?gs(g):null,g!==null&&(v=rr(g),p=g.tag,g!==v||p!==5&&p!==27&&p!==6)&&(g=null)):(f=null,g=c),f!==g)){if(p=Nd,A="onMouseLeave",m="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=Ld,A="onPointerLeave",m="onPointerEnter",b="pointer"),v=f==null?d:xa(f),y=g==null?d:xa(g),d=new p(A,b+"leave",f,i,u),d.target=v,d.relatedTarget=y,A=null,gs(u)===c&&(p=new p(m,b+"enter",g,i,u),p.target=y,p.relatedTarget=v,A=p),v=A,f&&g)e:{for(p=qA,m=f,b=g,y=0,A=m;A;A=p(A))y++;A=0;for(var x=b;x;x=p(x))A++;for(;0<y-A;)m=p(m),y--;for(;0<A-y;)b=p(b),A--;for(;y--;){if(m===b||b!==null&&m===b.alternate){p=m;break e}m=p(m),b=p(b)}p=null}else p=null;f!==null&&Ef(h,d,f,p,!1),g!==null&&v!==null&&Ef(h,v,g,p,!0)}}t:{if(d=c?xa(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=jd;else if(Pd(d))if(Hp)E=iA;else{E=tA;var w=Jv}else f=d.nodeName,!f||f.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&nh(c.elementType)&&(E=jd):E=eA;if(E&&(E=E(e,c))){Fp(h,E,i,u);break t}w&&w(e,d,c),e==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Xc(d,"number",d.value)}switch(w=c?xa(c):window,e){case"focusin":(Pd(w)||w.contentEditable==="true")&&(bs=w,Kc=c,Da=null);break;case"focusout":Da=Kc=bs=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,Ud(h,i,u);break;case"selectionchange":if(sA)break;case"keydown":case"keyup":Ud(h,i,u)}var T;if(oh)t:{switch(e){case"compositionstart":var M="onCompositionStart";break t;case"compositionend":M="onCompositionEnd";break t;case"compositionupdate":M="onCompositionUpdate";break t}M=void 0}else ms?jp(e,i)&&(M="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(M="onCompositionStart");M&&(Pp&&i.locale!=="ko"&&(ms||M!=="onCompositionStart"?M==="onCompositionEnd"&&ms&&(T=zp()):(Wi=u,ah="value"in Wi?Wi.value:Wi.textContent,ms=!0)),w=zo(c,M),0<w.length&&(M=new Od(M,e,null,i,u),h.push({event:M,listeners:w}),T?M.data=T:(T=Ip(i),T!==null&&(M.data=T)))),(T=$v?Kv(e,i):Wv(e,i))&&(M=zo(c,"onBeforeInput"),0<M.length&&(w=new Od("onBeforeInput","beforeinput",null,i,u),h.push({event:w,listeners:M}),w.data=T)),BA(h,e,c,i,u)}kb(h,t)})}function tr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function zo(e,t){for(var i=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=qa(e,i),s!=null&&n.unshift(tr(e,s,a)),s=qa(e,t),s!=null&&n.push(tr(e,s,a))),e.tag===3)return n;e=e.return}return[]}function qA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ef(e,t,i,n,s){for(var a=t._reactName,r=[];i!==null&&i!==n;){var o=i,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===n)break;o!==5&&o!==26&&o!==27||c===null||(l=c,s?(c=qa(i,a),c!=null&&r.unshift(tr(i,c,l))):s||(c=qa(i,a),c!=null&&r.push(tr(i,c,l)))),i=i.return}r.length!==0&&e.push({event:t,listeners:r})}var XA=/\r\n?/g,YA=/\u0000|\uFFFD/g;function Cf(e){return(typeof e=="string"?e:""+e).replace(XA,`
`).replace(YA,"")}function Pb(e,t){return t=Cf(t),Cf(e)===t}function gt(e,t,i,n,s,a){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Ps(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Ps(e,""+n);break;case"className":Or(e,"class",n);break;case"tabIndex":Or(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(e,i,n);break;case"style":Lp(e,n,a);break;case"data":if(t!=="object"){Or(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Kr(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(i==="formAction"?(t!=="input"&&gt(e,t,"name",s.name,s,null),gt(e,t,"formEncType",s.formEncType,s,null),gt(e,t,"formMethod",s.formMethod,s,null),gt(e,t,"formTarget",s.formTarget,s,null)):(gt(e,t,"encType",s.encType,s,null),gt(e,t,"method",s.method,s,null),gt(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Kr(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=Mi);break;case"onScroll":n!=null&&it("scroll",e);break;case"onScrollEnd":n!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(N(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(N(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=Kr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":it("beforetoggle",e),it("toggle",e),$r(e,"popover",n);break;case"xlinkActuate":yi(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":yi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":yi(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":yi(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":yi(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":yi(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":yi(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":yi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":yi(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":$r(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Sv.get(i)||i,$r(e,i,n))}}function Au(e,t,i,n,s,a){switch(i){case"style":Lp(e,n,a);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(N(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(N(60));e.innerHTML=i}}break;case"children":typeof n=="string"?Ps(e,n):(typeof n=="number"||typeof n=="bigint")&&Ps(e,""+n);break;case"onScroll":n!=null&&it("scroll",e);break;case"onScrollEnd":n!=null&&it("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tp.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),a=e[_e]||null,a=a!=null?a[i]:null,typeof a=="function"&&e.removeEventListener(t,a,s),typeof n=="function")){typeof a!="function"&&a!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s);break t}i in e?e[i]=n:n===!0?e.setAttribute(i,""):$r(e,i,n)}}}function ae(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var n=!1,s=!1,a;for(a in i)if(i.hasOwnProperty(a)){var r=i[a];if(r!=null)switch(a){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:gt(e,t,a,r,i,null)}}s&&gt(e,t,"srcSet",i.srcSet,i,null),n&&gt(e,t,"src",i.src,i,null);return;case"input":it("invalid",e);var o=a=r=s=null,l=null,c=null;for(n in i)if(i.hasOwnProperty(n)){var u=i[n];if(u!=null)switch(n){case"name":s=u;break;case"type":r=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(N(137,t));break;default:gt(e,t,n,u,i,null)}}Dp(e,a,o,l,c,r,s,!1);return;case"select":it("invalid",e),n=r=a=null;for(s in i)if(i.hasOwnProperty(s)&&(o=i[s],o!=null))switch(s){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":n=o;default:gt(e,t,s,o,i,null)}t=a,i=r,e.multiple=!!n,t!=null?Cs(e,!!n,t,!1):i!=null&&Cs(e,!!n,i,!0);return;case"textarea":it("invalid",e),a=s=n=null;for(r in i)if(i.hasOwnProperty(r)&&(o=i[r],o!=null))switch(r){case"value":n=o;break;case"defaultValue":s=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(N(91));break;default:gt(e,t,r,o,i,null)}Op(e,n,s,a);return;case"option":for(l in i)if(i.hasOwnProperty(l)&&(n=i[l],n!=null))switch(l){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:gt(e,t,l,n,i,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(n=0;n<Ja.length;n++)it(Ja[n],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&(n=i[c],n!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:gt(e,t,c,n,i,null)}return;default:if(nh(t)){for(u in i)i.hasOwnProperty(u)&&(n=i[u],n!==void 0&&Au(e,t,u,n,i,void 0));return}}for(o in i)i.hasOwnProperty(o)&&(n=i[o],n!=null&&gt(e,t,o,n,i,null))}function $A(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,r=null,o=null,l=null,c=null,u=null;for(f in i){var h=i[f];if(i.hasOwnProperty(f)&&h!=null)switch(f){case"checked":break;case"value":break;case"defaultValue":l=h;default:n.hasOwnProperty(f)||gt(e,t,f,null,n,h)}}for(var d in n){var f=n[d];if(h=i[d],n.hasOwnProperty(d)&&(f!=null||h!=null))switch(d){case"type":a=f;break;case"name":s=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":r=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(N(137,t));break;default:f!==h&&gt(e,t,d,f,n,h)}}qc(e,r,o,l,c,u,a,s);return;case"select":f=r=o=d=null;for(a in i)if(l=i[a],i.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":f=l;default:n.hasOwnProperty(a)||gt(e,t,a,null,n,l)}for(s in n)if(a=n[s],l=i[s],n.hasOwnProperty(s)&&(a!=null||l!=null))switch(s){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:a!==l&&gt(e,t,s,a,n,l)}t=o,i=r,n=f,d!=null?Cs(e,!!i,d,!1):!!n!=!!i&&(t!=null?Cs(e,!!i,t,!0):Cs(e,!!i,i?[]:"",!1));return;case"textarea":f=d=null;for(o in i)if(s=i[o],i.hasOwnProperty(o)&&s!=null&&!n.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:gt(e,t,o,null,n,s)}for(r in n)if(s=n[r],a=i[r],n.hasOwnProperty(r)&&(s!=null||a!=null))switch(r){case"value":d=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(N(91));break;default:s!==a&&gt(e,t,r,s,n,a)}Np(e,d,f);return;case"option":for(var g in i)if(d=i[g],i.hasOwnProperty(g)&&d!=null&&!n.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:gt(e,t,g,null,n,d)}for(l in n)if(d=n[l],f=i[l],n.hasOwnProperty(l)&&d!==f&&(d!=null||f!=null))switch(l){case"selected":e.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:gt(e,t,l,d,n,f)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in i)d=i[p],i.hasOwnProperty(p)&&d!=null&&!n.hasOwnProperty(p)&&gt(e,t,p,null,n,d);for(c in n)if(d=n[c],f=i[c],n.hasOwnProperty(c)&&d!==f&&(d!=null||f!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,t));break;default:gt(e,t,c,d,n,f)}return;default:if(nh(t)){for(var v in i)d=i[v],i.hasOwnProperty(v)&&d!==void 0&&!n.hasOwnProperty(v)&&Au(e,t,v,void 0,n,d);for(u in n)d=n[u],f=i[u],!n.hasOwnProperty(u)||d===f||d===void 0&&f===void 0||Au(e,t,u,d,n,f);return}}for(var m in i)d=i[m],i.hasOwnProperty(m)&&d!=null&&!n.hasOwnProperty(m)&&gt(e,t,m,null,n,d);for(h in n)d=n[h],f=i[h],!n.hasOwnProperty(h)||d===f||d==null&&f==null||gt(e,t,h,d,n,f)}function Tf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),n=0;n<i.length;n++){var s=i[n],a=s.transferSize,r=s.initiatorType,o=s.duration;if(a&&o&&Tf(r)){for(r=0,o=s.responseEnd,n+=1;n<i.length;n++){var l=i[n],c=l.startTime;if(c>o)break;var u=l.transferSize,h=l.initiatorType;u&&Tf(h)&&(l=l.responseEnd,r+=u*(l<o?1:(o-c)/(l-c)))}if(--n,t+=8*(a+r)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Su=null,xu=null;function Po(e){return e.nodeType===9?e:e.ownerDocument}function Mf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jb(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function _u(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bc=null;function WA(){var e=window.event;return e&&e.type==="popstate"?e===bc?!1:(bc=e,!0):(bc=null,!1)}var Ib=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,Rf=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof Rf<"u"?function(e){return Rf.resolve(null).then(e).catch(JA)}:Ib;function JA(e){setTimeout(function(){throw e})}function An(e){return e==="head"}function Df(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(n===0){e.removeChild(s),Vs(t);return}n--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")n++;else if(i==="html")Ha(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Ha(i);for(var a=i.firstChild;a;){var r=a.nextSibling,o=a.nodeName;a[ur]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&a.rel.toLowerCase()==="stylesheet"||i.removeChild(a),a=r}}else i==="body"&&Ha(e.ownerDocument.body);i=s}while(i);Vs(t)}function Nf(e,t){var i=e;e=0;do{var n=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=n}while(i)}function wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":wu(i),ih(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function tS(e,t,i,n){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ur])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=We(e.nextSibling),e===null)break}return null}function eS(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=We(e.nextSibling),e===null))return null;return e}function Fb(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=We(e.nextSibling),e===null))return null;return e}function Eu(e){return e.data==="$?"||e.data==="$~"}function Cu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function iS(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function We(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Tu=null;function Of(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return We(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Lf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Hb(e,t,i){switch(t=Po(i),e){case"html":if(e=t.documentElement,!e)throw Error(N(452));return e;case"head":if(e=t.head,!e)throw Error(N(453));return e;case"body":if(e=t.body,!e)throw Error(N(454));return e;default:throw Error(N(451))}}function Ha(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ih(e)}var Ze=new Map,kf=new Set;function jo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fi=ut.d;ut.d={f:nS,r:sS,D:aS,C:rS,L:oS,m:lS,X:uS,S:cS,M:hS};function nS(){var e=Fi.f(),t=hl();return e||t}function sS(e){var t=Ws(e);t!==null&&t.tag===5&&t.type==="form"?Lm(t):Fi.r(e)}var ta=typeof document>"u"?null:document;function Bb(e,t,i){var n=ta;if(n&&typeof t=="string"&&t){var s=qe(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),kf.has(s)||(kf.add(s),e={rel:e,crossOrigin:i,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),ae(t,"link",e),Qt(t),n.head.appendChild(t)))}}function aS(e){Fi.D(e),Bb("dns-prefetch",e,null)}function rS(e,t){Fi.C(e,t),Bb("preconnect",e,t)}function oS(e,t,i){Fi.L(e,t,i);var n=ta;if(n&&e&&t){var s='link[rel="preload"][as="'+qe(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+qe(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+qe(i.imageSizes)+'"]')):s+='[href="'+qe(e)+'"]';var a=s;switch(t){case"style":a=Gs(e);break;case"script":a=ea(e)}Ze.has(a)||(e=_t({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ze.set(a,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(mr(a))||t==="script"&&n.querySelector(br(a))||(t=n.createElement("link"),ae(t,"link",e),Qt(t),n.head.appendChild(t)))}}function lS(e,t){Fi.m(e,t);var i=ta;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+qe(n)+'"][href="'+qe(e)+'"]',a=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=ea(e)}if(!Ze.has(a)&&(e=_t({rel:"modulepreload",href:e},t),Ze.set(a,e),i.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(br(a)))return}n=i.createElement("link"),ae(n,"link",e),Qt(n),i.head.appendChild(n)}}}function cS(e,t,i){Fi.S(e,t,i);var n=ta;if(n&&e){var s=Es(n).hoistableStyles,a=Gs(e);t=t||"default";var r=s.get(a);if(!r){var o={loading:0,preload:null};if(r=n.querySelector(mr(a)))o.loading=5;else{e=_t({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ze.get(a))&&Bh(e,i);var l=r=n.createElement("link");Qt(l),ae(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ao(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:o},s.set(a,r)}}}function uS(e,t){Fi.X(e,t);var i=ta;if(i&&e){var n=Es(i).hoistableScripts,s=ea(e),a=n.get(s);a||(a=i.querySelector(br(s)),a||(e=_t({src:e,async:!0},t),(t=Ze.get(s))&&Uh(e,t),a=i.createElement("script"),Qt(a),ae(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function hS(e,t){Fi.M(e,t);var i=ta;if(i&&e){var n=Es(i).hoistableScripts,s=ea(e),a=n.get(s);a||(a=i.querySelector(br(s)),a||(e=_t({src:e,async:!0,type:"module"},t),(t=Ze.get(s))&&Uh(e,t),a=i.createElement("script"),Qt(a),ae(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function zf(e,t,i,n){var s=(s=tn.current)?jo(s):null;if(!s)throw Error(N(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Gs(i.href),i=Es(s).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Gs(i.href);var a=Es(s).hoistableStyles,r=a.get(e);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,r),(a=s.querySelector(mr(e)))&&!a._p&&(r.instance=a,r.state.loading=5),Ze.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ze.set(e,i),a||dS(s,e,i,r.state))),t&&n===null)throw Error(N(528,""));return r}if(t&&n!==null)throw Error(N(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ea(i),i=Es(s).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,e))}}function Gs(e){return'href="'+qe(e)+'"'}function mr(e){return'link[rel="stylesheet"]['+e+"]"}function Ub(e){return _t({},e,{"data-precedence":e.precedence,precedence:null})}function dS(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),ae(t,"link",i),Qt(t),e.head.appendChild(t))}function ea(e){return'[src="'+qe(e)+'"]'}function br(e){return"script[async]"+e}function Pf(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+qe(i.href)+'"]');if(n)return t.instance=n,Qt(n),n;var s=_t({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Qt(n),ae(n,"style",s),ao(n,i.precedence,e),t.instance=n;case"stylesheet":s=Gs(i.href);var a=e.querySelector(mr(s));if(a)return t.state.loading|=4,t.instance=a,Qt(a),a;n=Ub(i),(s=Ze.get(s))&&Bh(n,s),a=(e.ownerDocument||e).createElement("link"),Qt(a);var r=a;return r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),ae(a,"link",n),t.state.loading|=4,ao(a,i.precedence,e),t.instance=a;case"script":return a=ea(i.src),(s=e.querySelector(br(a)))?(t.instance=s,Qt(s),s):(n=i,(s=Ze.get(a))&&(n=_t({},i),Uh(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),Qt(s),ae(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,ao(n,i.precedence,e));return t.instance}function ao(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,a=s,r=0;r<n.length;r++){var o=n[r];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Bh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ro=null;function jf(e,t,i){if(ro===null){var n=new Map,s=ro=new Map;s.set(i,n)}else s=ro,n=s.get(i),n||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var a=i[s];if(!(a[ur]||a[ie]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(t)||"";r=e+r;var o=n.get(r);o?o.push(a):n.set(r,[a])}}return n}function If(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function fS(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Gb(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function gS(e,t,i,n){if(i.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var s=Gs(n.href),a=t.querySelector(mr(s));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Io.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=a,Qt(a);return}a=t.ownerDocument||t,n=Ub(n),(s=Ze.get(s))&&Bh(n,s),a=a.createElement("link"),Qt(a);var r=a;r._p=new Promise(function(o,l){r.onload=o,r.onerror=l}),ae(a,"link",n),i.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&!(i.state.loading&3)&&(e.count++,i=Io.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var yc=0;function pS(e,t){return e.stylesheets&&e.count===0&&oo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var n=setTimeout(function(){if(e.stylesheets&&oo(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&yc===0&&(yc=62500*KA());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&oo(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>yc?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fo=null;function oo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fo=new Map,t.forEach(mS,e),Fo=null,Io.call(e))}function mS(e,t){if(!(t.state.loading&4)){var i=Fo.get(e);if(i)var n=i.get(null);else{i=new Map,Fo.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var r=s[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(i.set(r.dataset.precedence,r),n=r)}n&&i.set(null,n)}s=t.instance,r=s.getAttribute("data-precedence"),a=i.get(r)||n,a===n&&i.set(null,s),i.set(r,s),this.count++,n=Io.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),a?a.parentNode.insertBefore(s,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var er={$$typeof:Ti,Provider:null,Consumer:null,_currentValue:Rn,_currentValue2:Rn,_threadCount:0};function bS(e,t,i,n,s,a,r,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.hiddenUpdates=Bl(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Vb(e,t,i,n,s,a,r,o,l,c,u,h){return e=new bS(e,t,i,r,l,c,u,h,o),t=1,a===!0&&(t|=24),a=Me(3,null,null,t),e.current=a,a.stateNode=e,t=gh(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:i,cache:t},bh(a),e}function qb(e){return e?(e=As,e):As}function Xb(e,t,i,n,s,a){s=qb(s),n.context===null?n.context=s:n.pendingContext=s,n=nn(t),n.payload={element:i},a=a===void 0?null:a,a!==null&&(n.callback=a),i=sn(e,n,t),i!==null&&(xe(i,e,t),Oa(i,e,t))}function Ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Gh(e,t){Ff(e,t),(e=e.alternate)&&Ff(e,t)}function Yb(e){if(e.tag===13||e.tag===31){var t=Xn(e,67108864);t!==null&&xe(t,e,67108864),Gh(e,67108864)}}function Hf(e){if(e.tag===13||e.tag===31){var t=ke();t=th(t);var i=Xn(e,t);i!==null&&xe(i,e,t),Gh(e,t)}}var Ho=!0;function yS(e,t,i,n){var s=X.T;X.T=null;var a=ut.p;try{ut.p=2,Vh(e,t,i,n)}finally{ut.p=a,X.T=s}}function vS(e,t,i,n){var s=X.T;X.T=null;var a=ut.p;try{ut.p=8,Vh(e,t,i,n)}finally{ut.p=a,X.T=s}}function Vh(e,t,i,n){if(Ho){var s=Mu(n);if(s===null)mc(e,t,n,Bo,i),Bf(e,n);else if(SS(s,e,t,i,n))n.stopPropagation();else if(Bf(e,n),t&4&&-1<AS.indexOf(e)){for(;s!==null;){var a=Ws(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=En(a.pendingLanes);if(r!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var l=1<<31-Le(r);o.entanglements[1]|=l,r&=~l}mi(a),!(ct&6)&&(Do=Ne()+500,pr(0))}}break;case 31:case 13:o=Xn(a,2),o!==null&&xe(o,a,2),hl(),Gh(a,2)}if(a=Mu(n),a===null&&mc(e,t,n,Bo,i),a===s)break;s=a}s!==null&&n.stopPropagation()}else mc(e,t,n,null,i)}}function Mu(e){return e=sh(e),qh(e)}var Bo=null;function qh(e){if(Bo=null,e=gs(e),e!==null){var t=rr(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=fp(t),e!==null)return e;e=null}else if(i===31){if(e=gp(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Bo=e,null}function $b(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(av()){case yp:return 2;case vp:return 8;case mo:case rv:return 32;case Ap:return 268435456;default:return 32}default:return 32}}var Ru=!1,on=null,ln=null,cn=null,ir=new Map,nr=new Map,Yi=[],AS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bf(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":ir.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(t.pointerId)}}function ga(e,t,i,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ws(t),t!==null&&Yb(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function SS(e,t,i,n,s){switch(t){case"focusin":return on=ga(on,e,t,i,n,s),!0;case"dragenter":return ln=ga(ln,e,t,i,n,s),!0;case"mouseover":return cn=ga(cn,e,t,i,n,s),!0;case"pointerover":var a=s.pointerId;return ir.set(a,ga(ir.get(a)||null,e,t,i,n,s)),!0;case"gotpointercapture":return a=s.pointerId,nr.set(a,ga(nr.get(a)||null,e,t,i,n,s)),!0}return!1}function Kb(e){var t=gs(e.target);if(t!==null){var i=rr(t);if(i!==null){if(t=i.tag,t===13){if(t=fp(i),t!==null){e.blockedOn=t,wd(e.priority,function(){Hf(i)});return}}else if(t===31){if(t=gp(i),t!==null){e.blockedOn=t,wd(e.priority,function(){Hf(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Mu(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Yc=n,i.target.dispatchEvent(n),Yc=null}else return t=Ws(i),t!==null&&Yb(t),e.blockedOn=i,!1;t.shift()}return!0}function Uf(e,t,i){lo(e)&&i.delete(t)}function xS(){Ru=!1,on!==null&&lo(on)&&(on=null),ln!==null&&lo(ln)&&(ln=null),cn!==null&&lo(cn)&&(cn=null),ir.forEach(Uf),nr.forEach(Uf)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ru||(Ru=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,xS)))}var Br=null;function Gf(e){Br!==e&&(Br=e,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,function(){Br===e&&(Br=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(qh(n||i)===null)continue;break}var a=Ws(i);a!==null&&(e.splice(t,3),t-=3,cu(a,{pending:!0,data:s,method:i.method,action:n},n,s))}}))}function Vs(e){function t(l){return Hr(l,e)}on!==null&&Hr(on,e),ln!==null&&Hr(ln,e),cn!==null&&Hr(cn,e),ir.forEach(t),nr.forEach(t);for(var i=0;i<Yi.length;i++){var n=Yi[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Yi.length&&(i=Yi[0],i.blockedOn===null);)Kb(i),i.blockedOn===null&&Yi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var s=i[n],a=i[n+1],r=s[_e]||null;if(typeof a=="function")r||Gf(i);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,r=a[_e]||null)o=r.formAction;else if(qh(s)!==null)continue}else o=r.action;typeof o=="function"?i[n+1]=o:(i.splice(n,3),n-=3),Gf(i)}}}function Wb(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(r){return s=r})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(i,20)}function i(){if(!n&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Xh(e){this._internalRoot=e}gl.prototype.render=Xh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));var i=t.current,n=ke();Xb(i,n,e,t,null,null)};gl.prototype.unmount=Xh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xb(e.current,2,null,e,null,null),hl(),t[Ks]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ep();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Yi.length&&t!==0&&t<Yi[i].priority;i++);Yi.splice(i,0,e),i===0&&Kb(e)}};var Vf=hp.version;if(Vf!=="19.2.0")throw Error(N(527,Vf,"19.2.0"));ut.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=Qy(t),e=e!==null?pp(e):null,e=e===null?null:e.stateNode,e};var _S={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ur=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ur.isDisabled&&Ur.supportsFiber)try{or=Ur.inject(_S),Oe=Ur}catch{}}Zo.createRoot=function(e,t){if(!dp(e))throw Error(N(299));var i=!1,n="",s=Bm,a=Um,r=Gm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Vb(e,1,!1,null,null,i,n,null,s,a,r,Wb),e[Ks]=t.current,Hh(e),new Xh(t)};Zo.hydrateRoot=function(e,t,i){if(!dp(e))throw Error(N(299));var n=!1,s="",a=Bm,r=Um,o=Gm,l=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(a=i.onUncaughtError),i.onCaughtError!==void 0&&(r=i.onCaughtError),i.onRecoverableError!==void 0&&(o=i.onRecoverableError),i.formState!==void 0&&(l=i.formState)),t=Vb(e,1,!0,t,i??null,n,s,l,a,r,o,Wb),t.context=qb(null),i=t.current,n=ke(),n=th(n),s=nn(n),s.callback=null,sn(i,s,n),i=n,t.current.lanes=i,cr(t,i),mi(t),e[Ks]=t.current,Hh(e),new gl(t)};Zo.version="19.2.0";function Zb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zb)}catch(e){console.error(e)}}Zb(),ap.exports=Zo;var wS=ap.exports;const ES=Kg(wS);var Ba={};Ba.d=(e,t)=>{for(var i in t)Ba.o(t,i)&&!Ba.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})};Ba.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Y=globalThis.pdfjsLib={};Ba.d(Y,{AbortException:()=>mn,AnnotationEditorLayer:()=>wi,AnnotationEditorParamsType:()=>ot,AnnotationEditorType:()=>Z,AnnotationEditorUIManager:()=>bn,AnnotationLayer:()=>A_,AnnotationMode:()=>$i,ColorPicker:()=>Fe,DOMSVGFactory:()=>sd,DrawLayer:()=>ce,FeatureTest:()=>fe,GlobalWorkerOptions:()=>Ga,ImageKind:()=>co,InvalidPDFException:()=>Nu,MissingPDFException:()=>sr,OPS:()=>ei,OutputScale:()=>Ou,PDFDataRangeTransport:()=>m0,PDFDateString:()=>t0,PDFWorker:()=>Wt,PasswordResponses:()=>RS,PermissionFlag:()=>MS,PixelsPerInch:()=>qs,RenderingCancelledException:()=>Kh,TextLayer:()=>he,TouchManager:()=>Sl,UnexpectedResponseException:()=>Uo,Util:()=>U,VerbosityLevel:()=>pl,XfaLayer:()=>y0,build:()=>t_,createValidAbsoluteUrl:()=>LS,fetchData:()=>vl,getDocument:()=>qx,getFilenameFromUrl:()=>US,getPdfFilenameFromUrl:()=>GS,getXfaPageViewport:()=>VS,isDataScheme:()=>Al,isPdfFile:()=>Wh,noContextMenu:()=>ni,normalizeUnicode:()=>FS,setLayerDimensions:()=>Hn,shadow:()=>tt,stopEvent:()=>Re,version:()=>Jx});const le=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Qb=[1,0,0,1,0,0],Du=[.001,0,0,.001,0,0],CS=1e7,vc=1.35,Ee={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$i={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},TS="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},MS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},co={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},pa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pl={ERRORS:0,WARNINGS:1,INFOS:5},ei={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},RS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ml=pl.WARNINGS;function DS(e){Number.isInteger(e)&&(ml=e)}function NS(){return ml}function bl(e){ml>=pl.INFOS&&console.log(`Info: ${e}`)}function Q(e){ml>=pl.WARNINGS&&console.log(`Warning: ${e}`)}function mt(e){throw new Error(e)}function Ut(e,t){e||mt(t)}function OS(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function LS(e,t=null,i=null){if(!e)return null;try{if(i&&typeof e=="string"&&(i.addDefaultProtocol&&e.startsWith("www.")&&e.match(/\./g)?.length>=2&&(e=`http://${e}`),i.tryConvertEncoding))try{e=IS(e)}catch{}const n=t?new URL(e,t):new URL(e);if(OS(n))return n}catch{}return null}function tt(e,t,i,n=!1){return Object.defineProperty(e,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const Sn=function(){function t(i,n){this.message=i,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class qf extends Sn{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Ac extends Sn{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Nu extends Sn{constructor(t){super(t,"InvalidPDFException")}}class sr extends Sn{constructor(t){super(t,"MissingPDFException")}}class Uo extends Sn{constructor(t,i){super(t,"UnexpectedResponseException"),this.status=i}}class kS extends Sn{constructor(t){super(t,"FormatError")}}class mn extends Sn{constructor(t){super(t,"AbortException")}}function Jb(e){(typeof e!="object"||e?.length===void 0)&&mt("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const n=[];for(let s=0;s<t;s+=i){const a=Math.min(s+i,t),r=e.subarray(s,a);n.push(String.fromCharCode.apply(null,r))}return n.join("")}function yl(e){typeof e!="string"&&mt("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=e.charCodeAt(n)&255;return i}function zS(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Yh(e){const t=Object.create(null);for(const[i,n]of e)t[i]=n;return t}function PS(){const e=new Uint8Array(4);return e[0]=1,new Uint32Array(e.buffer,0,1)[0]===1}function jS(){try{return new Function(""),!0}catch{return!1}}class fe{static get isLittleEndian(){return tt(this,"isLittleEndian",PS())}static get isEvalSupported(){return tt(this,"isEvalSupported",jS())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?tt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):tt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Sc=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class U{static makeHexColor(t,i,n){return`#${Sc[t]}${Sc[i]}${Sc[n]}`}static scaleMinMax(t,i){let n;t[0]?(t[0]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[3],i[3]*=t[3]):(n=i[0],i[0]=i[1],i[1]=n,n=i[2],i[2]=i[3],i[3]=n,t[1]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static applyTransform(t,i){const n=t[0]*i[0]+t[1]*i[2]+i[4],s=t[0]*i[1]+t[1]*i[3]+i[5];return[n,s]}static applyInverseTransform(t,i){const n=i[0]*i[3]-i[1]*i[2],s=(t[0]*i[3]-t[1]*i[2]+i[2]*i[5]-i[4]*i[3])/n,a=(-t[0]*i[1]+t[1]*i[0]+i[4]*i[1]-i[5]*i[0])/n;return[s,a]}static getAxialAlignedBoundingBox(t,i){const n=this.applyTransform(t,i),s=this.applyTransform(t.slice(2,4),i),a=this.applyTransform([t[0],t[3]],i),r=this.applyTransform([t[2],t[1]],i);return[Math.min(n[0],s[0],a[0],r[0]),Math.min(n[1],s[1],a[1],r[1]),Math.max(n[0],s[0],a[0],r[0]),Math.max(n[1],s[1],a[1],r[1])]}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t){const i=[t[0],t[2],t[1],t[3]],n=t[0]*i[0]+t[1]*i[2],s=t[0]*i[1]+t[1]*i[3],a=t[2]*i[0]+t[3]*i[2],r=t[2]*i[1]+t[3]*i[3],o=(n+r)/2,l=Math.sqrt((n+r)**2-4*(n*r-a*s))/2,c=o+l||1,u=o-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const n=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return a>r?null:[n,a,s,r]}static#t(t,i,n,s,a,r,o,l,c,u){if(c<=0||c>=1)return;const h=1-c,d=c*c,f=d*c,g=h*(h*(h*t+3*c*i)+3*d*n)+f*s,p=h*(h*(h*a+3*c*r)+3*d*o)+f*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],p),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],p)}static#e(t,i,n,s,a,r,o,l,c,u,h,d){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,i,n,s,a,r,o,l,-h/u,d);return}const f=u**2-4*h*c;if(f<0)return;const g=Math.sqrt(f),p=2*c;this.#t(t,i,n,s,a,r,o,l,(-u+g)/p,d),this.#t(t,i,n,s,a,r,o,l,(-u-g)/p,d)}static bezierBoundingBox(t,i,n,s,a,r,o,l,c){return c?(c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],i,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],i,l)):c=[Math.min(t,o),Math.min(i,l),Math.max(t,o),Math.max(i,l)],this.#e(t,n,a,o,i,s,r,l,3*(-t+3*(n-a)+o),6*(t-2*n+a),3*(n-t),c),this.#e(t,n,a,o,i,s,r,l,3*(-i+3*(s-r)+l),6*(i-2*s+r),3*(s-i),c),c}}function IS(e){return decodeURIComponent(escape(e))}let xc=null,Xf=null;function FS(e){return xc||(xc=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Xf=new Map([["","t"]])),e.replaceAll(xc,(t,i,n)=>i?i.normalize("NFKC"):Xf.get(n))}function HS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),Jb(e)}const $h="pdfjs_internal_id_";function BS(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(Jb(e))}typeof Promise.try!="function"&&(Promise.try=function(e,...t){return new Promise(i=>{i(e(...t))})});const _i="http://www.w3.org/2000/svg";class qs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function vl(e,t="text"){if(Ea(e,document.baseURI)){const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(s.response);return}i(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class yr{constructor({viewBox:t,userUnit:i,scale:n,rotation:s,offsetX:a=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=i,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=r,n*=i;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,h,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let g,p,v,m;u===0?(g=Math.abs(c-t[1])*n+a,p=Math.abs(l-t[0])*n+r,v=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(g=Math.abs(l-t[0])*n+a,p=Math.abs(c-t[1])*n+r,v=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[u*n,h*n,d*n,f*n,g-u*n*l-d*n*c,p-h*n*l-f*n*c],this.width=v,this.height=m}get rawDims(){const{userUnit:t,viewBox:i}=this,n=i.map(s=>s*t);return tt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new yr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,i){return U.applyTransform([t,i],this.transform)}convertToViewportRectangle(t){const i=U.applyTransform([t[0],t[1]],this.transform),n=U.applyTransform([t[2],t[3]],this.transform);return[i[0],i[1],n[0],n[1]]}convertToPdfPoint(t,i){return U.applyInverseTransform([t,i],this.transform)}}class Kh extends Sn{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function Al(e){const t=e.length;let i=0;for(;i<t&&e[i].trim()==="";)i++;return e.substring(i,i+5).toLowerCase()==="data:"}function Wh(e){return typeof e=="string"&&/\.pdf$/i.test(e)}function US(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function GS(e,t="document.pdf"){if(typeof e!="string")return t;if(Al(e))return Q('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=i.exec(e);let a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class Yf{started=Object.create(null);times=[];time(t){t in this.started&&Q(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Q(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:n}of this.times)i=Math.max(n.length,i);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(i)} ${a-s}ms
`);return t.join("")}}function Ea(e,t){try{const{protocol:i}=t?new URL(e,t):new URL(e);return i==="http:"||i==="https:"}catch{return!1}}function ni(e){e.preventDefault()}function Re(e){e.preventDefault(),e.stopPropagation()}class t0{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const n=parseInt(i[1],10);let s=parseInt(i[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(i[3],10);a=a>=1&&a<=31?a:1;let r=parseInt(i[4],10);r=r>=0&&r<=23?r:0;let o=parseInt(i[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(i[6],10);l=l>=0&&l<=59?l:0;const c=i[7]||"Z";let u=parseInt(i[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(i[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(r+=u,o+=h):c==="+"&&(r-=u,o-=h),new Date(Date.UTC(n,s,a,r,o,l))}}function VS(e,{scale:t=1,rotation:i=0}){const{width:n,height:s}=e.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new yr({viewBox:a,userUnit:1,scale:t,rotation:i})}function Zh(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(t=>parseInt(t)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Q(`Not a valid color format: "${e}"`),[0,0,0])}function qS(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const i of e.keys()){t.style.color=i;const n=window.getComputedStyle(t).color;e.set(i,Zh(n))}t.remove()}function Et(e){const{a:t,b:i,c:n,d:s,e:a,f:r}=e.getTransform();return[t,i,n,s,a,r]}function ri(e){const{a:t,b:i,c:n,d:s,e:a,f:r}=e.getTransform().invertSelf();return[t,i,n,s,a,r]}function Hn(e,t,i=!1,n=!0){if(t instanceof yr){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:r}=e,o=fe.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${a}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!i||t.rotation%180===0?(r.width=u,r.height=h):(r.width=h,r.height=u)}n&&e.setAttribute("data-main-rotation",t.rotation)}class Ou{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Ua{#t=null;#e=null;#i;#n=null;#a=null;static#s=null;constructor(t){this.#i=t,Ua.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#i._uiManager._signal;t.addEventListener("contextmenu",ni,{signal:i}),t.addEventListener("pointerdown",Ua.#l,{signal:i});const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const s=this.#i.toolbarPosition;if(s){const{style:a}=t,r=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}get div(){return this.#t}static#l(t){t.stopPropagation()}#o(t){this.#i._focusEventsAllowed=!1,Re(t)}#u(t){this.#i._focusEventsAllowed=!0,Re(t)}#c(t){const i=this.#i._uiManager._signal;t.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",ni,{signal:i})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#d(){const{editorType:t,_uiManager:i}=this.#i,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Ua.#s[t]),this.#c(n),n.addEventListener("click",s=>{i.delete()},{signal:i._signal}),this.#n.append(n)}get#h(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#c(i),this.#n.prepend(i,this.#h),this.#a=t}addColorPicker(t){this.#e=t;const i=t.renderButton();this.#c(i),this.#n.prepend(i,this.#h)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class XS{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ni,{signal:this.#i._signal});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#s(),t}#a(t,i){let n=0,s=0;for(const a of t){const r=a.y+a.height;if(r<n)continue;const o=a.x+(i?a.width:0);if(r>n){s=o,n=r;continue}i?o>s&&(s=o):o<s&&(s=o)}return[i?1-s:s,n]}show(t,i,n){const[s,a]=this.#a(i,n),{style:r}=this.#e||=this.#n();t.append(this.#e),r.insetInlineEnd=`${100*s}%`,r.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");t.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#i._signal;t.addEventListener("contextmenu",ni,{signal:n}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function Go(e,t,i){for(const n of i)t.addEventListener(n,e[n].bind(e))}class YS{#t=0;get id(){return`${TS}${this.#t++}`}}class Qh{#t=HS();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return tt(this,"_isSVGFittingCanvas",a)}async#n(t,i){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof i=="string"?(n.url=i,s=await vl(i,"blob")):i instanceof File?s=n.file=i:i instanceof Blob&&(s=i),s.type==="image/svg+xml"){const a=Qh._isSVGFittingCanvas,r=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,c()},r.onload=async()=>{const h=n.svgUrl=r.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=r.onerror=u});r.readAsDataURL(s),await l}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Q(s),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:i,name:n,size:s,type:a}=t;return this.#n(`${i}_${n}_${s}_${a}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,i){const n=await i;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:n}=i;return delete i.blobPromise,this.getFromBlob(i.id,n)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(i.width,i.height);return s.getContext("2d").drawImage(i,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const i=this.#i.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:n}=i;if(!i.url&&!i.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=s.convertToBlob()}n.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class $S{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:i,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(s&&t(),this.#e)return;const l={cmd:t,undo:i,post:n,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(r&&this.#t[this.#n].type===a){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}const c=this.#n+1;c===this.#i?this.#t.splice(0,1):(this.#n=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#n];t(),i?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#n];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let i=this.#n;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#n-i),this.#n=i;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class vr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=fe.platform;for(const[n,s,a={}]of t)for(const r of n){const o=r.startsWith("mac+");i&&o?(this.callbacks.set(r.slice(4),{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1))):!i&&!o&&(this.callbacks.set(r,{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const n=this.callbacks.get(this.#t(i));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:r=[],checker:o=null}}=n;o&&!o(t,i)||(s.bind(t,...r,i)(),a||Re(i))}}class Jh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return qS(t),tt(this,"_colors",t)}convert(t){const i=Zh(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[n,s]of this._colors)if(s.every((a,r)=>a===i[r]))return Jh._colorsMapping.get(n);return i}getHexCode(t){const i=this._colors.get(t);return i?U.makeHexColor(...i):t}}class bn{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#a=null;#s=null;#l=null;#o=new $S;#u=null;#c=null;#d=0;#h=new Set;#f=null;#r=null;#g=new Set;_editorUndoBar=null;#m=!1;#p=!1;#b=!1;#A=null;#y=null;#S=null;#_=null;#E=!1;#T=null;#R=new YS;#x=!1;#M=!1;#C=null;#N=null;#k=null;#P=null;#w=Z.NONE;#v=new Set;#L=null;#B=null;#U=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#I=null;#V=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=bn.prototype,i=r=>r.#I.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),n=(r,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return tt(this,"_keyboardManager",new vr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:o})=>!(o instanceof HTMLButtonElement)&&r.#I.contains(o)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:o})=>!(o instanceof HTMLButtonElement)&&r.#I.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}]]))}constructor(t,i,n,s,a,r,o,l,c,u,h,d,f){const g=this._signal=this.#t.signal;this.#I=t,this.#V=i,this.#a=n,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:g}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),s._on("setpreference",this.onSetPreference.bind(this),{signal:g}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:g}),this.#et(),this.#at(),this.#$(),this.#s=a.annotationStorage,this.#A=a.filterFactory,this.#B=r,this.#_=o||null,this.#m=l,this.#p=c,this.#b=u,this.#P=h||null,this.viewParameters={realScale:qs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=f!==!1}destroy(){this.#O?.resolve(),this.#O=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#g.clear(),this.#e=null,this.#v.clear(),this.#o.destroy(),this.#a?.destroy(),this.#T?.hide(),this.#T=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#P}get useNewAltTextFlow(){return this.#p}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return tt(this,"hcmFilter",this.#B?this.#A.addHCMFilter(this.#B.foreground,this.#B.background):"none")}get direction(){return tt(this,"direction",getComputedStyle(this.#I).direction)}get highlightColors(){return tt(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#k=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#I.focus()}findParent(t,i){for(const n of this.#n.values()){const{x:s,y:a,width:r,height:o}=n.div.getBoundingClientRect();if(t>=s&&t<=s+r&&i>=a&&i<=a+o)return n}return null}disableUserSelect(t=!1){this.#V.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*qs.PDF_TO_CSS_UNITS;for(const i of this.#g)i.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#F({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Y(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const n of this.#n.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:r}=i,o=i.toString(),c=this.#F(i).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;i.empty();const h=this.#Y(c),d=this.#w===Z.NONE,f=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:r,text:o}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(Z.HIGHLIGHT,f);return}f()}#J(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#F(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#T||=new XS(this),this.#T.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#tt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#T?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#L)return;const s=this.#F(t).closest(".textLayer");if(!s){this.#L&&(this.#T?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#L=i,this.#D({hasSelectedText:!0}),!(this.#w!==Z.HIGHLIGHT&&this.#w!==Z.NONE)&&(this.#w===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#w===Z.HIGHLIGHT?this.#Y(s):null;a?.toggleDrawing();const r=new AbortController,o=this.combinedSignal(r),l=c=>{c.type==="pointerup"&&c.button!==0||(r.abort(),a?.toggleDrawing(!0),c.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}}#X(t=""){this.#w===Z.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#J()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#it(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#nt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#v)if(i.div.contains(t)){this.#N=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,i]=this.#N;this.#N=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#$(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#st(){this.#C?.abort(),this.#C=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#W(){this.#u?.abort(),this.#u=null}#at(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#$(),this.#K()}removeEditListeners(){this.#st(),this.#W()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const n of this.#r)if(n.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const n of this.#r)if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const n of this.#v){const s=n.serialize(!0);s&&i.push(s)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const a of i.items)for(const r of this.#r)if(r.isHandlingMimeForPasting(a.type)){r.paste(a,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Q(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const l of n){const c=await s.deserialize(l);if(!c)return;a.push(c)}const r=()=>{for(const l of a)this.#Z(l);this.#Q(a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:r,undo:o,mustExec:!0})}catch(a){Q(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==Z.NONE&&!this.isEditorHandlingKeyboard&&bn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#X("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([n,s])=>this.#G[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#w===Z.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[ot.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#it(),this.#K(),this.#D({isEditing:this.#w!==Z.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#nt(),this.#W(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#r){this.#r=t;for(const i of this.#r)this.#H(i.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#n.get(this.#d)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#n.set(t.pageIndex,t),this.#x?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}async updateMode(t,i=null,n=!1){if(this.#w!==t&&!(this.#O&&(await this.#O.promise,!this.#O))){if(this.#O=Promise.withResolvers(),this.#w=t,t===Z.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#O.resolve();return}this.setEditingState(!0),await this.#rt(),this.unselectAll();for(const s of this.#n.values())s.updateMode(t);if(!i){n&&this.addNewEditorFromKeyboard(),this.#O.resolve();return}for(const s of this.#i.values())s.annotationElementId===i?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#O.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#r){switch(t){case ot.CREATE:this.currentLayer.addNewEditor();return;case ot.HIGHLIGHT_DEFAULT_COLOR:this.#k?.updateColor(i);break;case ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#U||=new Map).set(t,i),this.showAllEditors("highlight",i);break}for(const n of this.#v)n.updateParams(t,i);for(const n of this.#r)n.updateDefaultParams(t,i)}}showAllEditors(t,i,n=!1){for(const a of this.#i.values())a.editorType===t&&a.show(i);(this.#U?.get(ot.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#H([[ot.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#M!==t){this.#M=t;for(const i of this.#n.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#rt(){if(!this.#x){this.#x=!0;const t=[];for(const i of this.#n.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#ot(){if(this.unselectAll(),this.#x){this.#x=!1;for(const t of this.#n.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const i=[];for(const n of this.#i.values())n.pageIndex===t&&i.push(n);return i}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){const i=this.#n.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#v);return t}updateUI(t){this.#lt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(const i of this.#v)i!==t&&i.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#D({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#o.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}cleanUndoStack(t){this.#o.cleanType(t)}#q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#v],n=()=>{this._editorUndoBar?.show(s,i.length===1?i[0].editorType:i.length);for(const a of i)a.remove()},s=()=>{for(const a of i)this.#Z(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Q(t){for(const i of this.#v)i.unselect();this.#v.clear();for(const i of t)i.isEmpty()||(this.#v.add(i),i.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#Q(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==Z.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[s,a]=this.#j,r=[...this.#v],o=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const l of r)this.#i.has(l.id)&&l.translateInPage(s,a)},undo:()=>{for(const l of r)this.#i.has(l.id)&&l.translateInPage(-s,-a)},mustExec:!1})},o);for(const l of r)l.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#v)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let i=!1;for(const[{x:s,y:a,pageIndex:r},o]of t)o.newX=s,o.newY=a,o.newPageIndex=r,i||=s!==o.savedX||a!==o.savedY||r!==o.savedPageIndex;if(!i)return!1;const n=(s,a,r,o)=>{if(this.#i.has(s.id)){const l=this.#n.get(o);l?s._setParentAndPosition(l,a,r):(s.pageIndex=o,s.x=a,s.y=r)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:r,newPageIndex:o}]of t)n(s,a,r,o)},undo:()=>{for(const[s,{savedX:a,savedY:r,savedPageIndex:o}]of t)n(s,a,r,o)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#f)for(const n of this.#f.keys())n.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return tt(this,"imageManager",new Qh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let c=0,u=i.rangeCount;c<u;c++)if(!t.contains(i.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:r}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(c,u,h,d)=>({x:(u-s)/r,y:1-(c+h-n)/a,width:d/r,height:h/a});break;case"180":o=(c,u,h,d)=>({x:1-(c+h-n)/a,y:1-(u+d-s)/r,width:h/a,height:d/r});break;case"270":o=(c,u,h,d)=>({x:1-(u+d-s)/r,y:(c-n)/a,width:d/r,height:h/a});break;default:o=(c,u,h,d)=>({x:(c-n)/a,y:(u-s)/r,width:h/a,height:d/r});break}const l=[];for(let c=0,u=i.rangeCount;c<u;c++){const h=i.getRangeAt(c);if(!h.collapsed)for(const{x:d,y:f,width:g,height:p}of h.getClientRects())g===0||p===0||l.push(o(d,f,g,p))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const n=this.#s.getRawValue(i);n&&(this.#w===Z.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}}class li{#t=null;#e=!1;#i=null;#n=null;#a=null;#s=null;#l=!1;#o=null;#u=null;#c=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#u=t,this.#h=t._uiManager.useNewAltTextFlow,li.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){li._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#n=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",li.#f.missing),i.setAttribute("data-l10n-id",li.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",ni,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#h&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#r}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#l=!0,s(a))},{signal:n}),await this.#g(),t}get#r(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#u.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#c===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#c=n,this.#d=s),!(this.#t===t&&this.#e===i)&&(a||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#r}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",li.#f[this.#r]),this.#n?.setAttribute("data-l10n-id",li.#f[`${this.#r}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#u.id}`;const s=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#u.getImageForAltText()?.setAttribute("aria-describedby",i.id)}}class Sl{#t;#e=!1;#i=null;#n;#a;#s;#l;#o;#u=null;#c;#d=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:r=null,signal:o}){this.#t=t,this.#i=n,this.#n=i,this.#a=s,this.#s=a,this.#l=r,this.#c=new AbortController,this.#o=AbortSignal.any([o,this.#c.signal]),t.addEventListener("touchstart",this.#h.bind(this),{passive:!1,signal:this.#o})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return tt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#h(t){if(this.#n?.()||t.touches.length<2)return;if(!this.#d){this.#d=new AbortController;const s=AbortSignal.any([this.#o,this.#d.signal]),a=this.#t,r={signal:s,passive:!1};a.addEventListener("touchmove",this.#f.bind(this),r),a.addEventListener("touchend",this.#r.bind(this),r),a.addEventListener("touchcancel",this.#r.bind(this),r),this.#a?.()}if(Re(t),t.touches.length!==2||this.#i?.()){this.#u=null;return}let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]),this.#u={touch0X:i.screenX,touch0Y:i.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#f(t){if(!this.#u||t.touches.length!==2)return;let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]);const{screenX:s,screenY:a}=i,{screenX:r,screenY:o}=n,l=this.#u,{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,f=h-c,g=d-u,p=r-s,v=o-a,m=Math.hypot(p,v)||1,b=Math.hypot(f,g)||1;if(!this.#e&&Math.abs(b-m)<=Sl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=a,l.touch1X=r,l.touch1Y=o,t.preventDefault(),!this.#e){this.#e=!0;return}const y=[(s+r)/2,(a+o)/2];this.#s?.(y,b,m)}#r(t){this.#d.abort(),this.#d=null,this.#l?.(),this.#u&&(t.preventDefault(),this.#u=null,this.#e=!1)}destroy(){this.#c?.abort(),this.#c=null}}class q{#t=null;#e=null;#i=null;#n=!1;#a=null;#s="";#l=!1;#o=null;#u=null;#c=null;#d=null;#h="";#f=!1;#r=null;#g=!1;#m=!1;#p=!1;#b=null;#A=0;#y=0;#S=null;#_=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#T=q._zIndex++;static _borderLineWidth=-1;static _colorManager=new Jh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=q.prototype._resizeWithKeyboard,i=bn.TRANSLATE_SMALL,n=bn.TRANSLATE_BIG;return tt(this,"_resizerKeyboardManager",new vr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],q.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:r}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,r];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new KS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(q._l10n??=t,q._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),q._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);q._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,n,s){const[a,r]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(i+s)/r,this.fixAndSetPosition()}#R([t,i],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#R(this.parentDimensions,t,i)}translateInPage(t,i){this.#r||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}drag(t,i){this.#r||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=i/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[l,c]=this.getBaseTranslation();r+=l,o+=c;const{style:u}=n;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(r,o),n.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#r&&(this.#r[0]!==this.x||this.#r[1]!==this.y)}get _hasBeenResized(){return!!this.#r&&(this.#r[2]!==this.width||this.#r[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:n}=q,s=n/t,a=n/i;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[n,s]}=this;let{x:a,y:r,width:o,height:l}=this;if(o*=n,l*=s,a*=n,r*=s,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-o,a)),r=Math.max(0,Math.min(s-l,r));break;case 90:a=Math.max(0,Math.min(n-l,a)),r=Math.min(s,Math.max(o,r));break;case 180:a=Math.min(n,Math.max(o,a)),r=Math.min(s,Math.max(l,r));break;case 270:a=Math.min(n,Math.max(l,a)),r=Math.max(0,Math.min(s-o,r));break}this.x=a/=n,this.y=r/=s;const[c,u]=this.getBaseTranslation();a+=c,r+=u,i.left=`${(100*a).toFixed(2)}%`,i.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}static#x(t,i,n){switch(n){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return q.#x(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return q.#x(t,i,360-this.parentRotation)}#M(t){switch(t){case 90:{const[i,n]=this.pageDimensions;return[0,-i/n,n/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,n]=this.pageDimensions;return[0,i/n,-n/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,n]}=this;return[i*t,n*t]}setDims(t,i){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#l||(a.height=`${(100*i/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:i,width:n}=t,s=n.endsWith("%"),a=!this.#l&&i.endsWith("%");if(s&&a)return;const[r,o]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/r).toFixed(2)}%`),!this.#l&&!a&&(t.height=`${(100*parseFloat(i)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const n of t){const s=document.createElement("div");this.#o.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#N.bind(this,n),{signal:i}),s.addEventListener("contextmenu",ni,{signal:i}),s.tabIndex=-1}this.div.prepend(this.#o)}#N(t,i){i.preventDefault();const{isMac:n}=fe.platform;if(i.button!==0||i.ctrlKey&&n)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#u=[i.screenX,i.screenY];const a=new AbortController,r=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#w.bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",Re,{passive:!1,signal:r}),window.addEventListener("contextmenu",ni,{signal:r}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const c=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#P()};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})}#k(t,i,n,s){this.width=n,this.height=s,this.x=t,this.y=i;const[a,r]=this.parentDimensions;this.setDims(a*n,r*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#c)return;const{savedX:t,savedY:i,savedWidth:n,savedHeight:s}=this.#c;this.#c=null;const a=this.x,r=this.y,o=this.width,l=this.height;a===t&&r===i&&o===n&&l===s||this.addCommands({cmd:this.#k.bind(this,a,r,o,l),undo:this.#k.bind(this,t,i,n,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#w(t,i){const[n,s]=this.parentDimensions,a=this.x,r=this.y,o=this.width,l=this.height,c=q.MIN_SIZE/n,u=q.MIN_SIZE/s,h=this.#M(this.rotation),d=(C,O)=>[h[0]*C+h[2]*O,h[1]*C+h[3]*O],f=this.#M(360-this.rotation),g=(C,O)=>[f[0]*C+f[2]*O,f[1]*C+f[3]*O];let p,v,m=!1,b=!1;switch(t){case"topLeft":m=!0,p=(C,O)=>[0,0],v=(C,O)=>[C,O];break;case"topMiddle":p=(C,O)=>[C/2,0],v=(C,O)=>[C/2,O];break;case"topRight":m=!0,p=(C,O)=>[C,0],v=(C,O)=>[0,O];break;case"middleRight":b=!0,p=(C,O)=>[C,O/2],v=(C,O)=>[0,O/2];break;case"bottomRight":m=!0,p=(C,O)=>[C,O],v=(C,O)=>[0,0];break;case"bottomMiddle":p=(C,O)=>[C/2,O],v=(C,O)=>[C/2,0];break;case"bottomLeft":m=!0,p=(C,O)=>[0,O],v=(C,O)=>[C,0];break;case"middleLeft":b=!0,p=(C,O)=>[0,O/2],v=(C,O)=>[C,O/2];break}const y=p(o,l),A=v(o,l);let x=d(...A);const E=q._round(a+x[0]),w=q._round(r+x[1]);let T=1,M=1,D,z;if(i.fromKeyboard)({deltaX:D,deltaY:z}=i);else{const{screenX:C,screenY:O}=i,[L,k]=this.#u;[D,z]=this.screenToPageTranslation(C-L,O-k),this.#u[0]=C,this.#u[1]=O}if([D,z]=g(D/n,z/s),m){const C=Math.hypot(o,l);T=M=Math.max(Math.min(Math.hypot(A[0]-y[0]-D,A[1]-y[1]-z)/C,1/o,1/l),c/o,u/l)}else b?T=Math.max(c,Math.min(1,Math.abs(A[0]-y[0]-D)))/o:M=Math.max(u,Math.min(1,Math.abs(A[1]-y[1]-z)))/l;const H=q._round(o*T),B=q._round(l*M);x=d(...v(H,B));const F=E-x[0],P=w-x[1];this.#r||=[this.x,this.y,this.width,this.height],this.width=H,this.height=B,this.x=F,this.y=P,this.setDims(n*H,s*B),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Ua(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(li.initialize(q._l10n),this.#i=new li(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#j();const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Go(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new Sl({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#v.bind(this),onPinching:this.#L.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#v(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#L(t,i,n){let a=.7*(n/i)+1-.7;if(a===1)return;const r=this.#M(this.rotation),o=(E,w)=>[r[0]*E+r[2]*w,r[1]*E+r[3]*w],[l,c]=this.parentDimensions,u=this.x,h=this.y,d=this.width,f=this.height,g=q.MIN_SIZE/l,p=q.MIN_SIZE/c;a=Math.max(Math.min(a,1/d,1/f),g/d,p/f);const v=q._round(d*a),m=q._round(f*a);if(v===d&&m===f)return;this.#r||=[u,h,d,f];const b=o(d/2,f/2),y=q._round(u+b[0]),A=q._round(h+b[1]),x=o(v/2,m/2);this.x=y-x[0],this.y=A-x[1],this.width=v,this.height=m,this.setDims(l*v,c*m),this.fixAndSetPosition(),this._onResizing()}#B(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(t){const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#U(t)}get isSelected(){return this._uiManager.isSelected(this)}#U(t){const{isMac:i}=fe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),r={capture:!0,passive:!1,signal:a},o=c=>{s.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#U(c),n&&this._onStopDragging()};i&&(this.#A=t.clientX,this.#y=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:d}=c;if(d!==this.#a){Re(c);return}const[f,g]=this.screenToPageTranslation(u-this.#A,h-this.#y);this.#A=u,this.#y=h,this._uiManager.dragSelectedEditors(f,g)},r),window.addEventListener("touchmove",Re,r),window.addEventListener("pointerdown",c=>{c.pointerType===this.#s&&(this.#_||c.isPrimary)&&o(c),Re(c)},r));const l=c=>{if(!this.#a||this.#a===c.pointerId){o(c);return}Re(c)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,n){t.changeParent(this),this.x=i,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,n=this.rotation){const s=this.parentScale,[a,r]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/s,u=i/s,h=this.x*a,d=this.y*r,f=this.width*a,g=this.height*r;switch(n){case 0:return[h+c+o,r-d-u-g+l,h+c+f+o,r-d-u+l];case 90:return[h+u+o,r-d+c+l,h+u+g+o,r-d+c+f+l];case 180:return[h-c-f+o,r-d+u+l,h-c+o,r-d+u+g+l];case 270:return[h-u-g+o,r-d-c-f+l,h-u+o,r-d-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[n,s,a,r]=t,o=a-n,l=r-s;switch(this.rotation){case 0:return[n,i-r,o,l];case 90:return[n,i-s,l,o];case 180:return[a,i-s,o,l];case 270:return[a,i-r,l,o];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:r}=window;return i<r&&s>0&&t<a&&n>0}#j(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#j()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){mt("An editor must be serializable")}static async deserialize(t,i,n){const s=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:n});s.rotation=t.rotation,s.#t=t.accessibilityData;const[a,r]=s.pageDimensions,[o,l,c,u]=s.getRectInCurrentCoords(t.rect,r);return s.x=o/a,s.y=l/r,s.width=c/a,s.height=u/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#F(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#o.classList.remove("hidden"),Go(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#o.children;if(!this.#e){this.#e=Array.from(i);const r=this.#z.bind(this),o=this.#I.bind(this),l=this._uiManager._signal;for(const c of this.#e){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",r,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#V.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",q._l10nResizer[u])}}const n=this.#e[0];let s=0;for(const r of i){if(r===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let o=0;o<s-a;o++)this.#o.append(this.#o.firstChild);else if(a>s)for(let o=0;o<a-s;o++)this.#o.firstChild.before(this.#o.lastChild);let r=0;for(const o of i){const c=this.#e[r++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",q._l10nResizer[c])}}this.#O(0),this.#p=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#z(t){q._resizerKeyboardManager.exec(this,t)}#I(t){this.#p&&t.relatedTarget?.parentNode!==this.#o&&this.#F()}#V(t){this.#h=this.#p?t:""}#O(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#p&&this.#w(this.#h,{deltaX:t,deltaY:i,fromKeyboard:!0})}#F(){this.#p=!1,this.#O(-1),this.#P()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,i){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,i){this.#l=!0;const n=t/i,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:n}=t;let s=this.#S.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(n),this.#S.size===0&&(this.#S=null)},q._telemetryTimeout),this.#S.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const n=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),n.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class KS extends q{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const $f=3285377520,Ie=4294901760,oi=65535;class e0{constructor(t){this.h1=t?t&4294967295:$f,this.h2=t?t&4294967295:$f}update(t){let i,n;if(typeof t=="string"){i=new Uint8Array(t.length*2),n=0;for(let p=0,v=t.length;p<v;p++){const m=t.charCodeAt(p);m<=255?i[n++]=m:(i[n++]=m>>>8,i[n++]=m&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),n=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,r=new Uint32Array(i.buffer,0,s);let o=0,l=0,c=this.h1,u=this.h2;const h=3432918353,d=461845907,f=h&oi,g=d&oi;for(let p=0;p<s;p++)p&1?(o=r[p],o=o*h&Ie|o*f&oi,o=o<<15|o>>>17,o=o*d&Ie|o*g&oi,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=r[p],l=l*h&Ie|l*f&oi,l=l<<15|l>>>17,l=l*d&Ie|l*g&oi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,a){case 3:o^=i[s*4+2]<<16;case 2:o^=i[s*4+1]<<8;case 1:o^=i[s*4],o=o*h&Ie|o*f&oi,o=o<<15|o>>>17,o=o*d&Ie|o*g&oi,s&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&Ie|t*36045&oi,i=i*4283543511&Ie|((i<<16|t>>>16)*2950163797&Ie)>>>16,t^=i>>>1,t=t*444984403&Ie|t*60499&oi,i=i*3301882366&Ie|((i<<16|t>>>16)*3120437893&Ie)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Lu=Object.freeze({map:null,hash:"",transfer:void 0});class td{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const n=this.#i.get(t);return n===void 0?i:Object.assign(i,n)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of this.#i.values())if(i instanceof q)return;this.onAnnotationEditor(null)}}setValue(t,i){const n=this.#i.get(t);let s=!1;if(n!==void 0)for(const[a,r]of Object.entries(i))n[a]!==r&&(s=!0,n[a]=r);else s=!0,this.#i.set(t,i);s&&this.#n(),i instanceof q&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?Yh(this.#i):null}setAll(t){for(const[i,n]of Object.entries(t))this.setValue(i,n)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new i0(this)}get serializable(){if(this.#i.size===0)return Lu;const t=new Map,i=new e0,n=[],s=Object.create(null);let a=!1;for(const[r,o]of this.#i){const l=o instanceof q?o.serialize(!1,s):o;l&&(t.set(r,l),i.update(`${r}:${JSON.stringify(l)}`),a||=!!l.bitmap)}if(a)for(const r of t.values())r.bitmap&&n.push(r.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:n}:Lu}get editorStats(){let t=null;const i=new Map;for(const n of this.#i.values()){if(!(n instanceof q))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;i.has(a)||i.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const r=t[a]||=new Map;for(const[o,l]of Object.entries(s)){if(o==="type")continue;let c=r.get(o);c||(c=new Map,r.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[n,s]of i)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const i of this.#i.values())!(i instanceof q)||!i.annotationElementId||!i.serialize()||t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class i0 extends td{#t;constructor(t){super();const{map:i,hash:n,transfer:s}=t.serializable,a=structuredClone(i,s?{transfer:s}:null);this.#t={map:a,hash:n,transfer:s}}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return tt(this,"modifiedIds",{ids:new Set,hash:""})}}class WS{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(Ut(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=t,r=new FontFace(n,s,a);this.addNativeFontFace(r);try{await r.load(),this.#t.add(n),i?.(t)}catch{Q(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Q(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return tt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(le||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),tt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function i(){for(Ut(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:i,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return tt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function n(A,x){return A.charCodeAt(x)<<24|A.charCodeAt(x+1)<<16|A.charCodeAt(x+2)<<8|A.charCodeAt(x+3)&255}function s(A,x,E,w){const T=A.substring(0,x),M=A.substring(x+E);return T+w+M}let a,r;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(A,x){if(++c>30){Q("Load test font never loaded."),x();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(u.bind(null,A,x))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=s(d,976,h.length,h);const g=16,p=1482184792;let v=n(d,g);for(a=0,r=h.length-3;a<r;a+=4)v=v-p+n(h,a)|0;a<h.length&&(v=v-p+n(h+"XXX",a)|0),d=s(d,g,4,zS(v));const m=`url(data:font/opentype;base64,${btoa(d)});`,b=`@font-face {font-family:"${h}";src:${m}}`;this.insertRule(b);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const A of[t.loadedName,h]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=A,y.append(x)}this._document.body.append(y),u(h,()=>{y.remove(),i.complete()})}}class ZS{constructor(t,{disableFontFace:i=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=i===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${BS(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const n=this.loadedName+"_path_"+i;let s;try{s=t.get(n)}catch(r){Q(`getPathGenerator - ignoring character: "${r}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[i]=a}}const Gr={DATA:1,ERROR:2},jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Kf(){}function ye(e){if(e instanceof mn||e instanceof Nu||e instanceof sr||e instanceof qf||e instanceof Uo||e instanceof Ac)return e;switch(e instanceof Error||typeof e=="object"&&e!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new mn(e.message);case"InvalidPDFException":return new Nu(e.message);case"MissingPDFException":return new sr(e.message);case"PasswordException":return new qf(e.message,e.code);case"UnexpectedResponseException":return new Uo(e.message,e.status);case"UnknownErrorException":return new Ac(e.message,e.details)}return new Ac(e.message,e.toString())}class Ca{#t=new AbortController;constructor(t,i,n){this.sourceName=t,this.targetName=i,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Gr.DATA)s.resolve(t.data);else if(t.callback===Gr.ERROR)s.reject(ye(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(i,t.data).then(function(r){a.postMessage({sourceName:n,targetName:s,callback:Gr.DATA,callbackId:t.callbackId,data:r})},function(r){a.postMessage({sourceName:n,targetName:s,callback:Gr.ERROR,callbackId:t.callbackId,reason:ye(r)})});return}if(t.streamId){this.#i(t);return}i(t.data)}on(t,i){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=i}send(t,i,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},n)}sendWithPromise(t,i,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:i},n)}catch(r){a.reject(r)}return a.promise}sendWithStream(t,i,n,s){const a=this.streamId++,r=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[a]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:o,action:t,streamId:a,data:i,desiredSize:c.desiredSize},s),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,l.postMessage({sourceName:r,targetName:o,stream:jt.PULL,streamId:a,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Ut(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:r,targetName:o,stream:jt.CANCEL,streamId:a,reason:ye(c)}),u.promise}},n)}#i(t){const i=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,r=this,o=this.actionHandler[t.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=u,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:jt.ENQUEUE,streamId:i,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:jt.CLOSE,streamId:i}),delete r.streamSinks[i])},error(c){Ut(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:jt.ERROR,streamId:i,reason:ye(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,Promise.try(o,t.data,l).then(function(){a.postMessage({sourceName:n,targetName:s,stream:jt.START_COMPLETE,streamId:i,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:jt.START_COMPLETE,streamId:i,reason:ye(c)})})}#n(t){const i=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,r=this.streamControllers[i],o=this.streamSinks[i];switch(t.stream){case jt.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(ye(t.reason));break;case jt.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(ye(t.reason));break;case jt.PULL:if(!o){a.postMessage({sourceName:n,targetName:s,stream:jt.PULL_COMPLETE,streamId:i,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||Kf).then(function(){a.postMessage({sourceName:n,targetName:s,stream:jt.PULL_COMPLETE,streamId:i,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:jt.PULL_COMPLETE,streamId:i,reason:ye(c)})});break;case jt.ENQUEUE:if(Ut(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case jt.CLOSE:if(Ut(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#a(r,i);break;case jt.ERROR:Ut(r,"error should have stream controller"),r.controller.error(ye(t.reason)),this.#a(r,i);break;case jt.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(ye(t.reason)),this.#a(r,i);break;case jt.CANCEL:if(!o)break;const l=ye(t.reason);Promise.try(o.onCancel||Kf,l).then(function(){a.postMessage({sourceName:n,targetName:s,stream:jt.CANCEL_COMPLETE,streamId:i,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:jt.CANCEL_COMPLETE,streamId:i,reason:ye(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class n0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,i);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,n){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){mt("Abstract method `_createCanvas` called.")}}class QS extends n0{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const n=this._document.createElement("canvas");return n.width=t,n.height=i,n}}class s0{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){mt("Abstract method `_fetch` called.")}}class a0 extends s0{async _fetch(t){const i=await vl(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):yl(i)}}class r0{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,n,s,a){return"none"}destroy(t=!1){}}class JS extends r0{#t;#e;#i;#n;#a;#s;#l=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#n=t,this.#a=i}get#o(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#i){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=this.#a.createElementNS(_i,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#a.createElementNS(_i,"defs"),t.append(n),n.append(this.#i),this.#a.body.append(t)}return this.#i}#d(t){if(t.length===1){const l=t[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=l[h]/255;const u=c.join(",");return[u,u,u]}const[i,n,s]=t,a=new Array(256),r=new Array(256),o=new Array(256);for(let l=0;l<256;l++)a[l]=i[l]/255,r[l]=n[l]/255,o[l]=s[l]/255;return[a.join(","),r.join(","),o.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(Al(i)?Q('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=i.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[n,s,a]=this.#d(t),r=t.length===1?n:`${n}${s}${a}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#n}_transfer_map_${this.#l++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const c=this.#g(o);return this.#p(n,s,a,c),l}addHCMFilter(t,i){const n=`${t}-${i}`,s="base";let a=this.#u.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(s,a)),!t||!i))return a.url;const r=this.#A(t);t=U.makeHexColor(...r);const o=this.#A(i);if(i=U.makeHexColor(...o),this.#c.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const l=new Array(256);for(let f=0;f<=255;f++){const g=f/255;l[f]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#n}_hcm_filter`,h=a.filter=this.#g(u);this.#p(c,c,c,h),this.#r(h);const d=(f,g)=>{const p=r[f]/255,v=o[f]/255,m=new Array(g+1);for(let b=0;b<=g;b++)m[b]=p+b/g*(v-p);return m.join(",")};return this.#p(d(0,5),d(1,5),d(2,5),h),a.url=this.#h(u),a.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[n]=this.#d([t]),s=`alpha_${n}`;if(i=this.#o.get(s),i)return this.#o.set(t,i),i;const a=`g_${this.#n}_alpha_map_${this.#l++}`,r=this.#h(a);this.#o.set(t,r),this.#o.set(s,r);const o=this.#g(a);return this.#b(n,o),r}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let n,s;if(t?([n]=this.#d([t]),s=`luminosity_${n}`):s="luminosity",i=this.#o.get(s),i)return this.#o.set(t,i),i;const a=`g_${this.#n}_luminosity_map_${this.#l++}`,r=this.#h(a);this.#o.set(t,r),this.#o.set(s,r);const o=this.#g(a);return this.#f(o),t&&this.#b(n,o),r}addHighlightHCMFilter(t,i,n,s,a){const r=`${i}-${n}-${s}-${a}`;let o=this.#u.get(t);if(o?.key===r||(o?(o.filter?.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},this.#u.set(t,o)),!i||!n))return o.url;const[l,c]=[i,n].map(this.#A.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,f]=[s,a].map(this.#A.bind(this));h<u&&([u,h,d,f]=[h,u,f,d]),this.#c.style.color="";const g=(m,b,y)=>{const A=new Array(256),x=(h-u)/y,E=m/255,w=(b-m)/(255*y);let T=0;for(let M=0;M<=y;M++){const D=Math.round(u+M*x),z=E+M*w;for(let H=T;H<=D;H++)A[H]=z;T=D+1}for(let M=T;M<256;M++)A[M]=A[T-1];return A.join(",")},p=`g_${this.#n}_hcm_${t}_filter`,v=o.filter=this.#g(p);return this.#r(v),this.#p(g(d[0],f[0],5),g(d[1],f[1],5),g(d[2],f[2],5),v),o.url=this.#h(p),o.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#l=0)}#f(t){const i=this.#a.createElementNS(_i,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#r(t){const i=this.#a.createElementNS(_i,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#a.createElementNS(_i,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#c.append(i),i}#m(t,i,n){const s=this.#a.createElementNS(_i,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#p(t,i,n,s){const a=this.#a.createElementNS(_i,"feComponentTransfer");s.append(a),this.#m(a,"feFuncR",t),this.#m(a,"feFuncG",i),this.#m(a,"feFuncB",n)}#b(t,i){const n=this.#a.createElementNS(_i,"feComponentTransfer");i.append(n),this.#m(n,"feFuncA",t)}#A(t){return this.#c.style.color=t,Zh(getComputedStyle(this.#c).getPropertyValue("color"))}}class o0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){mt("Abstract method `_fetch` called.")}}class l0 extends o0{async _fetch(t){const i=await vl(t,"arraybuffer");return new Uint8Array(i)}}le&&Q("Please use the `legacy` build in Node.js environments.");async function c0(e){const i=await process.getBuiltinModule("fs").promises.readFile(e);return new Uint8Array(i)}class tx extends r0{}class ex extends n0{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class ix extends s0{async _fetch(t){return c0(t)}}class nx extends o0{async _fetch(t){return c0(t)}}const oe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ku(e,t){if(!t)return;const i=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],i,n),e.clip(s)}class ed{getPattern(){mt("Abstract method `getPattern` called.")}}class sx extends ed{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)i.addColorStop(n[0],n[1]);return i}getPattern(t,i,n,s){let a;if(s===oe.STROKE||s===oe.FILL){const r=i.current.getClippedPathBoundingBox(s,Et(t))||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,c=i.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-r[0],-r[1]),n=U.transform(n,[1,0,0,1,r[0],r[1]]),u.transform(...i.baseTransform),this.matrix&&u.transform(...this.matrix),ku(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=t.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(n);a.setTransform(h)}else ku(t,this._bbox),a=this._createGradient(t);return a}}function _c(e,t,i,n,s,a,r,o){const l=t.coords,c=t.colors,u=e.data,h=e.width*4;let d;l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=a,a=r,r=d),l[n+1]>l[s+1]&&(d=n,n=s,s=d,d=r,r=o,o=d),l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=a,a=r,r=d);const f=(l[i]+t.offsetX)*t.scaleX,g=(l[i+1]+t.offsetY)*t.scaleY,p=(l[n]+t.offsetX)*t.scaleX,v=(l[n+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,b=(l[s+1]+t.offsetY)*t.scaleY;if(g>=b)return;const y=c[a],A=c[a+1],x=c[a+2],E=c[r],w=c[r+1],T=c[r+2],M=c[o],D=c[o+1],z=c[o+2],H=Math.round(g),B=Math.round(b);let F,P,C,O,L,k,j,st;for(let K=H;K<=B;K++){if(K<v){const et=K<g?0:(g-K)/(g-v);F=f-(f-p)*et,P=y-(y-E)*et,C=A-(A-w)*et,O=x-(x-T)*et}else{let et;K>b?et=1:v===b?et=0:et=(v-K)/(v-b),F=p-(p-m)*et,P=E-(E-M)*et,C=w-(w-D)*et,O=T-(T-z)*et}let ht;K<g?ht=0:K>b?ht=1:ht=(g-K)/(g-b),L=f-(f-m)*ht,k=y-(y-M)*ht,j=A-(A-D)*ht,st=x-(x-z)*ht;const Dt=Math.round(Math.min(F,L)),$t=Math.round(Math.max(F,L));let at=h*K+Dt*4;for(let et=Dt;et<=$t;et++)ht=(F-et)/(F-L),ht<0?ht=0:ht>1&&(ht=1),u[at++]=P-(P-k)*ht|0,u[at++]=C-(C-j)*ht|0,u[at++]=O-(O-st)*ht|0,u[at++]=255}}function ax(e,t,i){const n=t.coords,s=t.colors;let a,r;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(a=0;a<l;a++){let u=a*o;for(let h=0;h<c;h++,u++)_c(e,i,n[u],n[u+1],n[u+o],s[u],s[u+1],s[u+o]),_c(e,i,n[u+o+1],n[u+1],n[u+o],s[u+o+1],s[u+1],s[u+o])}break;case"triangles":for(a=0,r=n.length;a<r;a+=3)_c(e,i,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class rx extends ed{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,i,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/h,g=u/d,p={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/g},v=h+2*2,m=d+2*2,b=n.getCanvas("mesh",v,m),y=b.context,A=y.createImageData(h,d);if(i){const E=A.data;for(let w=0,T=E.length;w<T;w+=4)E[w]=i[0],E[w+1]=i[1],E[w+2]=i[2],E[w+3]=255}for(const E of this._figures)ax(A,E,p);return y.putImageData(A,2,2),{canvas:b.canvas,offsetX:o-2*f,offsetY:l-2*g,scaleX:f,scaleY:g}}getPattern(t,i,n,s){ku(t,this._bbox);let a;if(s===oe.SHADING)a=U.singularValueDecompose2dScale(Et(t));else if(a=U.singularValueDecompose2dScale(i.baseTransform),this.matrix){const o=U.singularValueDecompose2dScale(this.matrix);a=[a[0]*o[0],a[1]*o[1]]}const r=this._createMeshCanvas(a,s===oe.SHADING?null:this._background,i.cachedCanvases);return s!==oe.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class ox extends ed{getPattern(){return"hotpink"}}function lx(e){switch(e[0]){case"RadialAxial":return new sx(e);case"Mesh":return new rx(e);case"Dummy":return new ox}throw new Error(`Unknown IR type: ${e[0]}`)}const Wf={COLORED:1,UNCOLORED:2};class id{static MAX_PATTERN_SIZE=3e3;constructor(t,i,n,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:i,operatorList:n,paintType:s,tilingType:a,color:r,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),bl("TilingType: "+a);const u=i[0],h=i[1],d=i[2],f=i[3],g=d-u,p=f-h,v=U.singularValueDecompose2dScale(this.matrix),m=U.singularValueDecompose2dScale(this.baseTransform),b=v[0]*m[0],y=v[1]*m[1];let A=g,x=p,E=!1,w=!1;const T=Math.ceil(l*b),M=Math.ceil(c*y),D=Math.ceil(g*b),z=Math.ceil(p*y);T>=D?A=l:E=!0,M>=z?x=c:w=!0;const H=this.getSizeAndScale(A,this.ctx.canvas.width,b),B=this.getSizeAndScale(x,this.ctx.canvas.height,y),F=t.cachedCanvases.getCanvas("pattern",H.size,B.size),P=F.context,C=o.createCanvasGraphics(P);if(C.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(C,s,r),P.translate(-H.scale*u,-B.scale*h),C.transform(H.scale,0,0,B.scale,0,0),P.save(),this.clipBbox(C,u,h,d,f),C.baseTransform=Et(C.ctx),C.executeOperatorList(n),C.endDrawing(),P.restore(),E||w){const O=F.canvas;E&&(A=l),w&&(x=c);const L=this.getSizeAndScale(A,this.ctx.canvas.width,b),k=this.getSizeAndScale(x,this.ctx.canvas.height,y),j=L.size,st=k.size,K=t.cachedCanvases.getCanvas("pattern-workaround",j,st),ht=K.context,Dt=E?Math.floor(g/l):0,$t=w?Math.floor(p/c):0;for(let at=0;at<=Dt;at++)for(let et=0;et<=$t;et++)ht.drawImage(O,j*at,st*et,j,st,0,0,j,st);return{canvas:K.canvas,scaleX:L.scale,scaleY:k.scale,offsetX:u,offsetY:h}}return{canvas:F.canvas,scaleX:H.scale,scaleY:B.scale,offsetX:u,offsetY:h}}getSizeAndScale(t,i,n){const s=Math.max(id.MAX_PATTERN_SIZE,i);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,i,n,s,a){const r=s-i,o=a-n;t.ctx.rect(i,n,r,o),t.current.updateRectMinMax(Et(t.ctx),[i,n,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,n){const s=t.ctx,a=t.current;switch(i){case Wf.COLORED:const r=this.ctx;s.fillStyle=r.fillStyle,s.strokeStyle=r.strokeStyle,a.fillColor=r.fillStyle,a.strokeColor=r.strokeStyle;break;case Wf.UNCOLORED:const o=U.makeHexColor(n[0],n[1],n[2]);s.fillStyle=o,s.strokeStyle=o,a.fillColor=o,a.strokeColor=o;break;default:throw new kS(`Unsupported paint type: ${i}`)}}getPattern(t,i,n,s){let a=n;s!==oe.SHADING&&(a=U.transform(a,i.baseTransform),this.matrix&&(a=U.transform(a,this.matrix)));const r=this.createPatternCanvas(i);let o=new DOMMatrix(a);o=o.translate(r.offsetX,r.offsetY),o=o.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(o),l}}function cx({src:e,srcPos:t=0,dest:i,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:r=!1}){const o=fe.isLittleEndian?4278190080:255,[l,c]=r?[a,o]:[o,a],u=n>>3,h=n&7,d=e.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const v=t+u;t<v;t++){const m=t<d?e[t]:255;i[f++]=m&128?c:l,i[f++]=m&64?c:l,i[f++]=m&32?c:l,i[f++]=m&16?c:l,i[f++]=m&8?c:l,i[f++]=m&4?c:l,i[f++]=m&2?c:l,i[f++]=m&1?c:l}if(h===0)continue;const p=t<d?e[t++]:255;for(let v=0;v<h;v++)i[f++]=p&1<<7-v?c:l}return{srcPos:t,destPos:f}}const Zf=16,Qf=100,ux=15,Jf=10,tg=1e3,Se=16;function hx(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},e.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},e.transform=function(n,s,a,r,o,l){t.transform(n,s,a,r,o,l),this.__originalTransform(n,s,a,r,o,l)},e.setTransform=function(n,s,a,r,o,l){t.setTransform(n,s,a,r,o,l),this.__originalSetTransform(n,s,a,r,o,l)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(n){t.rotate(n),this.__originalRotate(n)},e.clip=function(n){t.clip(n),this.__originalClip(n)},e.moveTo=function(i,n){t.moveTo(i,n),this.__originalMoveTo(i,n)},e.lineTo=function(i,n){t.lineTo(i,n),this.__originalLineTo(i,n)},e.bezierCurveTo=function(i,n,s,a,r,o){t.bezierCurveTo(i,n,s,a,r,o),this.__originalBezierCurveTo(i,n,s,a,r,o)},e.rect=function(i,n,s,a){t.rect(i,n,s,a),this.__originalRect(i,n,s,a)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class dx{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,i,n)):(s=this.canvasFactory.create(i,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Vr(e,t,i,n,s,a,r,o,l,c){const[u,h,d,f,g,p]=Et(e);if(h===0&&d===0){const b=r*u+g,y=Math.round(b),A=o*f+p,x=Math.round(A),E=(r+l)*u+g,w=Math.abs(Math.round(E)-y)||1,T=(o+c)*f+p,M=Math.abs(Math.round(T)-x)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(f),y,x),e.drawImage(t,i,n,s,a,0,0,w,M),e.setTransform(u,h,d,f,g,p),[w,M]}if(u===0&&f===0){const b=o*d+g,y=Math.round(b),A=r*h+p,x=Math.round(A),E=(o+c)*d+g,w=Math.abs(Math.round(E)-y)||1,T=(r+l)*h+p,M=Math.abs(Math.round(T)-x)||1;return e.setTransform(0,Math.sign(h),Math.sign(d),0,y,x),e.drawImage(t,i,n,s,a,0,0,M,w),e.setTransform(u,h,d,f,g,p),[M,w]}e.drawImage(t,i,n,s,a,r,o,l,c);const v=Math.hypot(u,h),m=Math.hypot(d,f);return[v*l,m*c]}function fx(e){const{width:t,height:i}=e;if(t>tg||i>tg)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let r=new Uint8Array(a*(i+1)),o,l,c;const u=t+7&-8;let h=new Uint8Array(u*i),d=0;for(const m of e.data){let b=128;for(;b>0;)h[d++]=m&b?0:255,b>>=1}let f=0;for(d=0,h[d]!==0&&(r[0]=1,++f),l=1;l<t;l++)h[d]!==h[d+1]&&(r[l]=h[d]?2:1,++f),d++;for(h[d]!==0&&(r[l]=2,++f),o=1;o<i;o++){d=o*u,c=o*a,h[d-u]!==h[d]&&(r[c]=h[d]?1:8,++f);let m=(h[d]?4:0)+(h[d-u]?8:0);for(l=1;l<t;l++)m=(m>>2)+(h[d+1]?4:0)+(h[d-u+1]?8:0),s[m]&&(r[c+l]=s[m],++f),d++;if(h[d-u]!==h[d]&&(r[c+l]=h[d]?2:4,++f),f>n)return null}for(d=u*(i-1),c=o*a,h[d]!==0&&(r[c]=8,++f),l=1;l<t;l++)h[d]!==h[d+1]&&(r[c+l]=h[d]?4:8,++f),d++;if(h[d]!==0&&(r[c+l]=4,++f),f>n)return null;const g=new Int32Array([0,a,-1,0,-a,0,0,0,1]),p=new Path2D;for(o=0;f&&o<=i;o++){let m=o*a;const b=m+t;for(;m<b&&!r[m];)m++;if(m===b)continue;p.moveTo(m%a,o);const y=m;let A=r[m];do{const x=g[A];do m+=x;while(!r[m]);const E=r[m];E!==5&&E!==10?(A=E,r[m]=0):(A=E&51*A>>4,r[m]&=A>>2|A<<2),p.lineTo(m%a,m/a|0),r[m]||--f}while(y!==m);--o}return h=null,r=null,function(m){m.save(),m.scale(1/t,-1/i),m.translate(0,-i),m.fill(p),m.beginPath(),m.restore()}}class eg{constructor(t,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Qb,this.textMatrixScale=1,this.fontMatrix=Du,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=re.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,i])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,i){this.x=t,this.y=i}updatePathMinMax(t,i,n){[i,n]=U.applyTransform([i,n],t),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,i){const n=U.applyTransform(i,t),s=U.applyTransform(i.slice(2),t),a=U.applyTransform([i[0],i[3]],t),r=U.applyTransform([i[2],i[1]],t);this.minX=Math.min(this.minX,n[0],s[0],a[0],r[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],r[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],r[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],r[1])}updateScalingPathMinMax(t,i){U.scaleMinMax(t,i),this.minX=Math.min(this.minX,i[0]),this.minY=Math.min(this.minY,i[1]),this.maxX=Math.max(this.maxX,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(t,i,n,s,a,r,o,l,c,u){const h=U.bezierBoundingBox(i,n,s,a,r,o,l,c,u);u||this.updateRectMinMax(t,h)}getPathBoundingBox(t=oe.FILL,i=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===oe.STROKE){i||mt("Stroke bounding box must include transform.");const s=U.singularValueDecompose2dScale(i),a=s[0]*this.lineWidth/2,r=s[1]*this.lineWidth/2;n[0]-=a,n[1]-=r,n[2]+=a,n[3]+=r}return n}updateClipFromPath(){const t=U.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=oe.FILL,i=null){return U.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function ig(e,t){if(t instanceof ImageData){e.putImageData(t,0,0);return}const i=t.height,n=t.width,s=i%Se,a=(i-s)/Se,r=s===0?a:a+1,o=e.createImageData(n,Se);let l=0,c;const u=t.data,h=o.data;let d,f,g,p;if(t.kind===co.GRAYSCALE_1BPP){const v=u.byteLength,m=new Uint32Array(h.buffer,0,h.byteLength>>2),b=m.length,y=n+7>>3,A=4294967295,x=fe.isLittleEndian?4278190080:255;for(d=0;d<r;d++){for(g=d<a?Se:s,c=0,f=0;f<g;f++){const E=v-l;let w=0;const T=E>y?n:E*8-7,M=T&-8;let D=0,z=0;for(;w<M;w+=8)z=u[l++],m[c++]=z&128?A:x,m[c++]=z&64?A:x,m[c++]=z&32?A:x,m[c++]=z&16?A:x,m[c++]=z&8?A:x,m[c++]=z&4?A:x,m[c++]=z&2?A:x,m[c++]=z&1?A:x;for(;w<T;w++)D===0&&(z=u[l++],D=128),m[c++]=z&D?A:x,D>>=1}for(;c<b;)m[c++]=0;e.putImageData(o,0,d*Se)}}else if(t.kind===co.RGBA_32BPP){for(f=0,p=n*Se*4,d=0;d<a;d++)h.set(u.subarray(l,l+p)),l+=p,e.putImageData(o,0,f),f+=Se;d<r&&(p=n*s*4,h.set(u.subarray(l,l+p)),e.putImageData(o,0,f))}else if(t.kind===co.RGB_24BPP)for(g=Se,p=n*g,d=0;d<r;d++){for(d>=a&&(g=s,p=n*g),c=0,f=p;f--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;e.putImageData(o,0,d*Se)}else throw new Error(`bad image kind: ${t.kind}`)}function ng(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}const i=t.height,n=t.width,s=i%Se,a=(i-s)/Se,r=s===0?a:a+1,o=e.createImageData(n,Se);let l=0;const c=t.data,u=o.data;for(let h=0;h<r;h++){const d=h<a?Se:s;({srcPos:l}=cx({src:c,srcPos:l,dest:u,width:n,height:d,nonBlackColor:0})),e.putImageData(o,0,h*Se)}}function ma(e,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)e[n]!==void 0&&(t[n]=e[n]);e.setLineDash!==void 0&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function qr(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0),!le){const{filter:t}=e;t!=="none"&&t!==""&&(e.filter="none")}}function sg(e,t){if(t)return!0;const i=U.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*qs.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}const gx=["butt","round","square"],px=["miter","round","bevel"],mx={},ag={};class Os{constructor(t,i,n,s,a,{optionalContentConfig:r,markedContentStack:o=null},l,c){this.ctx=t,this.current=new eg(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=r,this.cachedCanvases=new dx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}beginDrawing({transform:t,viewport:i,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,r),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",a,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Et(this.compositeCtx))}this.ctx.save(),qr(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Et(this.ctx)}executeOperatorList(t,i,n,s){const a=t.argsArray,r=t.fnArray;let o=i||0;const l=a.length;if(l===o)return o;const c=l-o>Jf&&typeof n=="function",u=c?Date.now()+ux:0;let h=0;const d=this.commonObjs,f=this.objs;let g;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,n),o;if(g=r[o],g!==ei.dependency)this[g].apply(this,a[o]);else for(const p of a[o]){const v=p.startsWith("g_")?d:f;if(!v.has(p))return v.get(p,n),o}if(o++,o===l)return o;if(c&&++h>Jf){if(Date.now()>u)return n(),o;h=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(i[0],i[1]),1),r=Math.max(Math.hypot(i[2],i[3]),1),o=n,l=s,c="prescale1",u,h;for(;a>2&&o>1||r>2&&l>1;){let d=o,f=l;a>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/d),r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/f),u=this.cachedCanvases.getCanvas(c,d,f),h=u.context,h.clearRect(0,0,d,f),h.drawImage(t,0,0,o,l,0,0,d,f),t=u.canvas,o=d,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const i=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,r=this.current.patternFill,o=Et(i);let l,c,u,h;if((t.bitmap||t.data)&&t.count>1){const T=t.bitmap||t.data.buffer;c=JSON.stringify(r?o:[o.slice(0,4),a]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const M=l.get(c);if(M&&!r){const D=Math.round(Math.min(o[0],o[2])+o[4]),z=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:D,offsetY:z}}u=M}u||(h=this.cachedCanvases.getCanvas("maskCanvas",n,s),ng(h.context,t));let d=U.transform(o,[1/n,0,0,-1/s,0,0]);d=U.transform(d,[1,0,0,1,0,-s]);const[f,g,p,v]=U.getAxialAlignedBoundingBox([0,0,n,s],d),m=Math.round(p-f)||1,b=Math.round(v-g)||1,y=this.cachedCanvases.getCanvas("fillCanvas",m,b),A=y.context,x=f,E=g;A.translate(-x,-E),A.transform(...d),u||(u=this._scaleImage(h.canvas,ri(A)),u=u.img,l&&r&&l.set(c,u)),A.imageSmoothingEnabled=sg(Et(A),t.interpolate),Vr(A,u,0,0,u.width,u.height,0,0,n,s),A.globalCompositeOperation="source-in";const w=U.transform(ri(A),[1,0,0,1,-x,-E]);return A.fillStyle=r?a.getPattern(i,this,w,oe.FILL):a,A.fillRect(0,0,n,s),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,y.canvas)),{canvas:y.canvas,offsetX:Math.round(x),offsetY:Math.round(E)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=gx[t]}setLineJoin(t){this.ctx.lineJoin=px[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,i){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=i)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,n]of t)switch(i){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,i);this.suspendedCtx=this.ctx,this.ctx=s.context;const a=this.ctx;a.setTransform(...Et(this.suspendedCtx)),ma(this.suspendedCtx,a),hx(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ma(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,n,s){const a=s[0],r=s[1],o=s[2]-a,l=s[3]-r;o===0||l===0||(this.genericComposeSMask(i.context,n,o,l,i.subtype,i.backdrop,i.transferMap,a,r,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,i,n,s,a,r,o,l,c,u,h){let d=t.canvas,f=l-u,g=c-h;if(r){const v=U.makeHexColor(...r);if(f<0||g<0||f+n>d.width||g+s>d.height){const m=this.cachedCanvases.getCanvas("maskExtension",n,s),b=m.context;b.drawImage(d,-f,-g),b.globalCompositeOperation="destination-atop",b.fillStyle=v,b.fillRect(0,0,n,s),b.globalCompositeOperation="source-over",d=m.canvas,f=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(f,g,n,s),t.clip(m),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(f,g,n,s),t.restore()}}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?i.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(o));const p=new Path2D;p.rect(l,c,n,s),i.clip(p),i.globalCompositeOperation="destination-in",i.drawImage(d,f,g,n,s,l,c,n,s),i.restore()}save(){this.inSMaskMode?(ma(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ma(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,i,n,s,a,r){this.ctx.transform(t,i,n,s,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,n){const s=this.ctx,a=this.current;let r=a.x,o=a.y,l,c;const u=Et(s),h=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,d=h?n.slice(0):null;for(let f=0,g=0,p=t.length;f<p;f++)switch(t[f]|0){case ei.rectangle:r=i[g++],o=i[g++];const v=i[g++],m=i[g++],b=r+v,y=o+m;s.moveTo(r,o),v===0||m===0?s.lineTo(b,y):(s.lineTo(b,o),s.lineTo(b,y),s.lineTo(r,y)),h||a.updateRectMinMax(u,[r,o,b,y]),s.closePath();break;case ei.moveTo:r=i[g++],o=i[g++],s.moveTo(r,o),h||a.updatePathMinMax(u,r,o);break;case ei.lineTo:r=i[g++],o=i[g++],s.lineTo(r,o),h||a.updatePathMinMax(u,r,o);break;case ei.curveTo:l=r,c=o,r=i[g+4],o=i[g+5],s.bezierCurveTo(i[g],i[g+1],i[g+2],i[g+3],r,o),a.updateCurvePathMinMax(u,l,c,i[g],i[g+1],i[g+2],i[g+3],r,o,d),g+=6;break;case ei.curveTo2:l=r,c=o,s.bezierCurveTo(r,o,i[g],i[g+1],i[g+2],i[g+3]),a.updateCurvePathMinMax(u,l,c,r,o,i[g],i[g+1],i[g+2],i[g+3],d),r=i[g+2],o=i[g+3],g+=4;break;case ei.curveTo3:l=r,c=o,r=i[g+2],o=i[g+3],s.bezierCurveTo(i[g],i[g+1],r,o,r,o),a.updateCurvePathMinMax(u,l,c,i[g],i[g+1],r,o,r,o,d),g+=4;break;case ei.closePath:s.closePath();break}h&&a.updateScalingPathMinMax(u,d),a.setCurrentPoint(r,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const i=this.ctx,n=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(i.save(),i.strokeStyle=n.getPattern(i,this,ri(i),oe.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const i=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let a=!1;s&&(i.save(),i.fillStyle=n.getPattern(i,this,ri(i),oe.FILL),a=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),a&&i.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mx}eoClip(){this.pendingClip=ag}beginText(){this.current.textMatrix=Qb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,i=this.ctx;if(t===void 0){i.beginPath();return}const n=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:r,y:o,fontSize:l,path:c}of t)n.addPath(c,new DOMMatrix(a).preMultiplySelf(s).translate(r,o).scale(l,-l));i.clip(n),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,i){const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||Du,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Q("Invalid font matrix for font "+t),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;const a=n.loadedName||"sans-serif",r=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const l=n.italic?"italic":"normal";let c=i;i<Zf?c=Zf:i>Qf&&(c=Qf),this.current.fontSizeScale=i/c,this.ctx.font=`${l} ${o} ${c}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,i){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}setTextMatrix(t,i,n,s,a,r){this.current.textMatrix=[t,i,n,s,a,r],this.current.textMatrixScale=Math.hypot(t,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#i(t,i,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(i)),s}paintChar(t,i,n,s,a){const r=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&re.FILL_STROKE_MASK,d=!!(c&re.ADD_TO_PATH_FLAG),f=o.patternFill&&!l.missingFile,g=o.patternStroke&&!l.missingFile;let p;if((l.disableFontFace||d||f||g)&&(p=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f||g){if(r.save(),r.translate(i,n),r.scale(u,-u),h===re.FILL||h===re.FILL_STROKE)if(s){const v=r.getTransform();r.setTransform(...s),r.fill(this.#i(p,v,s))}else r.fill(p);if(h===re.STROKE||h===re.FILL_STROKE)if(a){const v=r.getTransform();r.setTransform(...a),r.stroke(this.#i(p,v,a))}else r.lineWidth/=u,r.stroke(p);r.restore()}else(h===re.FILL||h===re.FILL_STROKE)&&r.fillText(t,i,n),(h===re.STROKE||h===re.FILL_STROKE)&&r.strokeText(t,i,n);d&&(this.pendingTextPaths||=[]).push({transform:Et(r),x:i,y:n,fontSize:u,path:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<i.length;s+=4)if(i[s]>0&&i[s]<255){n=!0;break}return tt(this,"isFontSubpixelAAEnabled",n)}showText(t){const i=this.current,n=i.font;if(n.isType3Font)return this.showType3Text(t);const s=i.fontSize;if(s===0)return;const a=this.ctx,r=i.fontSizeScale,o=i.charSpacing,l=i.wordSpacing,c=i.fontDirection,u=i.textHScale*c,h=t.length,d=n.vertical,f=d?1:-1,g=n.defaultVMetrics,p=s*i.fontMatrix[0],v=i.textRenderingMode===re.FILL&&!n.disableFontFace&&!i.patternFill;a.save(),a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),c>0?a.scale(u,-1):a.scale(u,1);let m,b;if(i.patternFill){a.save();const w=i.fillColor.getPattern(a,this,ri(a),oe.FILL);m=Et(a),a.restore(),a.fillStyle=w}if(i.patternStroke){a.save();const w=i.strokeColor.getPattern(a,this,ri(a),oe.STROKE);b=Et(a),a.restore(),a.strokeStyle=w}let y=i.lineWidth;const A=i.textMatrixScale;if(A===0||y===0){const w=i.textRenderingMode&re.FILL_STROKE_MASK;(w===re.STROKE||w===re.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=A;if(r!==1&&(a.scale(r,r),y/=r),a.lineWidth=y,n.isInvalidPDFjsFont){const w=[];let T=0;for(const M of t)w.push(M.unicode),T+=M.width;a.fillText(w.join(""),0,0),i.x+=T*p*u,a.restore(),this.compose();return}let x=0,E;for(E=0;E<h;++E){const w=t[E];if(typeof w=="number"){x+=f*w*s/1e3;continue}let T=!1;const M=(w.isSpace?l:0)+o,D=w.fontChar,z=w.accent;let H,B,F=w.width;if(d){const C=w.vmetric||g,O=-(w.vmetric?C[1]:F*.5)*p,L=C[2]*p;F=C?-C[0]:F,H=O/r,B=(x+L)/r}else H=x/r,B=0;if(n.remeasure&&F>0){const C=a.measureText(D).width*1e3/s*r;if(F<C&&this.isFontSubpixelAAEnabled){const O=F/C;T=!0,a.save(),a.scale(O,1),H/=O}else F!==C&&(H+=(F-C)/2e3*s/r)}if(this.contentVisible&&(w.isInFont||n.missingFile)){if(v&&!z)a.fillText(D,H,B);else if(this.paintChar(D,H,B,m,b),z){const C=H+s*z.offset.x/r,O=B-s*z.offset.y/r;this.paintChar(z.fontChar,C,O,m,b)}}const P=d?F*p-M*c:F*p+M*c;x+=P,T&&a.restore()}d?i.y-=x:i.x+=x*u,a.restore(),this.compose()}showType3Text(t){const i=this.ctx,n=this.current,s=n.font,a=n.fontSize,r=n.fontDirection,o=s.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*r,h=n.fontMatrix||Du,d=t.length,f=n.textRenderingMode===re.INVISIBLE;let g,p,v,m;if(!(f||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...n.textMatrix),i.translate(n.x,n.y),i.scale(u,r),g=0;g<d;++g){if(p=t[g],typeof p=="number"){m=o*p*a/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}const b=(p.isSpace?c:0)+l,y=s.charProcOperatorList[p.operatorListId];if(!y){Q(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),i.scale(a,a),i.transform(...h),this.executeOperatorList(y),this.restore()),v=U.applyTransform([p.width,0],h)[0]*a+b,i.translate(v,0),n.x+=v*u}i.restore(),this.processingType3=null}}setCharWidth(t,i){}setCharWidthAndBounds(t,i,n,s,a,r){this.ctx.rect(n,s,a-n,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let i;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||Et(this.ctx),a={createCanvasGraphics:r=>new Os(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new id(t,n,this.ctx,a,s)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,i,n){this.ctx.strokeStyle=this.current.strokeColor=U.makeHexColor(t,i,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i,n){this.ctx.fillStyle=this.current.fillColor=U.makeHexColor(t,i,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=lx(this.getObject(t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(t){if(!this.contentVisible)return;const i=this.ctx;this.save();const n=this._getPattern(t);i.fillStyle=n.getPattern(i,this,ri(i),oe.SHADING);const s=ri(i);if(s){const{width:a,height:r}=i.canvas,[o,l,c,u]=U.getAxialAlignedBoundingBox([0,0,a,r],s);this.ctx.fillRect(o,l,c-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(t,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Et(this.ctx),i)){const n=i[2]-i[0],s=i[3]-i[1];this.ctx.rect(i[0],i[1],n,s),this.current.updateRectMinMax(Et(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||bl("TODO: Support non-isolated groups."),t.knockout&&Q("Knockout groups not supported.");const n=Et(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=U.getAxialAlignedBoundingBox(t.bbox,Et(i));const a=[0,0,i.canvas.width,i.canvas.height];s=U.intersect(s,a)||[0,0,0,0];const r=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-r,1),c=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,l,c),d=h.context;d.translate(-r,-o),d.transform(...n),t.smask?this.smaskStack.push({canvas:h.canvas,context:d,offsetX:r,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(r,o),i.save()),ma(i,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Et(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=U.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,i,n,s,a){if(this.#t(),qr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const r=i[2]-i[0],o=i[3]-i[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=r,i[3]=o;const[l,c]=U.singularValueDecompose2dScale(Et(this.ctx)),{viewportScale:u}=this,h=Math.ceil(r*this.outputScaleX*u),d=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),qr(this.ctx)}else qr(this.ctx),this.endPath(),this.ctx.rect(i[0],i[1],r,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new eg(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(t.data,t),t.count=i;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=fx(t)),s.compiled)){s.compiled(n);return}const a=this._createMaskCanvas(t),r=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,n=0,s=0,a,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=Et(o);o.transform(i,n,s,a,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,h=r.length;u<h;u+=2){const d=U.transform(l,[i,n,s,a,r[u],r[u+1]]),[f,g]=U.applyTransform([0,0],d);o.drawImage(c.canvas,f,g)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const i=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:r,width:o,height:l,transform:c}=a,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save();const d=this.getObject(r,a);ng(h,d),h.globalCompositeOperation="source-in",h.fillStyle=s?n.getPattern(h,this,ri(i),oe.FILL):n,h.fillRect(0,0,o,l),h.restore(),i.save(),i.transform(...c),i.scale(1,-1),Vr(i,u.canvas,0,0,o,l,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const i=this.getObject(t);if(!i){Q("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(t,i,n,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Q("Dependent image isn't ready yet");return}const r=a.width,o=a.height,l=[];for(let c=0,u=s.length;c<u;c+=2)l.push({transform:[i,0,0,n,s[c],s[c+1]],x:0,y:0,w:r,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(i,0,0),r.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const i=t.width,n=t.height,s=this.ctx;if(this.save(),!le){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/i,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",i,n).context;ig(l,t),a=this.applyTransferMapsToCanvas(l)}const r=this._scaleImage(a,ri(s));s.imageSmoothingEnabled=sg(Et(s),t.interpolate),Vr(s,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,i){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",a,r).context;ig(l,t),s=this.applyTransferMapsToCanvas(l)}for(const a of i)n.save(),n.transform(...a.transform),n.scale(1,-1),Vr(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,i){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(i||(this.pendingClip===ag?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Et(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:n,c:s,d:a}=this.ctx.getTransform();let r,o;if(n===0&&s===0){const l=Math.abs(i),c=Math.abs(a);if(l===c)if(t===0)r=o=1/l;else{const u=l*t;r=o=u<1?1/u:1}else if(t===0)r=1/l,o=1/c;else{const u=l*t,h=c*t;r=u<1?1/u:1,o=h<1?1/h:1}}else{const l=Math.abs(i*a-n*s),c=Math.hypot(i,n),u=Math.hypot(s,a);if(t===0)r=u/l,o=c/l;else{const h=t*l;r=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:i}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(i.lineWidth=n||1,s===1&&a===1){i.stroke();return}const r=i.getLineDash();if(t&&i.save(),i.scale(s,a),r.length>0){const o=Math.max(s,a);i.setLineDash(r.map(l=>l/o)),i.lineDashOffset/=o}i.stroke(),t&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const e in ei)Os.prototype[e]!==void 0&&(Os.prototype[ei[e]]=Os.prototype[e]);class Ga{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class bx{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return Yh(this.#t)}has(t){return this.#t.has(t)}}const us=Symbol("INTERNAL");class yx{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:i,intent:n,usage:s,rbGroups:a}){this.#t=!!(t&Ee.DISPLAY),this.#e=!!(t&Ee.PRINT),this.name=i,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,n=!1){t!==us&&mt("Internal method `_setVisible` called."),this.#i=n,this.#n=i}}class vx{#t=null;#e=new Map;#i=null;#n=null;constructor(t,i=Ee.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new yx(i,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(us,!1);for(const n of t.on)this.#e.get(n)._setVisible(us,!0);for(const n of t.off)this.#e.get(n)._setVisible(us,!1);this.#i=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const n=t[0];for(let s=1;s<i;s++){const a=t[s];let r;if(Array.isArray(a))r=this.#a(a);else if(this.#e.has(a))r=this.#e.get(a).visible;else return Q(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return bl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Q(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return Q(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return Q(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return Q(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return Q(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return Q(`Unknown optional content policy ${t.policy}.`),!0}return Q(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,n=!0){const s=this.#e.get(t);if(!s){Q(`Optional content group not found: ${t}`);return}if(n&&i&&s.rbGroups.length)for(const a of s.rbGroups)for(const r of a)r!==t&&this.#e.get(r)?._setVisible(us,!1,!0);s._setVisible(us,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=this.#e.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,i);break;case"OFF":this.setVisibility(s,!1,i);break;case"Toggle":this.setVisibility(s,!a.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?Yh(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new e0;for(const[i,n]of this.#e)t.update(`${i}:${n.visible}`);return this.#t=t.hexdigest()}}class Ax{constructor(t,{disableRange:i=!1,disableStream:n=!1}){Ut(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:r,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,a?.length>0){const l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!i,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});Ut(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Ut(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Sx(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new xx(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Sx{constructor(t,i,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Wh(s)?s:null,this._queuedChunks=i||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class xx{constructor(t,i,n){this._stream=t,this._begin=i,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function _x(e){let t=!0,i=n("filename\\*","i").exec(e);if(i){i=i[1];let u=o(i);return u=unescape(u),u=l(u),u=c(u),a(u)}if(i=r(e),i){const u=c(i);return a(u)}if(i=n("filename","i").exec(e),i){i=i[1];let u=o(i);return u=c(u),a(u)}function n(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(u,{fatal:!0}),f=yl(h);h=d.decode(f),t=!1}catch{}}return h}function a(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function r(u){const h=[];let d;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(u))!==null;){let[,p,v,m]=d;if(p=parseInt(p,10),p in h){if(p===0)break;continue}h[p]=[v,m]}const g=[];for(let p=0;p<h.length&&p in h;++p){let[v,m]=h[p];m=o(m),v&&(m=unescape(m),p===0&&(m=l(m))),g.push(m)}return g.join("")}function o(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){const h=u.indexOf("'");if(h===-1)return u;const d=u.slice(0,h),g=u.slice(h+1).replace(/^[^']*'/,"");return s(d,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,g){if(f==="q"||f==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,v){return String.fromCharCode(parseInt(v,16))}),s(d,g);try{g=atob(g)}catch{}return s(d,g)})}return""}function u0(e,t){const i=new Headers;if(!e||!t||typeof t!="object")return i;for(const n in t){const s=t[n];s!==void 0&&i.append(n,s)}return i}function xl(e){try{return new URL(e).origin}catch{}return null}function h0({responseHeaders:e,isHttp:t,rangeChunkSize:i,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*i)||n||!t||e.get("Accept-Ranges")!=="bytes"||(e.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function d0(e){const t=e.get("Content-Disposition");if(t){let i=_x(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Wh(i))return i}return null}function _l(e,t){return e===404||e===0&&t.startsWith("file:")?new sr('Missing PDF "'+t+'".'):new Uo(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function f0(e){return e===200||e===206}function g0(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function p0(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Q(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class rg{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=u0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ut(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new wx(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new Ex(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class wx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const n=new Headers(t.headers),s=i.url;fetch(s,g0(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=xl(a.url),!f0(a.status))throw _l(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const r=a.headers,{allowRangeRequests:o,suggestedLength:l}=h0({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=d0(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:p0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Ex{constructor(t,i,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${i}-${n-1}`);const r=s.url;fetch(r,g0(a,this._withCredentials,this._abortController)).then(o=>{const l=xl(o.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!f0(o.status))throw _l(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:p0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const wc=200,Ec=206;function Cx(e){const t=e.response;return typeof t!="string"?t:yl(t).buffer}class Tx{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=u0(this.isHttp,i),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[a,r]of this.headers)i.setRequestHeader(a,r);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Ec):s.expectedStatus=wc,i.responseType="arraybuffer",Ut(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,n),i.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,i.send(null),n}onProgress(t,i){const n=this.pendingRequests[t];n&&n.onProgress?.(i)}onStateChange(t,i){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||wc;if(!(a===wc&&n.expectedStatus===Ec)&&a!==n.expectedStatus){n.onError(s.status);return}const o=Cx(s);if(a===Ec){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:o}):(Q('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class Mx{constructor(t){this._source=t,this._manager=new Tx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Ut(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Rx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const n=new Dx(this._manager,t,i);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Rx{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=xl(i.responseURL);const n=i.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:r}=h0({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=d0(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=_l(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Dx{constructor(t,i,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=xl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=_l(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Nx=/^[a-z][a-z0-9\-+.]+:/i;function Ox(e){if(Nx.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}class Lx{constructor(t){this.source=t,this.url=Ox(t.url),Ut(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ut(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kx(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new zx(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class kx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new sr(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class zx{constructor(t,i,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:i,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Px=1e5,be=30,jx=.8;class he{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#l=0;#o=0;#u=null;#c=null;#d=0;#h=0;#f=Object.create(null);#r=[];#g=null;#m=[];#p=new WeakMap;#b=null;static#A=new Map;static#y=new Map;static#S=new WeakMap;static#_=null;static#E=new Set;constructor({textContentSource:t,container:i,viewport:n}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=i,this.#h=n.scale*(globalThis.devicePixelRatio||1),this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:r,pageY:o}=n.rawDims;this.#b=[1,0,0,-1,-r,o+a],this.#o=s,this.#l=a,he.#N(),Hn(i,n),this.#t.promise.finally(()=>{he.#E.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=fe.platform;return tt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:i,done:n})=>{if(n){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#T(i.items),t()},this.#t.reject)};return this.#u=this.#g.getReader(),he.#E.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#d&&(i?.(),this.#d=s,Hn(this.#c,{rotation:s})),n!==this.#h){i?.(),this.#h=n;const a={div:null,properties:null,ctx:he.#M(this.#a)};for(const r of this.#m)a.properties=this.#p.get(r),a.div=r,this.#x(a)}}cancel(){const t=new mn("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#r}#T(t){if(this.#i)return;this.#s.ctx??=he.#M(this.#a);const i=this.#m,n=this.#r;for(const s of t){if(i.length>Px){Q("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id!==null&&this.#e.setAttribute("id",`${s.id}`),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#R(s)}}#R(t){const i=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(i);const s=U.transform(this.#b,t.transform);let a=Math.atan2(s[1],s[0]);const r=this.#f[t.fontName];r.vertical&&(a+=Math.PI/2);let o=this.#n&&r.fontSubstitution||r.fontFamily;o=he.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),c=l*he.#k(o,this.#a);let u,h;a===0?(u=s[4],h=s[5]-c):(u=s[4]+c*Math.sin(a),h=s[5]-c*Math.cos(a));const d="calc(var(--scale-factor)*",f=i.style;this.#e===this.#c?(f.left=`${(100*u/this.#o).toFixed(2)}%`,f.top=`${(100*h/this.#l).toFixed(2)}%`):(f.left=`${d}${u.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(he.#_*l).toFixed(2)}px)`,f.fontFamily=o,n.fontSize=l,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#n&&(i.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const p=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);p!==v&&Math.max(p,v)/Math.min(p,v)>1.5&&(g=!0)}if(g&&(n.canvasWidth=r.vertical?t.height:t.width),this.#p.set(i,n),this.#s.div=i,this.#s.properties=n,this.#x(this.#s),n.hasText&&this.#e.append(i),n.hasEOL){const p=document.createElement("br");p.setAttribute("role","presentation"),this.#e.append(p)}}#x(t){const{div:i,properties:n,ctx:s}=t,{style:a}=i;let r="";if(he.#_>1&&(r=`scale(${1/he.#_})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:o}=a,{canvasWidth:l,fontSize:c}=n;he.#C(s,c*this.#h,o);const{width:u}=s.measureText(i.textContent);u>0&&(r=`scaleX(${l*this.#h/u}) ${r}`)}n.angle!==0&&(r=`rotate(${n.angle}deg) ${r}`),r.length>0&&(a.transform=r)}static cleanup(){if(!(this.#E.size>0)){this.#A.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#M(t=null){let i=this.#y.get(t||="");if(!i){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),i=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,i),this.#S.set(i,{size:0,family:""})}return i}static#C(t,i,n){const s=this.#S.get(t);i===s.size&&n===s.family||(t.font=`${i}px ${n}`,s.size=i,s.family=n)}static#N(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#k(t,i){const n=this.#A.get(t);if(n)return n;const s=this.#M(i);s.canvas.width=s.canvas.height=be,this.#C(s,be,t);const a=s.measureText("");let r=a.fontBoundingBoxAscent,o=Math.abs(a.fontBoundingBoxDescent);if(r){const u=r/(r+o);return this.#A.set(t,u),s.canvas.width=s.canvas.height=0,u}s.strokeStyle="red",s.clearRect(0,0,be,be),s.strokeText("g",0,0);let l=s.getImageData(0,0,be,be).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/be);break}s.clearRect(0,0,be,be),s.strokeText("A",0,be),l=s.getImageData(0,0,be,be).data,r=0;for(let u=0,h=l.length;u<h;u+=4)if(l[u]>0){r=be-Math.floor(u/4/be);break}s.canvas.width=s.canvas.height=0;const c=r?r/(r+o):jx;return this.#A.set(t,c),c}}class ar{static textContent(t){const i=[],n={items:i,styles:Object.create(null)};function s(a){if(!a)return;let r=null;const o=a.name;if(o==="#text")r=a.value;else if(ar.shouldBuildText(o))a?.attributes?.textContent?r=a.attributes.textContent:a.value&&(r=a.value);else return;if(r!==null&&i.push({str:r}),!!a.children)for(const l of a.children)s(l)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Ix=65536,Fx=100,Hx=5e3,Bx=le?ex:QS,Ux=le?ix:a0,Gx=le?tx:JS,Vx=le?nx:l0;function qx(e={}){typeof e=="string"||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t=new nd,{docId:i}=t,n=e.url?Xx(e.url):null,s=e.data?Yx(e.data):null,a=e.httpHeaders||null,r=e.withCredentials===!0,o=e.password??null,l=e.range instanceof m0?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:Ix;let u=e.worker instanceof Wt?e.worker:null;const h=e.verbosity,d=typeof e.docBaseUrl=="string"&&!Al(e.docBaseUrl)?e.docBaseUrl:null,f=typeof e.cMapUrl=="string"?e.cMapUrl:null,g=e.cMapPacked!==!1,p=e.CMapReaderFactory||Ux,v=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,m=e.StandardFontDataFactory||Vx,b=e.stopAtErrors!==!0,y=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,A=e.isEvalSupported!==!1,x=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!le,E=typeof e.isImageDecoderSupported=="boolean"?e.isImageDecoderSupported:!le&&(fe.platform.isFirefox||!globalThis.chrome),w=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,T=typeof e.disableFontFace=="boolean"?e.disableFontFace:le,M=e.fontExtraProperties===!0,D=e.enableXfa===!0,z=e.ownerDocument||globalThis.document,H=e.disableRange===!0,B=e.disableStream===!0,F=e.disableAutoFetch===!0,P=e.pdfBug===!0,C=e.CanvasFactory||Bx,O=e.FilterFactory||Gx,L=e.enableHWA===!0,k=l?l.length:e.length??NaN,j=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!le&&!T,st=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:p===a0&&m===l0&&f&&v&&Ea(f,document.baseURI)&&Ea(v,document.baseURI),K=null;DS(h);const ht={canvasFactory:new C({ownerDocument:z,enableHWA:L}),filterFactory:new O({docId:i,ownerDocument:z}),cMapReaderFactory:st?null:new p({baseUrl:f,isCompressed:g}),standardFontDataFactory:st?null:new m({baseUrl:v})};if(!u){const at={verbosity:h,port:Ga.workerPort};u=at.port?Wt.fromPort(at):new Wt(at),t._worker=u}const Dt={docId:i,apiVersion:"4.10.38",data:s,password:o,disableAutoFetch:F,rangeChunkSize:c,length:k,docBaseUrl:d,enableXfa:D,evaluatorOptions:{maxImageSize:y,disableFontFace:T,ignoreErrors:b,isEvalSupported:A,isOffscreenCanvasSupported:x,isImageDecoderSupported:E,canvasMaxAreaInBytes:w,fontExtraProperties:M,useSystemFonts:j,cMapUrl:st?f:null,standardFontDataUrl:st?v:null}},$t={disableFontFace:T,fontExtraProperties:M,ownerDocument:z,pdfBug:P,styleElement:K,loadingParams:{disableAutoFetch:F,enableXfa:D}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const at=u.messageHandler.sendWithPromise("GetDocRequest",Dt,s?[s.buffer]:null);let et;if(l)et=new Ax(l,{disableRange:H,disableStream:B});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Kt;if(le)if(Ea(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Kt=rg}else Kt=Lx;else Kt=Ea(n)?rg:Mx;et=new Kt({url:n,length:k,httpHeaders:a,withCredentials:r,rangeChunkSize:c,disableRange:H,disableStream:B})}return at.then(Kt=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Hi=new Ca(i,Kt,u.port),aa=new Zx(Hi,t,et,$t,ht);t._transport=aa,Hi.send("Ready",null)})}).catch(t._capability.reject),t}function Xx(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(le&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Yx(e){if(le&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return yl(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||typeof e=="object"&&!isNaN(e?.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function og(e){return typeof e=="object"&&Number.isInteger(e?.num)&&e.num>=0&&Number.isInteger(e?.gen)&&e.gen>=0}class nd{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${nd.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}}class m0{constructor(t,i,n=!1,s=null){this.length=t,this.initialData=i,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,i){for(const n of this._rangeListeners)n(t,i)}onDataProgress(t,i){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,i)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,i){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class $x{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Kx{#t=null;#e=!1;constructor(t,i,n,s=!1){this._pageIndex=t,this._pageInfo=i,this._transport=n,this._stats=s?new Yf:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new b0,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new yr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:i,intent:n="display",annotationMode:s=$i.ENABLE,transform:a=null,background:r=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(n,s,u,h),{renderingIntent:f,cacheKey:g}=d;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(f);let p=this._intentStates.get(g);p||(p=Object.create(null),this._intentStates.set(g,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const v=!!(f&Ee.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const m=A=>{p.renderTasks.delete(b),(this._maybeCleanupAfterRender||v)&&(this.#e=!0),this.#i(!v),A?(b.capability.reject(A),this._abortOperatorList({intentState:p,reason:A instanceof Error?A:new Error(A)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new ws({callback:m,params:{canvasContext:t,viewport:i,transform:a,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(p.renderTasks||=new Set).add(b);const y=b.task;return Promise.all([p.displayReadyCapability.promise,o]).then(([A,x])=>{if(this.destroyed){m();return}if(this._stats?.time("Rendering"),!(x.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:A,optionalContentConfig:x}),b.operatorListChanged()}).catch(m),y}getOperatorList({intent:t="display",annotationMode:i=$i.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,i,n,s,!0);let o=this._intentStates.get(r.cacheKey);o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ar.textContent(n));const i=this.streamTextContent(t);return new Promise(function(n,s){function a(){r.read().then(function({value:l,done:c}){if(c){n(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},s)}const r=i.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const n of i.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const i=this.#i(!1);return t&&i&&(this._stats&&=new Yf),i}#i(t=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},Hx),!1;for(const{renderTasks:i,operatorList:n}of this._intentStates.values())if(i.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,i){const n=this._intentStates.get(i);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let n=0,s=t.length;n<s;n++)i.operatorList.fnArray.push(t.fnArray[n]),i.operatorList.argsArray.push(t.argsArray[n]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const n of i.renderTasks)n.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:r}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:a,modifiedIds:s},r).getReader(),c=this._intentStates.get(i);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();this.#i(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:t,reason:i,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof Kh){let s=Fx;i.extraDelay>0&&i.extraDelay<1e3&&(s+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},s);return}}if(t.streamReader.cancel(new mn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class Wx{#t=new Map;#e=Promise.resolve();postMessage(t,i){const n={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,n)})}addEventListener(t,i,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Q("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,i);s=()=>a.removeEventListener("abort",r),a.addEventListener("abort",r)}this.#t.set(i,s)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}class Wt{static#t=0;static#e=!1;static#i;static{le&&(this.#e=!0,Ga.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,i)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(i,n);return n.origin===s.origin},this._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}constructor({name:t=null,port:i=null,verbosity:n=NS()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,i){if(Wt.#i?.has(i))throw new Error("Cannot use more than one PDFWorker per port.");(Wt.#i||=new WeakMap).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}#n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Ca("main","worker",t),this._messageHandler.on("ready",function(){}),this.#n()}_initialize(){if(Wt.#e||Wt.#a){this._setupFakeWorker();return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location.href,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),n=new Ca("main","worker",i),s=()=>{a.abort(),n.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;i.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),n.on("test",o=>{if(a.abort(),this.destroyed||!o){s();return}this._messageHandler=n,this._port=i,this._webWorker=i,this.#n()}),n.on("ready",o=>{if(a.abort(),this.destroyed){s();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};r();return}catch{bl("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Wt.#e||(Q("Setting up fake worker."),Wt.#e=!0),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new Wx;this._port=i;const n=`fake${Wt.#t++}`,s=new Ca(n+"_worker",n,i);t.setup(s,i),this._messageHandler=new Ca(n,n+"_worker",i),this.#n()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Wt.#i?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const i=this.#i?.get(t.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Wt(t)}static get workerSrc(){if(Ga.workerSrc)return Ga.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#a(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return tt(this,"_setupFakeWorkerGlobal",(async()=>this.#a?this.#a:(await import(this.workerSrc)).WorkerMessageHandler)())}}class Zx{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(t,i,n,s,a){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new b0,this.fontLoader=new WS({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,i=null){const n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,s),s}get annotationStorage(){return tt(this,"annotationStorage",new td)}getRenderingIntent(t,i=$i.ENABLE,n=null,s=!1,a=!1){let r=Ee.DISPLAY,o=Lu;switch(t){case"any":r=Ee.ANY;break;case"display":break;case"print":r=Ee.PRINT;break;default:Q(`getRenderingIntent - invalid intent: ${t}`)}const l=r&Ee.PRINT&&n instanceof i0?n:this.annotationStorage;switch(i){case $i.DISABLE:r+=Ee.ANNOTATIONS_DISABLE;break;case $i.ENABLE:break;case $i.ENABLE_FORMS:r+=Ee.ANNOTATIONS_FORMS;break;case $i.ENABLE_STORAGE:r+=Ee.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Q(`getRenderingIntent - invalid annotationMode: ${i}`)}s&&(r+=Ee.IS_EDITING),a&&(r+=Ee.OPLIST);const{ids:c,hash:u}=l.modifiedIds,h=[r,o.hash,u];return{renderingIntent:r,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),he.cleanup(),this._networkStream?.cancelAllRequests(new mn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(n,s)=>{Ut(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:r}){if(r){s.close();return}Ut(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:r}=this._fullReader;return(!s||!a)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{i.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:r}}),t.on("GetRangeReader",(n,s)=>{Ut(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:r,done:o}){if(o){s.close();return}Ut(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{a.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,i._capability.resolve(new $x(n,this))}),t.on("DocException",n=>{i._capability.reject(ye(n))}),t.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!i.onPassword)throw ye(n);const s=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};i.onPassword(s,n.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),t.on("DataLoaded",n=>{i.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:r,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in a){const d=a.error;Q(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const c=l&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new ZS(a,{disableFontFace:r,fontExtraProperties:o,inspectFont:c});this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!o&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=a;Ut(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,r])=>{if(this.destroyed)return;const o=this.#e.get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){r?.bitmap?.close();return}switch(a){case"Image":o.objs.resolve(n,r),r?.dataLen>CS&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,r);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||i.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Q("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,n=this.#i.get(i);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,t);const r=new Kx(i,a,this,this._params.pdfBug);return this.#e.set(i,r),r});return this.#i.set(i,s),s}getPageIndex(t){return og(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(i=>new vx(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new bx(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),he.cleanup()}}cachedPageNumber(t){if(!og(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(i)??null}}const ba=Symbol("INITIAL_DATA");class b0{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ba}}get(t,i=null){if(i){const s=this.#e(t);return s.promise.then(()=>i(s.data)),null}const n=this.#t[t];if(!n||n.data===ba)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const i=this.#t[t];return!!i&&i.data!==ba}delete(t){const i=this.#t[t];return!i||i.data===ba?!1:(delete this.#t[t],!0)}resolve(t,i=null){const n=this.#e(t);n.data=i,n.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==ba&&(yield[t,i])}}}class Qx{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ws{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:r,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null}){this.callback=t,this.params=i,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Qx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ws.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ws.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:a,background:r}=this.params;this.gfx=new Os(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ws.#e.delete(this._canvas),this.callback(t||new Kh(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ws.#e.delete(this._canvas),this.callback())))}}const Jx="4.10.38",t_="f9bea397f";function lg(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}function ya(e){return Math.max(0,Math.min(255,255*e))}class cg{static CMYK_G([t,i,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*i+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ya(t),[t,t,t]}static G_HTML([t]){const i=lg(t);return`#${i}${i}${i}`}static RGB_G([t,i,n]){return["G",.3*t+.59*i+.11*n]}static RGB_rgb(t){return t.map(ya)}static RGB_HTML(t){return`#${t.map(lg).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,i+s)]}static CMYK_rgb([t,i,n,s]){return[ya(1-Math.min(1,t+s)),ya(1-Math.min(1,n+s)),ya(1-Math.min(1,i+s))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,n]){const s=1-t,a=1-i,r=1-n,o=Math.min(s,a,r);return["CMYK",s,a,r,o]}}class e_{create(t,i,n=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${i}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${i}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){mt("Abstract method `_createSVG` called.")}}class sd extends e_{_createSVG(t){return document.createElementNS(_i,t)}}class y0{static setupStorage(t,i,n,s,a){const r=s.getValue(i,{value:null});switch(n.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),a==="print")break;t.addEventListener("input",o=>{s.setValue(i,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",o=>{s.setValue(i,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),a==="print")break;t.addEventListener("input",o=>{s.setValue(i,{value:o.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const o of n.children)o.attributes.value===r.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(i,{value:c})});break}}static setAttributes({html:t,element:i,storage:n=null,intent:s,linkService:a}){const{attributes:r}=i,o=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${s}`);for(const[l,c]of Object.entries(r))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&a.addLinkAttributes(t,r.href,r.newWindow),n&&r.dataId&&this.setupStorage(t,r.dataId,i,n)}static render(t){const i=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:a,linkService:n});const o=a!=="richText",l=t.div;if(l.append(r),t.viewport){const h=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=h}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const h=document.createTextNode(s.value);r.append(h),o&&ar.shouldBuildText(s.name)&&c.push(h)}return{textDivs:c}}const u=[[s,-1,r]];for(;u.length>0;){const[h,d,f]=u.at(-1);if(d+1===h.children.length){u.pop();continue}const g=h.children[++u.at(-1)[1]];if(g===null)continue;const{name:p}=g;if(p==="#text"){const m=document.createTextNode(g.value);c.push(m),f.append(m);continue}const v=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,p):document.createElement(p);if(f.append(v),g.attributes&&this.setAttributes({html:v,element:g,storage:i,intent:a,linkService:n}),g.children?.length>0)u.push([g,-1,v]);else if(g.value){const m=document.createTextNode(g.value);o&&ar.shouldBuildText(p)&&c.push(m),v.append(m)}}for(const h of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Ar=1e3,i_=9,Bn=new WeakSet;function un(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class n_{static create(t){switch(t.data.annotationType){case Vt.LINK:return new v0(t);case Vt.TEXT:return new s_(t);case Vt.WIDGET:switch(t.data.fieldType){case"Tx":return new a_(t);case"Btn":return t.data.radioButton?new A0(t):t.data.checkBox?new o_(t):new l_(t);case"Ch":return new c_(t);case"Sig":return new r_(t)}return new $n(t);case Vt.POPUP:return new zu(t);case Vt.FREETEXT:return new S0(t);case Vt.LINE:return new h_(t);case Vt.SQUARE:return new d_(t);case Vt.CIRCLE:return new f_(t);case Vt.POLYLINE:return new x0(t);case Vt.CARET:return new p_(t);case Vt.INK:return new ad(t);case Vt.POLYGON:return new g_(t);case Vt.HIGHLIGHT:return new _0(t);case Vt.UNDERLINE:return new m_(t);case Vt.SQUIGGLY:return new b_(t);case Vt.STRIKEOUT:return new y_(t);case Vt.STAMP:return new w0(t);case Vt.FILEATTACHMENT:return new v_(t);default:return new Pt(t)}}}class Pt{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:i=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:i,richText:n}){return!!(t?.str||i?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Pt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:i}=t;i&&this.#n(i),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:i},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:r,pageX:o,pageY:l}}}}=this;n?.splice(0,4,...t);const{width:c,height:u}=un(t);i.left=`${100*(t[0]-o)/a}%`,i.top=`${100*(r-t[3]+l)/r}%`,s===0?(i.width=`${100*c/a}%`,i.height=`${100*u/r}%`):this.setRotation(s)}_createContainer(t){const{data:i,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",i.id),this instanceof $n||(a.tabIndex=Ar);const{style:r}=a;if(r.zIndex=this.parent.zIndex++,i.alternativeText&&(a.title=i.alternativeText),i.noRotate&&a.classList.add("norotate"),!i.rect||this instanceof zu){const{rotation:p}=i;return!i.hasOwnCanvas&&p!==0&&this.setRotation(p,a),a}const{width:o,height:l}=un(i.rect);if(!t&&i.borderStyle.width>0){r.borderWidth=`${i.borderStyle.width}px`;const p=i.borderStyle.horizontalCornerRadius,v=i.borderStyle.verticalCornerRadius;if(p>0||v>0){const b=`calc(${p}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;r.borderRadius=b}else if(this instanceof A0){const b=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;r.borderRadius=b}switch(i.borderStyle.style){case pa.SOLID:r.borderStyle="solid";break;case pa.DASHED:r.borderStyle="dashed";break;case pa.BEVELED:Q("Unimplemented border style: beveled");break;case pa.INSET:Q("Unimplemented border style: inset");break;case pa.UNDERLINE:r.borderBottomStyle="solid";break}const m=i.borderColor||null;m?(this.#e=!0,r.borderColor=U.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):r.borderWidth=0}const c=U.normalizeRect([i.rect[0],n.view[3]-i.rect[1]+n.view[1],i.rect[2],n.view[3]-i.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:h,pageX:d,pageY:f}=s.rawDims;r.left=`${100*(c[0]-d)/u}%`,r.top=`${100*(c[1]-f)/h}%`;const{rotation:g}=i;return i.hasOwnCanvas||g===0?(r.width=`${100*o/u}%`,r.height=`${100*l/h}%`):this.setRotation(g,a),a}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:r}=un(this.data.rect);let o,l;t%180===0?(o=100*a/n,l=100*r/s):(o=100*r/n,l=100*a/s),i.style.width=`${o}%`,i.style.height=`${l}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,n,s)=>{const a=s.detail[i],r=a[0],o=a.slice(1);s.target.style[n]=cg[`${r}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:cg[`${r}_rgb`](o)})};return tt(this,"_commonActions",{display:i=>{const{display:n}=i.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:n}=i.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const n=i.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,i){const n=this._commonActions;for(const s of Object.keys(i.detail))(t[s]||n[s])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const n=this._commonActions;for(const[s,a]of Object.entries(i)){const r=n[s];if(r){const o={detail:{[s]:a},target:t};r(o),delete i[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,n,s,a]=this.data.rect.map(p=>Math.fround(p));if(t.length===8){const[p,v,m,b]=t.subarray(2,6);if(s===p&&a===v&&i===m&&n===b)return}const{style:r}=this.container;let o;if(this.#e){const{borderColor:p,borderWidth:v}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${p}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=s-i,c=a-n,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const d=u.createElement("defs");h.append(d);const f=u.createElement("clipPath"),g=`clippath_${this.data.id}`;f.setAttribute("id",g),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let p=2,v=t.length;p<v;p+=8){const m=t[p],b=t[p+1],y=t[p+2],A=t[p+3],x=u.createElement("rect"),E=(y-i)/l,w=(a-b)/c,T=(m-y)/l,M=(b-A)/c;x.setAttribute("x",E),x.setAttribute("y",w),x.setAttribute("width",T),x.setAttribute("height",M),f.append(x),o?.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${w}" width="${T}" height="${M}"/>`)}this.#e&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:t}=this,i=this.#i=new zu({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:r,exportValues:o}of s){if(a===-1||r===i)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${r}"]`);if(c&&!Bn.has(c)){Q(`_getElementsByName - element not allowed: ${r}`);continue}n.push({id:r,exportValue:l,domElement:c})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,r=s.getAttribute("data-element-id");r!==i&&Bn.has(s)&&n.push({id:r,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i})})}}class v0 extends Pt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#i(n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t()}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),this.#t()}#e(t,i,n=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,n),!1),this.#t()}#i(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const a=n.get(s);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Q('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:s,refs:a,include:r}=i,o=[];if(s.length!==0||a.length!==0){const u=new Set(a);for(const h of s){const d=this._fieldObjects[h]||[];for(const{id:f}of d)u.add(f)}for(const h of Object.values(this._fieldObjects))for(const d of h)u.has(d.id)===r&&o.push(d)}else for(const u of Object.values(this._fieldObjects))o.push(...u);const l=this.annotationStorage,c=[];for(const u of o){const{id:h}=u;switch(c.push(h),u.type){case"text":{const f=u.defaultValue||"";l.setValue(h,{value:f});break}case"checkbox":case"radiobutton":{const f=u.defaultValue===u.exportValues;l.setValue(h,{value:f});break}case"combobox":case"listbox":{const f=u.defaultValue||"";l.setValue(h,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${h}"]`);if(d){if(!Bn.has(d)){Q(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class s_ extends Pt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class $n extends Pt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return fe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,n,s,a){n.includes("mouse")?t.addEventListener(n,r=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(n,r=>{if(n==="blur"){if(!i.focused||!r.relatedTarget)return;i.focused=!1}else if(n==="focus"){if(i.focused)return;i.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r)}})})}_setEventListeners(t,i,n,s){for(const[a,r]of n)(r==="Action"||this.data.actions?.[r])&&((r==="Focus"||r==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,a,r,s),r==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):r==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":U.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||i_,a=t.style;let r;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(vc*s))||1,h=c/u;r=Math.min(s,l(h/vc))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);r=Math.min(s,l(c/vc))}a.fontSize=`calc(${r}px * var(--scale-factor))`,a.color=U.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class a_ extends $n{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,n,s){const a=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[i]=n),a.setValue(r.id,{[s]:n})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=t.getValue(i,{value:this.data.fieldValue});let a=s.value||"";const r=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;r&&a.length>r&&(a=a.slice(0,r));let o=s.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:a,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",o??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Bn.add(n),n.setAttribute("data-element-id",i),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Ar,this._setRequired(n,this.data.required),r&&(n.maxLength=r),n.addEventListener("input",u=>{t.setValue(i,{value:u.target.value}),this.setPropertyOnSiblings(n,"value",u.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue??"";n.value=l.userValue=h,l.formattedValue=null});let c=u=>{const{formattedValue:h}=l;h!=null&&(u.target.value=h),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",h=>{if(l.focused)return;const{target:d}=h;l.userValue&&(d.value=l.userValue),l.lastCommittedValue=d.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",h=>{this.showElementAndHideCanvas(h.target);const d={value(f){l.userValue=f.detail.value??"",t.setValue(i,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){const{formattedValue:g}=f.detail;l.formattedValue=g,g!=null&&f.target!==document.activeElement&&(f.target.value=g),t.setValue(i,{formattedValue:g})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{const{charLimit:g}=f.detail,{target:p}=f;if(g===0){p.removeAttribute("maxLength");return}p.setAttribute("maxLength",g);let v=l.userValue;!v||v.length<=g||(v=v.slice(0,g),p.value=l.userValue=v,t.setValue(i,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:p.selectionStart,selEnd:p.selectionEnd}}))}};this._dispatchEventFromSandbox(d,h)}),n.addEventListener("keydown",h=>{l.commitKey=1;let d=-1;if(h.key==="Escape"?d=0:h.key==="Enter"&&!this.data.multiLine?d=2:h.key==="Tab"&&(l.commitKey=3),d===-1)return;const{value:f}=h.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:f,willCommit:!0,commitKey:d,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))});const u=c;c=null,n.addEventListener("blur",h=>{if(!l.focused||!h.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:d}=h.target;l.userValue=d,l.lastCommittedValue!==d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,willCommit:!0,commitKey:l.commitKey,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}),u(h)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",h=>{l.lastCommittedValue=null;const{data:d,target:f}=h,{value:g,selectionStart:p,selectionEnd:v}=f;let m=p,b=v;switch(h.inputType){case"deleteWordBackward":{const y=g.substring(0,p).match(/\w*[^\w]*$/);y&&(m-=y[0].length);break}case"deleteWordForward":{const y=g.substring(p).match(/^[^\w]*\w*/);y&&(b+=y[0].length);break}case"deleteContentBackward":p===v&&(m-=1);break;case"deleteContentForward":p===v&&(b+=1);break}h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:g,change:d||"",willCommit:!1,selStart:m,selEnd:b}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){const h=(this.data.rect[2]-this.data.rect[0])/r;n.classList.add("comb"),n.style.letterSpacing=`calc(${h}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class r_ extends $n{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class o_ extends $n{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,n=i.id;let s=t.getValue(n,{value:i.exportValue===i.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Bn.add(a),a.setAttribute("data-element-id",n),a.disabled=i.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=i.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",i.exportValue),a.tabIndex=Ar,a.addEventListener("change",r=>{const{name:o,checked:l}=r.target;for(const c of this._getElementsByName(o,n)){const u=l&&c.exportValue===i.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(n,{value:l})}),a.addEventListener("resetform",r=>{const o=i.defaultFieldValue||"Off";r.target.checked=o===i.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",r=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,r)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class A0 extends $n{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,n=i.id;let s=t.getValue(n,{value:i.fieldValue===i.buttonValue}).value;if(typeof s=="string"&&(s=s!==i.buttonValue,t.setValue(n,{value:s})),s)for(const r of this._getElementsByName(i.fieldName,n))t.setValue(r.id,{value:!1});const a=document.createElement("input");if(Bn.add(a),a.setAttribute("data-element-id",n),a.disabled=i.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=i.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=Ar,a.addEventListener("change",r=>{const{name:o,checked:l}=r.target;for(const c of this._getElementsByName(o,n))t.setValue(c.id,{value:!1});t.setValue(n,{value:l})}),a.addEventListener("resetform",r=>{const o=i.defaultFieldValue;r.target.checked=o!=null&&o===i.buttonValue}),this.enableScripting&&this.hasJSActions){const r=i.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=r===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const d=u&&h.id===n;h.domElement&&(h.domElement.checked=d),t.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class l_ extends v0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class c_ extends $n{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,n=t.getValue(i,{value:this.data.fieldValue}),s=document.createElement("select");Bn.add(s),s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Ar;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const d of s.options)d.selected=d.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,n.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),s.append(h)}let r=null;if(a){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),r=()=>{u.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const o=u=>{const h=u?"value":"textContent",{options:d,multiple:f}=s;return f?Array.prototype.filter.call(d,g=>g.selected).map(g=>g[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const c=u=>{const h=u.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const h={value(d){r?.();const f=d.detail.value,g=new Set(Array.isArray(f)?f:[f]);for(const p of s.options)p.selected=g.has(p.value);t.setValue(i,{value:o(!0)}),l=o(!1)},multipleSelection(d){s.multiple=!0},remove(d){const f=s.options,g=d.detail.remove;f[g].selected=!1,s.remove(g),f.length>0&&Array.prototype.findIndex.call(f,v=>v.selected)===-1&&(f[0].selected=!0),t.setValue(i,{value:o(!0),items:c(d)}),l=o(!1)},clear(d){for(;s.length!==0;)s.remove(0);t.setValue(i,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:g,exportValue:p}=d.detail.insert,v=s.children[f],m=document.createElement("option");m.textContent=g,m.value=p,v?v.before(m):s.append(m),t.setValue(i,{value:o(!0),items:c(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;s.length!==0;)s.remove(0);for(const g of f){const{displayValue:p,exportValue:v}=g,m=document.createElement("option");m.textContent=p,m.value=v,s.append(m)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(i,{value:o(!0),items:c(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const g of d.target.options)g.selected=f.has(g.index);t.setValue(i,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,u)}),s.addEventListener("input",u=>{const h=o(!0),d=o(!1);t.setValue(i,{value:h}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(i,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class zu extends Pt{constructor(t){const{data:i,elements:n}=t;super(t,{isRenderable:Pt._hasPopupData(i)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new u_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(n=>`${$h}${n}`).join(",")),this.container}}class u_{#t=this.#T.bind(this);#e=this.#C.bind(this);#i=this.#M.bind(this);#n=this.#x.bind(this);#a=null;#s=null;#l=null;#o=null;#u=null;#c=null;#d=null;#h=!1;#f=null;#r=null;#g=null;#m=null;#p=null;#b=null;#A=!1;constructor({container:t,color:i,elements:n,titleObj:s,modificationDate:a,contentsObj:r,richText:o,parent:l,rect:c,parentRect:u,open:h}){this.#s=t,this.#p=s,this.#l=r,this.#m=o,this.#c=l,this.#a=i,this.#g=c,this.#d=u,this.#u=n,this.#o=t0.toDateObject(a),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",this.#n),d.addEventListener("mouseenter",this.#i),d.addEventListener("mouseleave",this.#e),d.classList.add("popupTriggerArea");for(const d of n)d.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,h&&this.#x()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const a=t.style.outlineColor=U.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=U.makeHexColor(...this.#a.map(o=>Math.floor(.7*(255-o)+o)))}const i=document.createElement("span");i.className="header";const n=document.createElement("h1");if(i.append(n),{dir:n.dir,str:n.textContent}=this.#p,t.append(i),this.#o){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),i.append(a)}const s=this.#y;if(s)y0.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#l);t.append(a)}this.#s.append(t)}get#y(){const t=this.#m,i=this.#l;return t?.str&&(!i?.str||i.str===t.str)&&this.#m.html||null}get#S(){return this.#y?.attributes?.style?.fontSize||0}get#_(){return this.#y?.attributes?.style?.color||null}#E(t){const i=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},s={style:{color:this.#_,fontSize:this.#S?`calc(${this.#S}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))i.push({name:"span",value:a,attributes:s});return n}_formatContents({str:t,dir:i}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,r=s.length;a<r;++a){const o=s[a];n.append(document.createTextNode(o)),a<r-1&&n.append(document.createElement("br"))}return n}#T(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#h)&&this.#x()}updateEdited({rect:t,popupContent:i}){this.#b||={contentsObj:this.#l,richText:this.#m},t&&(this.#r=null),i&&(this.#m=this.#E(i),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#b&&({contentsObj:this.#l,richText:this.#m}=this.#b,this.#b=null,this.#f?.remove(),this.#f=null,this.#r=null)}#R(){if(this.#r!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:a}}}=this.#c;let r=!!this.#d,o=r?this.#d:this.#g;for(const g of this.#u)if(!o||U.intersect(g.data.rect,o)!==null){o=g.data.rect,r=!0;break}const l=U.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),u=r?o[2]-o[0]+5:0,h=l[0]+u,d=l[1];this.#r=[100*(h-s)/i,100*(d-a)/n];const{style:f}=this.#s;f.left=`${this.#r[0]}%`,f.top=`${this.#r[1]}%`}#x(){this.#h=!this.#h,this.#h?(this.#M(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#C(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#M(){this.#f||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#R(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#C(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#A=this.isVisible,this.#A&&(this.#s.hidden=!0)}maybeShow(){this.#A&&(this.#f||this.#M(),this.#A=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class S0 extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const n=document.createElement("span");n.textContent=i,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class h_ extends Pt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:n}=un(t.rect),s=this.svgFactory.create(i,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class d_ extends Pt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:n}=un(t.rect),s=this.svgFactory.create(i,n,!0),a=t.borderStyle.width,r=this.#t=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",a/2),r.setAttribute("y",a/2),r.setAttribute("width",i-a),r.setAttribute("height",n-a),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class f_ extends Pt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:n}=un(t.rect),s=this.svgFactory.create(i,n,!0),a=t.borderStyle.width,r=this.#t=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",i/2),r.setAttribute("cy",n/2),r.setAttribute("rx",i/2-a/2),r.setAttribute("ry",n/2-a/2),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class x0 extends Pt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:n,popupRef:s}}=this;if(!i)return this.container;const{width:a,height:r}=un(t),o=this.svgFactory.create(a,r,!0);let l=[];for(let u=0,h=i.length;u<h;u+=2){const d=i[u]-t[0],f=t[3]-i[u+1];l.push(`${d},${f}`)}l=l.join(" ");const c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class g_ extends x0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class p_ extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ad extends Pt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}#i(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:r,width:o,height:l}=this.#i(i,t),c=this.svgFactory.create(o,l,!0),u=this.#t=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",r);for(let h=0,d=n.length;h<d;h++){const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",n[h].join(",")),u.append(f)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:n,rect:s}=t,a=this.#t;if(i>=0&&a.setAttribute("stroke-width",i||1),n)for(let r=0,o=this.#e.length;r<o;r++)this.#e[r].setAttribute("points",n[r].join(","));if(s){const{transform:r,width:o,height:l}=this.#i(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),a.setAttribute("transform",r)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class _0 extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class m_ extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class b_ extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class y_ extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class w0 extends Pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class v_ extends Pt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:s}=fe.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class A_{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:i,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:r,structTreeLayer:o}){this.div=t,this.#t=i,this.#e=n,this.#n=o||null,this.page=a,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#i.size>0}async#a(t,i){const n=t.firstChild||t,s=n.id=`${$h}${i}`,a=await this.#n?.getAriaAttributes(s);if(a)for(const[r,o]of a)n.setAttribute(r,o);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1)}async render(t){const{annotations:i}=t,n=this.div;Hn(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new sd,annotationStorage:t.annotationStorage||new td,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const r of i){if(r.noHTML)continue;const o=r.annotationType===Vt.POPUP;if(o){const u=s.get(r.id);if(!u)continue;a.elements=u}else{const{width:u,height:h}=un(r.rect);if(u<=0||h<=0)continue}a.data=r;const l=n_.create(a);if(!l.isRenderable)continue;if(!o&&r.popupRef){const u=s.get(r.popupRef);u?u.push(l):s.set(r.popupRef,[l])}const c=l.render();r.hidden&&(c.style.visibility="hidden"),await this.#a(c,r.id),l._isEditable&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#s()}update({viewport:t}){const i=this.div;this.viewport=t,Hn(i,{rotation:t.rotation}),this.#s(),i.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[i,n]of this.#e){const s=t.querySelector(`[data-annotation-id="${i}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}}const Xr=/\r\n?|\n/g;class qt extends q{#t;#e="";#i=`${this.id}-editor`;#n=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=qt.prototype,i=a=>a.isEmpty(),n=bn.TRANSLATE_SMALL,s=bn.TRANSLATE_BIG;return tt(this,"_keyboardManager",new vr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static _type="freetext";static _editorType=Z.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||qt._defaultColor||q._defaultLineColor,this.#a=t.fontSize||qt._defaultFontSize}static initialize(t,i){q.initialize(t,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case ot.FREETEXT_SIZE:qt._defaultFontSize=i;break;case ot.FREETEXT_COLOR:qt._defaultColor=i;break}}updateParams(t,i){switch(t){case ot.FREETEXT_SIZE:this.#s(i);break;case ot.FREETEXT_COLOR:this.#l(i);break}}static get defaultPropertiesToUpdate(){return[[ot.FREETEXT_SIZE,qt._defaultFontSize],[ot.FREETEXT_COLOR,qt._defaultColor||q._defaultLineColor]]}get propertiesToUpdate(){return[[ot.FREETEXT_SIZE,this.#a],[ot.FREETEXT_COLOR,this.#t]]}#s(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#a)*this.parentScale),this.#a=s,this.#u()},n=this.#a;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const i=s=>{this.#t=this.editorDiv.style.color=s},n=this.#t;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-qt._internalPadding*t,-(qt._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Z.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let i=null;for(const n of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(qt.#c(n)),i=n);return t.join(`
`)}#u(){const[t,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,r=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=r,a.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/i):(this.width=n.height/t,this.height=n.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,i=this.#e=this.#o().trimEnd();if(t===i)return;const n=s=>{if(this.#e=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){qt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Go(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,u]=this.pageDimensions,[h,d]=this.pageTranslation;let f,g;switch(this.rotation){case 0:f=t+(r[0]-h)/c,g=i+this.height-(r[1]-d)/u;break;case 90:f=t+(r[0]-h)/c,g=i-(r[1]-d)/u,[o,l]=[l,-o];break;case 180:f=t-this.width+(r[0]-h)/c,g=i-(r[1]-d)/u,[o,l]=[-o,-l];break;case 270:f=t+(r[0]-h-this.height*u)/c,g=i+(r[1]-d-this.width*c)/u,[o,l]=[-l,o];break}this.setAt(f*s,g*a,o,l)}else this.setAt(t*s,i*a,this.width*s,this.height*a);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Xr,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=qt.#f(i.getData("text")||"").replaceAll(Xr,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const r=a.getRangeAt(0);if(!s.includes(`
`)){r.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:o,startOffset:l}=r,c=[],u=[];if(o.nodeType===Node.TEXT_NODE){const f=o.parentElement;if(u.push(o.nodeValue.slice(l).replaceAll(Xr,"")),f!==this.editorDiv){let g=c;for(const p of this.editorDiv.childNodes){if(p===f){g=u;continue}g.push(qt.#c(p))}}c.push(o.nodeValue.slice(0,l).replaceAll(Xr,""))}else if(o===this.editorDiv){let f=c,g=0;for(const p of this.editorDiv.childNodes)g++===l&&(f=u),f.push(qt.#c(p))}this.#e=`${c.join(`
`)}${s}${u.join(`
`)}`,this.#d();const h=new Range;let d=c.reduce((f,g)=>f+g.length,0);for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const g=f.nodeValue.length;if(d<=g){h.setStart(f,d),h.setEnd(f,d);break}d-=g}a.removeAllRanges(),a.addRange(h)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#h(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,i,n){let s=null;if(t instanceof S0){const{data:{defaultAppearanceData:{fontSize:r,fontColor:o},rect:l,rotation:c,id:u,popupRef:h},textContent:d,textPosition:f,parent:{page:{pageNumber:g}}}=t;if(!d||d.length===0)return null;s=t={annotationType:Z.FREETEXT,color:Array.from(o),fontSize:r,value:d.join(`
`),position:f,pageIndex:g-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:h}}const a=await super.deserialize(t,i,n);return a.#a=t.fontSize,a.#t=U.makeHexColor(...t.color),a.#e=qt.#f(t.value),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=qt._internalPadding*this.parentScale,n=this.getRect(i,i),s=q._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:Z.FREETEXT,color:s,fontSize:this.#a,value:this.#h(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!this.#r(a)?null:(a.id=this.annotationElementId,a)}#r(t){const{value:i,fontSize:n,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==n||t.color.some((r,o)=>r!==s[o])||t.pageIndex!==a}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:n}=i;n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,i.replaceChildren();for(const a of this.#e.split(`
`)){const r=document.createElement("div");r.append(a?document.createTextNode(a):document.createElement("br")),i.append(r)}const s=qt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#e}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class I{static PRECISION=1e-4;toSVGPath(){mt("Abstract method `toSVGPath` must be implemented.")}get box(){mt("Abstract getter `box` must be implemented.")}serialize(t,i){mt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,n,s,a,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=i+t[o]*s,r[o+1]=n+t[o+1]*a;return r}static _rescaleAndSwap(t,i,n,s,a,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=i+t[o+1]*s,r[o+1]=n+t[o]*a;return r}static _translate(t,i,n,s){s||=new Float32Array(t.length);for(let a=0,r=t.length;a<r;a+=2)s[a]=i+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,n,s,a){switch(a){case 90:return[1-i/n,t/s];case 180:return[1-t/n,1-i/s];case 270:return[i/n,1-t/s];default:return[t/n,i/s]}}static _normalizePagePoint(t,i,n){switch(n){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,n,s,a,r){return[(t+5*n)/6,(i+5*s)/6,(5*n+a)/6,(5*s+r)/6,(n+a)/2,(s+r)/2]}}class Mn{#t;#e=[];#i;#n;#a=[];#s=new Float32Array(18);#l;#o;#u;#c;#d;#h;#f=[];static#r=8;static#g=2;static#m=Mn.#r+Mn.#g;constructor({x:t,y:i},n,s,a,r,o=0){this.#t=n,this.#h=a*s,this.#n=r,this.#s.set([NaN,NaN,NaN,NaN,t,i],6),this.#i=o,this.#c=Mn.#r*s,this.#u=Mn.#m*s,this.#d=s,this.#f.push(t,i)}isEmpty(){return isNaN(this.#s[8])}#p(){const t=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[n,s,a,r]=this.#t;return[(this.#l+(t[0]-i[0])/2-n)/a,(this.#o+(t[1]-i[1])/2-s)/r,(this.#l+(i[0]-t[0])/2-n)/a,(this.#o+(i[1]-t[1])/2-s)/r]}add({x:t,y:i}){this.#l=t,this.#o=i;const[n,s,a,r]=this.#t;let[o,l,c,u]=this.#s.subarray(8,12);const h=t-c,d=i-u,f=Math.hypot(h,d);if(f<this.#u)return!1;const g=f-this.#c,p=g/f,v=p*h,m=p*d;let b=o,y=l;o=c,l=u,c+=v,u+=m,this.#f?.push(t,i);const A=-m/g,x=v/g,E=A*this.#h,w=x*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+E,u+w],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-E,u-w],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([o+E,l+w],2),this.#a.push(NaN,NaN,NaN,NaN,(o+E-n)/a,(l+w-s)/r),this.#s.set([o-E,l-w],14),this.#e.push(NaN,NaN,NaN,NaN,(o-E-n)/a,(l-w-s)/r)),this.#s.set([b,y,o,l,c,u],6),!this.isEmpty()):(this.#s.set([b,y,o,l,c,u],6),Math.abs(Math.atan2(y-l,b-o)-Math.atan2(m,v))<Math.PI/2?([o,l,c,u]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+c)/2-n)/a,((l+u)/2-s)/r),[o,l,b,y]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((b+o)/2-n)/a,((y+l)/2-s)/r),!0):([b,y,o,l,c,u]=this.#s.subarray(0,6),this.#a.push(((b+5*o)/6-n)/a,((y+5*l)/6-s)/r,((5*o+c)/6-n)/a,((5*l+u)/6-s)/r,((o+c)/2-n)/a,((l+u)/2-s)/r),[c,u,o,l,b,y]=this.#s.subarray(12,18),this.#e.push(((b+5*o)/6-n)/a,((y+5*l)/6-s)/r,((5*o+c)/6-n)/a,((5*l+u)/6-s)/r,((o+c)/2-n)/a,((l+u)/2-s)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#b();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#y(n);for(let s=i.length-6;s>=6;s-=6)isNaN(i[s])?n.push(`L${i[s+4]} ${i[s+5]}`):n.push(`C${i[s]} ${i[s+1]} ${i[s+2]} ${i[s+3]} ${i[s+4]} ${i[s+5]}`);return this.#A(n),n.join(" ")}#b(){const[t,i,n,s]=this.#t,[a,r,o,l]=this.#p();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-i)/s} L${(this.#s[4]-t)/n} ${(this.#s[5]-i)/s} L${a} ${r} L${o} ${l} L${(this.#s[16]-t)/n} ${(this.#s[17]-i)/s} L${(this.#s[14]-t)/n} ${(this.#s[15]-i)/s} Z`}#A(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#y(t){const[i,n,s,a]=this.#t,r=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[l,c,u,h]=this.#p();t.push(`L${(r[0]-i)/s} ${(r[1]-n)/a} L${l} ${c} L${u} ${h} L${(o[0]-i)/s} ${(o[1]-n)/a}`)}newFreeDrawOutline(t,i,n,s,a,r){return new E0(t,i,n,s,a,r)}getOutlines(){const t=this.#a,i=this.#e,n=this.#s,[s,a,r,o]=this.#t,l=new Float32Array((this.#f?.length??0)+2);for(let h=0,d=l.length-2;h<d;h+=2)l[h]=(this.#f[h]-s)/r,l[h+1]=(this.#f[h+1]-a)/o;if(l[l.length-2]=(this.#l-s)/r,l[l.length-1]=(this.#o-a)/o,isNaN(n[6])&&!this.isEmpty())return this.#S(l);const c=new Float32Array(this.#a.length+24+this.#e.length);let u=t.length;for(let h=0;h<u;h+=2){if(isNaN(t[h])){c[h]=c[h+1]=NaN;continue}c[h]=t[h],c[h+1]=t[h+1]}u=this.#E(c,u);for(let h=i.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(i[h+d])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=i[h+d],c[u+1]=i[h+d+1],u+=2}return this.#_(c,u),this.newFreeDrawOutline(c,l,this.#t,this.#d,this.#i,this.#n)}#S(t){const i=this.#s,[n,s,a,r]=this.#t,[o,l,c,u]=this.#p(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(i[2]-n)/a,(i[3]-s)/r,NaN,NaN,NaN,NaN,(i[4]-n)/a,(i[5]-s)/r,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(i[16]-n)/a,(i[17]-s)/r,NaN,NaN,NaN,NaN,(i[14]-n)/a,(i[15]-s)/r],0),this.newFreeDrawOutline(h,t,this.#t,this.#d,this.#i,this.#n)}#_(t,i){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],i),i+=6}#E(t,i){const n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[a,r,o,l]=this.#t,[c,u,h,d]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/o,(n[1]-r)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(s[0]-a)/o,(s[1]-r)/l],i),i+=24}}class E0 extends I{#t;#e=new Float32Array(4);#i;#n;#a;#s;#l;constructor(t,i,n,s,a,r){super(),this.#l=t,this.#a=i,this.#t=n,this.#s=s,this.#i=a,this.#n=r,this.lastPoint=[NaN,NaN],this.#o(r);const[o,l,c,u]=this.#e;for(let h=0,d=t.length;h<d;h+=2)t[h]=(t[h]-o)/c,t[h+1]=(t[h+1]-l)/u;for(let h=0,d=i.length;h<d;h+=2)i[h]=(i[h]-o)/c,i[h+1]=(i[h+1]-l)/u}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let i=6,n=this.#l.length;i<n;i+=6){if(isNaN(this.#l[i])){t.push(`L${this.#l[i+4]} ${this.#l[i+5]}`);continue}t.push(`C${this.#l[i]} ${this.#l[i+1]} ${this.#l[i+2]} ${this.#l[i+3]} ${this.#l[i+4]} ${this.#l[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,n,s],a){const r=n-t,o=s-i;let l,c;switch(a){case 0:l=I._rescale(this.#l,t,s,r,-o),c=I._rescale(this.#a,t,s,r,-o);break;case 90:l=I._rescaleAndSwap(this.#l,t,i,r,o),c=I._rescaleAndSwap(this.#a,t,i,r,o);break;case 180:l=I._rescale(this.#l,n,i,-r,o),c=I._rescale(this.#a,n,i,-r,o);break;case 270:l=I._rescaleAndSwap(this.#l,n,s,-r,-o),c=I._rescaleAndSwap(this.#a,n,s,-r,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#o(t){const i=this.#l;let n=i[4],s=i[5],a=n,r=s,o=n,l=s,c=n,u=s;const h=t?Math.max:Math.min;for(let f=6,g=i.length;f<g;f+=6){if(isNaN(i[f]))a=Math.min(a,i[f+4]),r=Math.min(r,i[f+5]),o=Math.max(o,i[f+4]),l=Math.max(l,i[f+5]),u<i[f+5]?(c=i[f+4],u=i[f+5]):u===i[f+5]&&(c=h(c,i[f+4]));else{const p=U.bezierBoundingBox(n,s,...i.slice(f,f+6));a=Math.min(a,p[0]),r=Math.min(r,p[1]),o=Math.max(o,p[2]),l=Math.max(l,p[3]),u<p[3]?(c=p[2],u=p[3]):u===p[3]&&(c=h(c,p[2]))}n=i[f+4],s=i[f+5]}const d=this.#e;d[0]=a-this.#i,d[1]=r-this.#i,d[2]=o-a+2*this.#i,d[3]=l-r+2*this.#i,this.lastPoint=[c,u]}get box(){return this.#e}newOutliner(t,i,n,s,a,r=0){return new Mn(t,i,n,s,a,r)}getNewOutline(t,i){const[n,s,a,r]=this.#e,[o,l,c,u]=this.#t,h=a*c,d=r*u,f=n*c+o,g=s*u+l,p=this.newOutliner({x:this.#a[0]*h+f,y:this.#a[1]*d+g},this.#t,this.#s,t,this.#n,i??this.#i);for(let v=2;v<this.#a.length;v+=2)p.add({x:this.#a[v]*h+f,y:this.#a[v+1]*d+g});return p.getOutlines()}}class Pu{#t;#e;#i=[];#n=[];constructor(t,i=0,n=0,s=!0){let a=1/0,r=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:v,y:m,width:b,height:y}of t){const A=Math.floor((v-i)/c)*c,x=Math.ceil((v+b+i)/c)*c,E=Math.floor((m-i)/c)*c,w=Math.ceil((m+y+i)/c)*c,T=[A,E,w,!0],M=[x,E,w,!1];this.#i.push(T,M),a=Math.min(a,A),r=Math.max(r,x),o=Math.min(o,E),l=Math.max(l,w)}const u=r-a+2*n,h=l-o+2*n,d=a-n,f=o-n,g=this.#i.at(s?-1:-2),p=[g[0],g[2]];for(const v of this.#i){const[m,b,y]=v;v[0]=(m-d)/u,v[1]=(b-f)/h,v[2]=(y-f)/h}this.#t=new Float32Array([d,f,u,h]),this.#e=p}getOutlines(){this.#i.sort((i,n)=>i[0]-n[0]||i[1]-n[1]||i[2]-n[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#u(i)),this.#l(i)):(this.#o(i),t.push(...this.#u(i)));return this.#a(t)}#a(t){const i=[],n=new Set;for(const r of t){const[o,l,c]=r;i.push([o,l,r],[o,c,r])}i.sort((r,o)=>r[1]-o[1]||r[0]-o[0]);for(let r=0,o=i.length;r<o;r+=2){const l=i[r][2],c=i[r+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}const s=[];let a;for(;n.size>0;){const r=n.values().next().value;let[o,l,c,u,h]=r;n.delete(r);let d=o,f=l;for(a=[o,c],s.push(a);;){let g;if(n.has(u))g=u;else if(n.has(h))g=h;else break;n.delete(g),[o,l,c,u,h]=g,d!==o&&(a.push(d,f,o,f===l?l:c),d=o),f=f===l?c:l}a.push(d,f)}return new S_(s,this.#t,this.#e)}#s(t){const i=this.#n;let n=0,s=i.length-1;for(;n<=s;){const a=n+s>>1,r=i[a][0];if(r===t)return a;r<t?n=a+1:s=a-1}return s+1}#l([,t,i]){const n=this.#s(t);this.#n.splice(n,0,[t,i])}#o([,t,i]){const n=this.#s(t);for(let s=n;s<this.#n.length;s++){const[a,r]=this.#n[s];if(a!==t)break;if(a===t&&r===i){this.#n.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,r]=this.#n[s];if(a!==t)break;if(a===t&&r===i){this.#n.splice(s,1);return}}}#u(t){const[i,n,s]=t,a=[[i,n,s]],r=this.#s(s);for(let o=0;o<r;o++){const[l,c]=this.#n[o];for(let u=0,h=a.length;u<h;u++){const[,d,f]=a[u];if(!(c<=d||f<=l)){if(d>=l){if(f>c)a[u][1]=c;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=l,f>c&&a.push([i,c,f])}}}return a}}class S_ extends I{#t;#e;constructor(t,i,n){super(),this.#e=t,this.#t=i,this.lastPoint=n}toSVGPath(){const t=[];for(const i of this.#e){let[n,s]=i;t.push(`M${n} ${s}`);for(let a=2;a<i.length;a+=2){const r=i[a],o=i[a+1];r===n?(t.push(`V${o}`),s=o):o===s&&(t.push(`H${r}`),n=r)}t.push("Z")}return t.join(" ")}serialize([t,i,n,s],a){const r=[],o=n-t,l=s-i;for(const c of this.#e){const u=new Array(c.length);for(let h=0;h<c.length;h+=2)u[h]=t+c[h]*o,u[h+1]=s-c[h+1]*l;r.push(u)}return r}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class ju extends Mn{newFreeDrawOutline(t,i,n,s,a,r){return new x_(t,i,n,s,a,r)}}class x_ extends E0{newOutliner(t,i,n,s,a,r=0){return new ju(t,i,n,s,a,r)}}class Fe{#t=null;#e=null;#i;#n=null;#a=!1;#s=!1;#l=null;#o;#u=null;#c=null;#d;static#h=null;static get _keyboardManager(){return tt(this,"_keyboardManager",new vr([[["Escape","mac+Escape"],Fe.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fe.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fe.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fe.prototype._moveToPrevious],[["Home","mac+Home"],Fe.prototype._moveToBeginning],[["End","mac+End"],Fe.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#s=!1,this.#d=ot.HIGHLIGHT_COLOR,this.#l=t):(this.#s=!0,this.#d=ot.HIGHLIGHT_DEFAULT_COLOR),this.#c=t?._uiManager||i,this.#o=this.#c._eventBus,this.#i=t?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Fe.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const i=this.#c._signal;t.addEventListener("click",this.#m.bind(this),{signal:i}),t.addEventListener("keydown",this.#g.bind(this),{signal:i});const n=this.#e=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){const t=document.createElement("div"),i=this.#c._signal;t.addEventListener("contextmenu",ni,{signal:i}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",Fe.#h[n]);const r=document.createElement("span");a.append(r),r.className="swatch",r.style.backgroundColor=s,a.setAttribute("aria-selected",s===this.#i),a.addEventListener("click",this.#r.bind(this,s),{signal:i}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:i}),t}#r(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const i=t.target.getAttribute("data-color");i&&this.#r(i,t)}_moveToNext(t){if(!this.#b){this.#m(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#b&&this._hideDropdownFromKeyboard();return}this.#b||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#b){this.#m(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#b){this.#m(t);return}this.#n.lastChild?.focus()}#g(t){Fe._keyboardManager.exec(this,t)}#m(t){if(this.#b){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#p.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#n){this.#n.classList.remove("hidden");return}const i=this.#n=this.#f();this.#t.append(i)}#p(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#b(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#b){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const i=this.#c.highlightColors.values();for(const n of this.#n.children)n.setAttribute("aria-selected",i.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Ot extends q{#t=null;#e=0;#i;#n=null;#a=null;#s=null;#l=null;#o=0;#u=null;#c=null;#d=null;#h=!1;#f=null;#r;#g=null;#m="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Z.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Ot.prototype;return tt(this,"_keyboardManager",new vr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Ot._defaultColor,this.#p=t.thickness||Ot._defaultThickness,this.#r=t.opacity||Ot._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#h=!0,this.#y(t),this.#R()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#o=t.focusOffset,this.#A(),this.#R(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#A(){const t=new Pu(this.#i,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const i=new Pu(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=i.getOutlines();const{lastPoint:n}=this.#s;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:i,clipPathId:n}){this.#c=t;const s=1.5;if(this.#s=t.getNewOutline(this.#p/2+s,.0025),i>=0)this.#d=i,this.#n=n,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Ot.#x(this.#c.box,(u-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Ot.#x(this.#s.box,u),path:{d:this.#s.toSVGPath()}})}const[a,r,o,l]=t.box;switch(this.rotation){case 0:this.x=a,this.y=r,this.width=o,this.height=l;break;case 90:{const[u,h]=this.parentDimensions;this.x=r,this.y=1-a,this.width=o*h/u,this.height=l*u/h;break}case 180:this.x=1-a,this.y=1-r,this.width=o,this.height=l;break;case 270:{const[u,h]=this.parentDimensions;this.x=1-r,this.y=a,this.width=o*h/u,this.height=l*u/h;break}}const{lastPoint:c}=this.#s;this.#f=[(c[0]-a)/o,(c[1]-r)/l]}static initialize(t,i){q.initialize(t,i),Ot._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case ot.HIGHLIGHT_DEFAULT_COLOR:Ot._defaultColor=i;break;case ot.HIGHLIGHT_THICKNESS:Ot._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#f}updateParams(t,i){switch(t){case ot.HIGHLIGHT_COLOR:this.#S(i);break;case ot.HIGHLIGHT_THICKNESS:this.#_(i);break}}static get defaultPropertiesToUpdate(){return[[ot.HIGHLIGHT_DEFAULT_COLOR,Ot._defaultColor],[ot.HIGHLIGHT_THICKNESS,Ot._defaultThickness]]}get propertiesToUpdate(){return[[ot.HIGHLIGHT_COLOR,this.color||Ot._defaultColor],[ot.HIGHLIGHT_THICKNESS,this.#p||Ot._defaultThickness],[ot.HIGHLIGHT_FREE,this.#h]]}#S(t){const i=(a,r)=>{this.color=a,this.#r=r,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":r}}),this.#a?.updateColor(a)},n=this.color,s=this.#r;this.addCommands({cmd:i.bind(this,t,Ot._defaultOpacity),undo:i.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#_(t){const i=this.#p,n=s=>{this.#p=s,this.#E(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new Fe({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#N())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#R(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#T():t&&(this.#R(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#E(t){if(!this.#h)return;this.#y({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#R(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#r},rootClass:{highlight:!0,free:this.#h},path:{d:this.#c.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#u&&(this.#u.style.clipPath=this.#n))}static#x([t,i,n,s],a){switch(a){case 90:return[1-i-s,t,s,n];case 180:return[1-t-n,1-i-s,n,s];case 270:return[i,1-t-n,s,n]}return[t,i,n,s]}rotate(t){const{drawLayer:i}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=Ot.#x(this.#c.box,t)):n=Ot.#x([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:Ot.#x(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const i=this.#u=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#n;const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),Go(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#M(t){Ot._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#l,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#C(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#N(){return this.#h?this.rotation:0}#k(){if(this.#h)return null;const[t,i]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#i,r=new Float32Array(a.length*8);let o=0;for(const{x:l,y:c,width:u,height:h}of a){const d=l*t+n,f=(1-c)*i+s;r[o]=r[o+4]=d,r[o+1]=r[o+3]=f,r[o+2]=r[o+6]=d+u*t,r[o+5]=r[o+7]=f-h*i,o+=8}return r}#P(t){return this.#c.serialize(t,this.#N())}static startHighlighting(t,i,{target:n,x:s,y:a}){const{x:r,y:o,width:l,height:c}=n.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=f=>{u.abort(),this.#v(t,f)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Re,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",ni,{signal:h}),n.addEventListener("pointermove",this.#w.bind(this,t),{signal:h}),this._freeHighlight=new ju({x:s,y:a},[r,o,l,c],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#w(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#v(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,n){let s=null;if(t instanceof _0){const{data:{quadPoints:g,rect:p,rotation:v,id:m,color:b,opacity:y,popupRef:A},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:Z.HIGHLIGHT,color:Array.from(b),opacity:y,quadPoints:g,boxes:null,pageIndex:x-1,rect:p.slice(0),rotation:v,id:m,deleted:!1,popupRef:A}}else if(t instanceof ad){const{data:{inkLists:g,rect:p,rotation:v,id:m,color:b,borderStyle:{rawWidth:y},popupRef:A},parent:{page:{pageNumber:x}}}=t;s=t={annotationType:Z.HIGHLIGHT,color:Array.from(b),thickness:y,inkLists:g,boxes:null,pageIndex:x-1,rect:p.slice(0),rotation:v,id:m,deleted:!1,popupRef:A}}const{color:a,quadPoints:r,inkLists:o,opacity:l}=t,c=await super.deserialize(t,i,n);c.color=U.makeHexColor(...a),c.#r=l||1,o&&(c.#p=t.thickness),c.annotationElementId=t.id||null,c._initialData=s;const[u,h]=c.pageDimensions,[d,f]=c.pageTranslation;if(r){const g=c.#i=[];for(let p=0;p<r.length;p+=8)g.push({x:(r[p]-d)/u,y:1-(r[p+1]-f)/h,width:(r[p+2]-r[p])/u,height:(r[p+1]-r[p+5])/h});c.#A(),c.#R(),c.rotate(c.rotation)}else if(o){c.#h=!0;const g=o[0],p={x:g[0]-d,y:h-(g[1]-f)},v=new ju(p,[0,0,u,h],1,c.#p/2,!0,.001);for(let y=0,A=g.length;y<A;y+=2)p.x=g[y]-d,p.y=h-(g[y+1]-f),v.add(p);const{id:m,clipPathId:b}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:v.toSVGPath()}},!0,!0);c.#y({highlightOutlines:v.getOutlines(),highlightId:m,clipPathId:b}),c.#R()}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=q._colorManager.convert(this.color),s={annotationType:Z.HIGHLIGHT,color:n,opacity:this.#r,thickness:this.#p,quadPoints:this.#k(),outlines:this.#P(i),pageIndex:this.pageIndex,rect:i,rotation:this.#N(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#L(s)?null:(s.id=this.annotationElementId,s)}#L(t){const{color:i}=this._initialData;return t.color.some((n,s)=>n!==i[s])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class __{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,n]of Object.entries(t))this.updateProperty(i,n)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){mt("Not implemented")}}class V extends q{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static#s=NaN;static#l=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:i,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#m(t.box)}#d(t,i){const{id:n}=i.drawLayer.draw(V._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,i){const n=new Set(Object.keys(t));for(const[s,a]of Object.entries(i))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){mt("Not implemented")}static get typesMap(){mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(V.#i.updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,i[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,i[s]]);return t}_updateProperty(t,i,n){const s=this._drawingOptions,a=s[i],r=o=>{s.updateProperty(i,o);const l=this.#t.updateProperty(i,o);l&&this.#m(l),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,V._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,V._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p(t,i)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,V._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#r([t,i,n,s]){const{parentDimensions:[a,r],rotation:o}=this;switch(o){case 90:return[i,1-t,n*(r/a),s*(a/r)];case 180:return[1-t,1-i,n,s];case 270:return[1-i,t,n*(r/a),s*(a/r)];default:return[t,i,n,s]}}#g(){const{x:t,y:i,width:n,height:s,parentDimensions:[a,r],rotation:o}=this;switch(o){case 90:return[1-i,t,n*(a/r),s*(r/a)];case 180:return[1-t,1-i,n,s];case 270:return[i,1-t,n*(a/r),s*(r/a)];default:return[t,i,n,s]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#r(t),this.div){this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}this._onResized()}#p(){const{x:t,y:i,width:n,height:s,rotation:a,parentRotation:r,parentDimensions:[o,l]}=this;switch((a*4+r)/90){case 1:return[1-i-s,t,s,n];case 2:return[1-t-n,1-i-s,n,s];case 3:return[i,1-t-n,s,n];case 4:return[t,i-n*(o/l),s*(l/o),n*(o/l)];case 5:return[1-i,t,n*(o/l),s*(l/o)];case 6:return[1-t-s*(l/o),1-i,s*(l/o),n*(o/l)];case 7:return[i-n*(o/l),1-t-s*(l/o),n*(o/l),s*(l/o)];case 8:return[t-n,i-s,n,s];case 9:return[1-i,t-n,s,n];case 10:return[1-t,1-i,n,s];case 11:return[i-s,1-t,s,n];case 12:return[t-s*(l/o),i,s*(l/o),n*(o/l)];case 13:return[1-i-n*(o/l),t-s*(l/o),n*(o/l),s*(l/o)];case 14:return[1-t,1-i-n*(o/l),s*(l/o),n*(o/l)];case 15:return[i,1-t,n*(o/l),s*(l/o)];default:return[t,i,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,V._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,n,s,a){mt("Not implemented")}static startDrawing(t,i,n,s){const{target:a,offsetX:r,offsetY:o,pointerId:l,pointerType:c}=s;if(V.#l&&V.#l!==c)return;const{viewport:{rotation:u}}=t,{width:h,height:d}=a.getBoundingClientRect(),f=V.#n=new AbortController,g=t.combinedSignal(f);if(V.#s||=l,V.#l??=c,window.addEventListener("pointerup",p=>{V.#s===p.pointerId?this._endDraw(p):V.#o?.delete(p.pointerId)},{signal:g}),window.addEventListener("pointercancel",p=>{V.#s===p.pointerId?this._currentParent.endDrawingSession():V.#o?.delete(p.pointerId)},{signal:g}),window.addEventListener("pointerdown",p=>{V.#l===p.pointerType&&((V.#o||=new Set).add(p.pointerId),V.#i.isCancellable()&&(V.#i.removeLastElement(),V.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ni,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",p=>{p.timeStamp===V.#u&&Re(p)},{signal:g}),t.toggleDrawing(),i._editorUndoBar?.hide(),V.#i){t.drawLayer.updateProperties(this._currentDrawId,V.#i.startNew(r,o,h,d,u));return}i.updateUIForDefaultProperties(this),V.#i=this.createDrawerInstance(r,o,h,d,u),V.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(V.#a.toSVGProperties(),V.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(V.#u=-1,!V.#i)return;const{offsetX:i,offsetY:n,pointerId:s}=t;if(V.#s===s){if(V.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,V.#i.add(i,n)),V.#u=t.timeStamp,Re(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,V.#i=null,V.#a=null,V.#l=null,V.#u=NaN),V.#n&&(V.#n.abort(),V.#n=null,V.#s=NaN,V.#o=null)}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t&&i.drawLayer.updateProperties(this._currentDrawId,V.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=V.#i,s=this._currentDrawId,a=n.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:ot.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ot.DRAW_STEP),!V.#i.isEmpty()){const{pageDimensions:[n,s],scale:a}=i,r=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:V.#i.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:V.#a,mustBeCommitted:!t});return this._cleanup(!0),r}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,n,s,a,r){mt("Not implemented")}static async deserialize(t,i,n){const{rawDims:{pageWidth:s,pageHeight:a,pageX:r,pageY:o}}=i.viewport,l=this.deserializeDraw(r,o,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,i,n);return c.createDrawingOptions(t),c.#c({drawOutlines:l}),c.#f(),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[i,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([i,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class w_{#t=new Float64Array(6);#e;#i;#n;#a;#s;#l="";#o=0;#u=new wl;#c;#d;constructor(t,i,n,s,a,r){this.#c=n,this.#d=s,this.#n=a,this.#a=r,[t,i]=this.#h(t,i);const o=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i],this.#i=[{line:o,points:this.#s}],this.#t.set(o,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#h(t,i){return I._normalizePoint(t,i,this.#c,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,i){[t,i]=this.#h(t,i);const[n,s,a,r]=this.#t.subarray(2,6),o=t-a,l=i-r;return Math.hypot(this.#c*o,this.#d*l)<=2?null:(this.#s.push(t,i),isNaN(n)?(this.#t.set([a,r,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,a,r,t,i],0),this.#e.push(...I.createBezierPoints(n,s,a,r,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const n=this.add(t,i);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,n,s,a){this.#c=n,this.#d=s,this.#n=a,[t,i]=this.#h(t,i);const r=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i];const o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:r,points:this.#s}),this.#t.set(r,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#l="";for(let t=0,i=this.#i.length;t<i;t++){const{line:n,points:s}=this.#i[t];this.#e=n,this.#s=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=I.svgRound(this.#e[4]),i=I.svgRound(this.#e[5]);if(this.#s.length===2)return this.#l=`${this.#l} M ${t} ${i} Z`,this.#l;if(this.#s.length<=6){const s=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,s)} M ${t} ${i}`,this.#o=6}if(this.#s.length===4){const s=I.svgRound(this.#e[10]),a=I.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${s} ${a}`,this.#o=12,this.#l}const n=[];this.#o===0&&(n.push(`M ${t} ${i}`),this.#o=6);for(let s=this.#o,a=this.#e.length;s<a;s+=6){const[r,o,l,c,u,h]=this.#e.slice(s,s+6).map(I.svgRound);n.push(`C${r} ${o} ${l} ${c} ${u} ${h}`)}return this.#l+=n.join(" "),this.#o=this.#e.length,this.#l}getOutlines(t,i,n,s){const a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#i,t,i,n,this.#n,this.#a,s),this.#t=null,this.#e=null,this.#i=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class wl extends I{#t;#e=0;#i;#n;#a;#s;#l;#o;#u;build(t,i,n,s,a,r,o){this.#a=i,this.#s=n,this.#l=s,this.#o=a,this.#u=r,this.#i=o??0,this.#n=t,this.#h()}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#n){if(t.push(`M${I.svgRound(i[4])} ${I.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12){t.push(`L${I.svgRound(i[10])} ${I.svgRound(i[11])}`);continue}for(let n=6,s=i.length;n<s;n+=6){const[a,r,o,l,c,u]=i.subarray(n,n+6).map(I.svgRound);t.push(`C${a} ${r} ${o} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,i,n,s],a){const r=[],o=[],[l,c,u,h]=this.#d();let d,f,g,p,v,m,b,y,A;switch(this.#o){case 0:A=I._rescale,d=t,f=i+s,g=n,p=-s,v=t+l*n,m=i+(1-c-h)*s,b=t+(l+u)*n,y=i+(1-c)*s;break;case 90:A=I._rescaleAndSwap,d=t,f=i,g=n,p=s,v=t+c*n,m=i+l*s,b=t+(c+h)*n,y=i+(l+u)*s;break;case 180:A=I._rescale,d=t+n,f=i,g=-n,p=s,v=t+(1-l-u)*n,m=i+c*s,b=t+(1-l)*n,y=i+(c+h)*s;break;case 270:A=I._rescaleAndSwap,d=t+n,f=i+s,g=-n,p=-s,v=t+(1-c-h)*n,m=i+(1-l-u)*s,b=t+(1-c)*n,y=i+(1-l)*s;break}for(const{line:x,points:E}of this.#n)r.push(A(x,d,f,g,p,a?new Array(x.length):null)),o.push(A(E,d,f,g,p,a?new Array(E.length):null));return{lines:r,points:o,rect:[v,m,b,y]}}static deserialize(t,i,n,s,a,{paths:{lines:r,points:o},rotation:l,thickness:c}){const u=[];let h,d,f,g,p;switch(l){case 0:p=I._rescale,h=-t/n,d=i/s+1,f=1/n,g=-1/s;break;case 90:p=I._rescaleAndSwap,h=-i/s,d=-t/n,f=1/s,g=1/n;break;case 180:p=I._rescale,h=t/n+1,d=-i/s,f=-1/n,g=1/s;break;case 270:p=I._rescaleAndSwap,h=i/s+1,d=t/n+1,f=-1/s,g=-1/n;break}if(!r){r=[];for(const m of o){const b=m.length;if(b===2){r.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1]]));continue}if(b===4){r.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1],NaN,NaN,NaN,NaN,m[2],m[3]]));continue}const y=new Float32Array(3*(b-2));r.push(y);let[A,x,E,w]=m.subarray(0,4);y.set([NaN,NaN,NaN,NaN,A,x],0);for(let T=4;T<b;T+=2){const M=m[T],D=m[T+1];y.set(I.createBezierPoints(A,x,E,w,M,D),(T-2)*3),[A,x,E,w]=[E,w,M,D]}}}for(let m=0,b=r.length;m<b;m++)u.push({line:p(r[m].map(y=>y??NaN),h,d,f,g),points:p(o[m].map(y=>y??NaN),h,d,f,g)});const v=new wl;return v.build(u,n,s,1,l,c,a),v}#c(t=this.#u){const i=this.#i+t/2*this.#l;return this.#o%180===0?[i/this.#a,i/this.#s]:[i/this.#s,i/this.#a]}#d(){const[t,i,n,s]=this.#t,[a,r]=this.#c(0);return[t+a,i+r,n-2*a,s-2*r]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let o=4,l=s.length;o<l;o+=6){const[c,u]=s.subarray(o,o+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],u),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],u)}continue}let a=s[4],r=s[5];for(let o=6,l=s.length;o<l;o+=6){const[c,u,h,d,f,g]=s.subarray(o,o+6);U.bezierBoundingBox(a,r,c,u,h,d,f,g,t),a=f,r=g}}const[i,n]=this.#c();t[0]=Math.min(1,Math.max(0,t[0]-i)),t[1]=Math.min(1,Math.max(0,t[1]-n)),t[2]=Math.min(1,Math.max(0,t[2]+i)),t[3]=Math.min(1,Math.max(0,t[3]+n)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,n]=this.#c();this.#u=t;const[s,a]=this.#c(),[r,o]=[s-i,a-n],l=this.#t;return l[0]-=r,l[1]-=o,l[2]+=2*r,l[3]+=2*o,l}updateParentDimensions([t,i],n){const[s,a]=this.#c();this.#a=t,this.#s=i,this.#l=n;const[r,o]=this.#c(),l=r-s,c=o-a,u=this.#t;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(I.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${I.svgRound(t)} ${I.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let n=0,s=0,a=0,r=0,o=0,l=0;switch(this.#e){case 90:s=i/t,a=-t/i,o=t;break;case 180:n=-1,r=-1,o=t,l=i;break;case 270:s=-i/t,a=t/i,l=i;break;default:return""}return`matrix(${n} ${s} ${a} ${r} ${I.svgRound(o)} ${I.svgRound(l)})`}getPathResizingSVGProperties([t,i,n,s]){const[a,r]=this.#c(),[o,l,c,u]=this.#t;if(Math.abs(c-a)<=I.PRECISION||Math.abs(u-r)<=I.PRECISION){const p=t+n/2-(o+c/2),v=i+s/2-(l+u/2);return{path:{"transform-origin":`${I.svgRound(t)} ${I.svgRound(i)}`,transform:`${this.rotationTransform} translate(${p} ${v})`}}}const h=(n-2*a)/(c-2*a),d=(s-2*r)/(u-2*r),f=c/n,g=u/s;return{path:{"transform-origin":`${I.svgRound(o)} ${I.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${g}) translate(${I.svgRound(a)} ${I.svgRound(r)}) scale(${h} ${d}) translate(${I.svgRound(-a)} ${I.svgRound(-r)})`}}}getPathResizedSVGProperties([t,i,n,s]){const[a,r]=this.#c(),o=this.#t,[l,c,u,h]=o;if(o[0]=t,o[1]=i,o[2]=n,o[3]=s,Math.abs(u-a)<=I.PRECISION||Math.abs(h-r)<=I.PRECISION){const v=t+n/2-(l+u/2),m=i+s/2-(c+h/2);for(const{line:b,points:y}of this.#n)I._translate(b,v,m,b),I._translate(y,v,m,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${I.svgRound(t)} ${I.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(n-2*a)/(u-2*a),f=(s-2*r)/(h-2*r),g=-d*(l+a)+t+a,p=-f*(c+r)+i+r;if(d!==1||f!==1||g!==0||p!==0)for(const{line:v,points:m}of this.#n)I._rescale(v,g,p,d,f,v),I._rescale(m,g,p,d,f,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${I.svgRound(t)} ${I.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],n){const[s,a]=n,r=this.#t,o=t-r[0],l=i-r[1];if(this.#a===s&&this.#s===a)for(const{line:c,points:u}of this.#n)I._translate(c,o,l,c),I._translate(u,o,l,u);else{const c=this.#a/s,u=this.#s/a;this.#a=s,this.#s=a;for(const{line:h,points:d}of this.#n)I._rescale(h,o,l,c,u,h),I._rescale(d,o,l,c,u,d);r[2]*=c,r[3]*=u}return r[0]=t,r[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${I.svgRound(t)} ${I.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${I.svgRound(t[0])} ${I.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class rd extends __{#t;constructor(t){super(),this.#t=t,super.updateProperties({fill:"none",stroke:q._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this.#t.realScale),super.updateSVGProperty(t,i)}clone(){const t=new rd(this.#t);return t.updateAll(this),t}}class od extends V{static _type="ink";static _editorType=Z.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,i){q.initialize(t,i),this._defaultDrawingOptions=new rd(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return tt(this,"typesMap",new Map([[ot.INK_THICKNESS,"stroke-width"],[ot.INK_COLOR,"stroke"],[ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,n,s,a){return new w_(t,i,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,n,s,a,r){return wl.deserialize(t,i,n,s,a,r)}static async deserialize(t,i,n){let s=null;if(t instanceof ad){const{data:{inkLists:r,rect:o,rotation:l,id:c,color:u,opacity:h,borderStyle:{rawWidth:d},popupRef:f},parent:{page:{pageNumber:g}}}=t;s=t={annotationType:Z.INK,color:Array.from(u),thickness:d,opacity:h,paths:{points:r},boxes:null,pageIndex:g-1,rect:o.slice(0),rotation:l,id:c,deleted:!1,popupRef:f}}const a=await super.deserialize(t,i,n);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:n}=this;i.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:n}){this._drawingOptions=od.getDefaultDrawingOptions({stroke:U.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":r,"stroke-width":o}}=this,l={annotationType:Z.INK,color:q._colorManager.convert(a),opacity:r,thickness:o,paths:{lines:i,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!this.#t(l)?null:(l.id=this.annotationElementId,l)}#t(t){const{color:i,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((r,o)=>r!==i[o])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a}renderAnnotationElement(t){const{points:i,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:i}),null}}class ld extends q{#t=null;#e=null;#i=null;#n=null;#a=null;#s="";#l=null;#o=null;#u=!1;#c=!1;static _type="stamp";static _editorType=Z.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile}static initialize(t,i){q.initialize(t,i)}static get supportedTypes(){return tt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return tt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Z.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#d(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#s=t.file.name),this.#r()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:r}=t||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:s,width:a,height:r,channels:s.length/(a*r)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),i&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#f(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#d(n,!0)).finally(()=>this.#h());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#d(s)).finally(()=>this.#h());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(s=>this.#d(s)).finally(()=>this.#h());return}const t=document.createElement("input");t.type="file",t.accept=ld.supportedTypesStr;const i=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(s)}n()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>this.#h()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#o&&(clearTimeout(this.#o),this.#o=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#f();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#r():this.#f(),this.width&&!this.annotationElementId){const[n,s]=this.parentDimensions;this.setAt(t*n,i*s,this.width*n,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#o!==null&&clearTimeout(this.#o);const t=200;this.#o=setTimeout(()=>{this.#o=null,this.#m()},t)}#r(){const{div:t}=this;let{width:i,height:n}=this.#t;const[s,a]=this.pageDimensions,r=.75;if(this.width)i=this.width*s,n=this.height*a;else if(i>r*s||n>r*a){const u=Math.min(r*s/i,r*a/n);i*=u,n*=u}const[o,l]=this.parentDimensions;this.setDims(i*o/s,n*l/a),this._uiManager.enableWaiting(!1);const c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=i/s,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(t,i,n=!1){t||(t=224);const{width:s,height:a}=this.#t,r=new Ou;let o=this.#t,l=s,c=a,u=null;if(i){if(s>i||a>i){const E=Math.min(i/s,i/a);l=Math.floor(s*E),c=Math.floor(a*E)}u=document.createElement("canvas");const d=u.width=Math.ceil(l*r.sx),f=u.height=Math.ceil(c*r.sy);this.#u||(o=this.#g(d,f));const g=u.getContext("2d");g.filter=this._uiManager.hcmFilter;let p="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",v="#42414d");const m=15,b=m*r.sx,y=m*r.sy,A=new OffscreenCanvas(b*2,y*2),x=A.getContext("2d");x.fillStyle=p,x.fillRect(0,0,b*2,y*2),x.fillStyle=v,x.fillRect(0,0,b,y),x.fillRect(b,y,b,y),g.fillStyle=g.createPattern(A,"repeat"),g.fillRect(0,0,d,f),g.drawImage(o,0,0,o.width,o.height,0,0,d,f)}let h=null;if(n){let d,f;if(r.symmetric&&o.width<t&&o.height<t)d=o.width,f=o.height;else if(o=this.#t,s>t||a>t){const v=Math.min(t/s,t/a);d=Math.floor(s*v),f=Math.floor(a*v),this.#u||(o=this.#g(d,f))}const p=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});p.drawImage(o,0,0,o.width,o.height,0,0,d,f),h={width:d,height:f,data:p.getImageData(0,0,d,f).data}}return{canvas:u,width:l,height:c,imageData:h}}#g(t,i){const{width:n,height:s}=this.#t;let a=n,r=s,o=this.#t;for(;a>2*t||r>2*i;){const l=a,c=r;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),r>2*i&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const u=new OffscreenCanvas(a,r);u.getContext("2d").drawImage(o,0,0,l,c,0,0,a,r),o=u.transferToImageBitmap()}return o}#m(){const[t,i]=this.parentDimensions,{width:n,height:s}=this,a=new Ou,r=Math.ceil(n*t*a.sx),o=Math.ceil(s*i*a.sy),l=this.#l;if(!l||l.width===r&&l.height===o)return;l.width=r,l.height=o;const c=this.#u?this.#t:this.#g(r,o),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,o)}getImageForAltText(){return this.#l}#p(t){if(t){if(this.#u){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#u){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*qs.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*qs.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(s,a);return r.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),r.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,n){let s=null;if(t instanceof w0){const{data:{rect:g,rotation:p,id:v,structParent:m,popupRef:b},container:y,parent:{page:{pageNumber:A}}}=t,x=y.querySelector("canvas"),E=n.imageManager.getFromCanvas(y.id,x);x.remove();const w=(await i._structTree.getAriaAttributes(`${$h}${v}`))?.get("aria-label")||"";s=t={annotationType:Z.STAMP,bitmapId:E.id,bitmap:E.bitmap,pageIndex:A-1,rect:g.slice(0),rotation:p,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:m,popupRef:b}}const a=await super.deserialize(t,i,n),{rect:r,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:h}=t;c&&n.imageManager.isValidId(c)?(a.#e=c,o&&(a.#t=o)):a.#n=l,a.#u=u;const[d,f]=a.pageDimensions;return a.width=(r[2]-r[0])/d,a.height=(r[3]-r[1])/f,a.annotationElementId=t.id||null,h&&(a.altTextData=h),a._initialData=s,a.#c=!!s,a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Z.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#p(!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const o=this.#b(n);if(o.isSame)return null;o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||=new Map;const r=this.#u?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:r,serialized:n}),n.bitmap=this.#p(!1);else if(this.#u){const o=i.stamps.get(this.#e);r>o.area&&(o.area=r,o.serialized.bitmap.close(),o.serialized.bitmap=this.#p(!1))}return n}#b(t){const{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===i,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class wi{#t;#e=!1;#i=null;#n=null;#a=null;#s=new Map;#l=!1;#o=!1;#u=!1;#c=null;#d=null;#h=null;#f=null;#r;static _initialized=!1;static#g=new Map([qt,od,ld,Ot].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:r,drawLayer:o,textLayer:l,viewport:c,l10n:u}){const h=[...wi.#g.values()];if(!wi._initialized){wi._initialized=!0;for(const d of h)d.initialize(u,t)}t.registerEditorTypes(h),this.#r=t,this.pageIndex=i,this.div=n,this.#t=a,this.#i=r,this.viewport=c,this.#h=l,this.drawLayer=o,this._structTree=s,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===Z.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#y(),t){case Z.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const n of wi.#g.values())i.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}cleanUndoStack(t){this.#r.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#r.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#i){this.#u=!1;return}const i=this.#i.getEditableAnnotations();for(const n of i){if(n.hide(),this.#r.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else i.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#i){const s=this.#i.getEditableAnnotations();for(const a of s){const{id:r}=a.data;if(this.#r.isDeletedAnnotationElement(r))continue;let o=i.get(r);if(o){o.resetAnnotationElement(a),o.show(!1),a.show();continue}o=t.get(r),o&&(this.#r.addChangedExistingAnnotation(o),o.renderAnnotationElement(a)&&o.show(!1)),a.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of wi.#g.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#r.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#m(t){this.#r.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:n}=fe.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),Ot.startHighlighting(this,this.#r.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#r.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#r.isDeletedAnnotationElement(i)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),q.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return this.#r.getId()}get#p(){return wi.#g.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#b(t){const i=this.#p;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#r.updateToolbar(t),this.#r.updateMode(t);const{offsetX:n,offsetY:s}=this.#A(),a=this.getNextId(),r=this.#b({parent:this,id:a,x:n,y:s,uiManager:this.#r,isCentered:!0,...i});r&&this.add(r)}async deserialize(t){return await wi.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,i,n={}){const s=this.getNextId(),a=this.#b({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:i,...n});return a&&this.add(a),a}#A(){const{x:t,y:i,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),r=Math.max(0,i),o=Math.min(window.innerWidth,t+n),l=Math.min(window.innerHeight,i+s),c=(a+o)/2-t,u=(r+l)/2-i,[h,d]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:d}}addNewEditor(){this.createAndAddNewEditor(this.#A(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:i}=fe.platform;if(!(t.button!==0||t.ctrlKey&&i)&&t.target===this.div&&this.#l&&(this.#l=!1,!(this.#p?.isDrawer&&this.#p.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#r.getMode()===Z.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#l=!0,this.#p?.isDrawer){this.startDrawingSession(t);return}const n=this.#r.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#c){this.#p.startDrawing(this,this.#r,!1,t);return}this.#r.setCurrentDrawingSession(this),this.#c=new AbortController;const i=this.#r.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#p.startDrawing(this,this.#r,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#r.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#p.endDrawing(t)):null}findNewParent(t,i,n){const s=this.#r.findParent(i,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#p.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#y(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Hn(this.div,t);for(const i of this.#r.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#y();const i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Hn(this.div,{rotation:n}),i!==n)for(const s of this.#s.values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#r.viewParameters.realScale}}class ce{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(const i of this.#i.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return tt(this,"_svgFactory",new sd)}static#a(t,[i,n,s,a]){const{style:r}=t;r.top=`${100*n}%`,r.left=`${100*i}%`,r.width=`${100*s}%`,r.height=`${100*a}%`}#s(){const t=ce._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,i){const n=ce._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${i}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=ce._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${i}`),a.classList.add("clip"),s}#o(t,i){for(const[n,s]of Object.entries(i))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,i=!1,n=!1){const s=this.#e++,a=this.#s(),r=ce._svgFactory.createElement("defs");a.append(r);const o=ce._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(s,o);const c=n?this.#l(r,l):null,u=ce._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(a,t),this.#i.set(s,a),{id:s,clipPathId:`url(#${c})`}}drawOutline(t,i){const n=this.#e++,s=this.#s(),a=ce._svgFactory.createElement("defs");s.append(a);const r=ce._svgFactory.createElement("path");a.append(r);const o=`path_p${this.pageIndex}_${n}`;r.setAttribute("id",o),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(i){const h=ce._svgFactory.createElement("mask");a.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=ce._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=ce._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ce._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#i.set(n,s),n}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:n,bbox:s,rootClass:a,path:r}=i,o=typeof t=="number"?this.#i.get(t):t;if(o){if(n&&this.#o(o,n),s&&ce.#a(o,s),a){const{classList:l}=o;for(const[c,u]of Object.entries(a))l.toggle(c,u)}if(r){const c=o.firstChild.firstChild;this.#o(c,r)}}}updateParent(t,i){if(i===this)return;const n=this.#i.get(t);n&&(i.#t.append(n),this.#i.delete(t),i.#i.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(const t of this.#i.values())t.remove();this.#i.clear(),this.#n.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Pu};Y.AbortException;Y.AnnotationEditorLayer;Y.AnnotationEditorParamsType;Y.AnnotationEditorType;Y.AnnotationEditorUIManager;Y.AnnotationLayer;Y.AnnotationMode;Y.ColorPicker;Y.DOMSVGFactory;Y.DrawLayer;Y.FeatureTest;var C0=Y.GlobalWorkerOptions;Y.ImageKind;Y.InvalidPDFException;Y.MissingPDFException;Y.OPS;Y.OutputScale;Y.PDFDataRangeTransport;Y.PDFDateString;Y.PDFWorker;Y.PasswordResponses;Y.PermissionFlag;Y.PixelsPerInch;Y.RenderingCancelledException;var E_=Y.TextLayer;Y.TouchManager;Y.UnexpectedResponseException;Y.Util;Y.VerbosityLevel;Y.XfaLayer;Y.build;Y.createValidAbsoluteUrl;Y.fetchData;var C_=Y.getDocument;Y.getFilenameFromUrl;Y.getPdfFilenameFromUrl;Y.getXfaPageViewport;Y.isDataScheme;Y.isPdfFile;Y.noContextMenu;Y.normalizeUnicode;Y.setLayerDimensions;Y.shadow;Y.stopEvent;Y.version;function El(){return typeof window<"u"}function ia(e){return T0(e)?(e.nodeName||"").toLowerCase():"#document"}function ze(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bi(e){var t;return(t=(T0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function T0(e){return El()?e instanceof Node||e instanceof ze(e).Node:!1}function Lt(e){return El()?e instanceof Element||e instanceof ze(e).Element:!1}function si(e){return El()?e instanceof HTMLElement||e instanceof ze(e).HTMLElement:!1}function Iu(e){return!El()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ze(e).ShadowRoot}const T_=new Set(["inline","contents"]);function Sr(e){const{overflow:t,overflowX:i,overflowY:n,display:s}=Qe(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!T_.has(s)}const M_=new Set(["table","td","th"]);function R_(e){return M_.has(ia(e))}const D_=[":popover-open",":modal"];function Cl(e){return D_.some(t=>{try{return e.matches(t)}catch{return!1}})}const N_=["transform","translate","scale","rotate","perspective"],O_=["transform","translate","scale","rotate","perspective","filter"],L_=["paint","layout","strict","content"];function cd(e){const t=Tl(),i=Lt(e)?Qe(e):e;return N_.some(n=>i[n]?i[n]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||O_.some(n=>(i.willChange||"").includes(n))||L_.some(n=>(i.contain||"").includes(n))}function k_(e){let t=Ii(e);for(;si(t)&&!yn(t);){if(cd(t))return t;if(Cl(t))return null;t=Ii(t)}return null}function Tl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const z_=new Set(["html","body","#document"]);function yn(e){return z_.has(ia(e))}function Qe(e){return ze(e).getComputedStyle(e)}function Ml(e){return Lt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ii(e){if(ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Iu(e)&&e.host||bi(e);return Iu(t)?t.host:t}function M0(e){const t=Ii(e);return yn(t)?e.ownerDocument?e.ownerDocument.body:e.body:si(t)&&Sr(t)?t:M0(t)}function hn(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=M0(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),r=ze(s);if(a){const o=Fu(r);return t.concat(r,r.visualViewport||[],Sr(s)?s:[],o&&i?hn(o):[])}return t.concat(s,hn(s,[],i))}function Fu(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ug(e,t){if(!e||!t)return!1;const i=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(i&&Iu(i)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function P_(e){return"nativeEvent"in e}function j_(e){return e.matches("html,body")}function hg(e){return e?.ownerDocument||document}function Cc(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const i=e;return i.target!=null&&t.contains(i.target)}function va(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Vo=Math.min,kn=Math.max,qo=Math.round,Yr=Math.floor,fi=e=>({x:e,y:e});function dg(e,t,i){return kn(e,Vo(t,i))}function ud(e,t){return typeof e=="function"?e(t):e}function Rl(e){return e.split("-")[0]}function R0(e){return e.split("-")[1]}function D0(e){return e==="x"?"y":"x"}function I_(e){return e==="y"?"height":"width"}const F_=new Set(["top","bottom"]);function Dl(e){return F_.has(Rl(e))?"y":"x"}function H_(e){return D0(Dl(e))}function B_(e){return{top:0,right:0,bottom:0,left:0,...e}}function U_(e){return typeof e!="number"?B_(e):{top:e,right:e,bottom:e,left:e}}function Xo(e){const{x:t,y:i,width:n,height:s}=e;return{width:n,height:s,top:i,left:t,right:t+n,bottom:i+s,x:t,y:i}}function fg(e,t,i){let{reference:n,floating:s}=e;const a=Dl(t),r=H_(t),o=I_(r),l=Rl(t),c=a==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,d=n[o]/2-s[o]/2;let f;switch(l){case"top":f={x:u,y:n.y-s.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-s.width,y:h};break;default:f={x:n.x,y:n.y}}switch(R0(t)){case"start":f[r]-=d*(i&&c?-1:1);break;case"end":f[r]+=d*(i&&c?-1:1);break}return f}const G_=async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:r}=i,o=a.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=fg(c,n,l),d=n,f={},g=0;for(let p=0;p<o.length;p++){const{name:v,fn:m}=o[p],{x:b,y,data:A,reset:x}=await m({x:u,y:h,initialPlacement:n,placement:d,strategy:s,middlewareData:f,rects:c,platform:r,elements:{reference:e,floating:t}});u=b??u,h=y??h,f={...f,[v]:{...f[v],...A}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(c=x.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):x.rects),{x:u,y:h}=fg(c,d,l)),p=-1)}return{x:u,y:h,placement:d,strategy:s,middlewareData:f}};async function V_(e,t){var i;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:r,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=ud(t,e),g=U_(f),v=o[d?h==="floating"?"reference":"floating":h],m=Xo(await a.getClippingRect({element:(i=await(a.isElement==null?void 0:a.isElement(v)))==null||i?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:n,y:s,width:r.floating.width,height:r.floating.height}:r.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},x=Xo(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:y,strategy:l}):b);return{top:(m.top-x.top+g.top)/A.y,bottom:(x.bottom-m.bottom+g.bottom)/A.y,left:(m.left-x.left+g.left)/A.x,right:(x.right-m.right+g.right)/A.x}}const q_=new Set(["left","top"]);async function X_(e,t){const{placement:i,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),r=Rl(i),o=R0(i),l=Dl(i)==="y",c=q_.has(r)?-1:1,u=a&&l?-1:1,h=ud(t,e);let{mainAxis:d,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof g=="number"&&(f=o==="end"?g*-1:g),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const Y_=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:s,y:a,placement:r,middlewareData:o}=t,l=await X_(t,e);return r===((i=o.offset)==null?void 0:i.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:r}}}}},$_=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:r=!1,limiter:o={fn:v=>{let{x:m,y:b}=v;return{x:m,y:b}}},...l}=ud(e,t),c={x:i,y:n},u=await V_(t,l),h=Dl(Rl(s)),d=D0(h);let f=c[d],g=c[h];if(a){const v=d==="y"?"top":"left",m=d==="y"?"bottom":"right",b=f+u[v],y=f-u[m];f=dg(b,f,y)}if(r){const v=h==="y"?"top":"left",m=h==="y"?"bottom":"right",b=g+u[v],y=g-u[m];g=dg(b,g,y)}const p=o.fn({...t,[d]:f,[h]:g});return{...p,data:{x:p.x-i,y:p.y-n,enabled:{[d]:a,[h]:r}}}}}};function N0(e){const t=Qe(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=si(e),a=s?e.offsetWidth:i,r=s?e.offsetHeight:n,o=qo(i)!==a||qo(n)!==r;return o&&(i=a,n=r),{width:i,height:n,$:o}}function hd(e){return Lt(e)?e:e.contextElement}function Ls(e){const t=hd(e);if(!si(t))return fi(1);const i=t.getBoundingClientRect(),{width:n,height:s,$:a}=N0(t);let r=(a?qo(i.width):i.width)/n,o=(a?qo(i.height):i.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!o||!Number.isFinite(o))&&(o=1),{x:r,y:o}}const K_=fi(0);function O0(e){const t=ze(e);return!Tl()||!t.visualViewport?K_:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function W_(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==ze(e)?!1:t}function Un(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),a=hd(e);let r=fi(1);t&&(n?Lt(n)&&(r=Ls(n)):r=Ls(e));const o=W_(a,i,n)?O0(a):fi(0);let l=(s.left+o.x)/r.x,c=(s.top+o.y)/r.y,u=s.width/r.x,h=s.height/r.y;if(a){const d=ze(a),f=n&&Lt(n)?ze(n):n;let g=d,p=Fu(g);for(;p&&n&&f!==g;){const v=Ls(p),m=p.getBoundingClientRect(),b=Qe(p),y=m.left+(p.clientLeft+parseFloat(b.paddingLeft))*v.x,A=m.top+(p.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,h*=v.y,l+=y,c+=A,g=ze(p),p=Fu(g)}}return Xo({width:u,height:h,x:l,y:c})}function Nl(e,t){const i=Ml(e).scrollLeft;return t?t.left+i:Un(bi(e)).left+i}function L0(e,t){const i=e.getBoundingClientRect(),n=i.left+t.scrollLeft-Nl(e,i),s=i.top+t.scrollTop;return{x:n,y:s}}function Z_(e){let{elements:t,rect:i,offsetParent:n,strategy:s}=e;const a=s==="fixed",r=bi(n),o=t?Cl(t.floating):!1;if(n===r||o&&a)return i;let l={scrollLeft:0,scrollTop:0},c=fi(1);const u=fi(0),h=si(n);if((h||!h&&!a)&&((ia(n)!=="body"||Sr(r))&&(l=Ml(n)),si(n))){const f=Un(n);c=Ls(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const d=r&&!h&&!a?L0(r,l):fi(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:i.y*c.y-l.scrollTop*c.y+u.y+d.y}}function Q_(e){return Array.from(e.getClientRects())}function J_(e){const t=bi(e),i=Ml(e),n=e.ownerDocument.body,s=kn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=kn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Nl(e);const o=-i.scrollTop;return Qe(n).direction==="rtl"&&(r+=kn(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:r,y:o}}const gg=25;function t1(e,t){const i=ze(e),n=bi(e),s=i.visualViewport;let a=n.clientWidth,r=n.clientHeight,o=0,l=0;if(s){a=s.width,r=s.height;const u=Tl();(!u||u&&t==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const c=Nl(n);if(c<=0){const u=n.ownerDocument,h=u.body,d=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,g=Math.abs(n.clientWidth-h.clientWidth-f);g<=gg&&(a-=g)}else c<=gg&&(a+=c);return{width:a,height:r,x:o,y:l}}const e1=new Set(["absolute","fixed"]);function i1(e,t){const i=Un(e,!0,t==="fixed"),n=i.top+e.clientTop,s=i.left+e.clientLeft,a=si(e)?Ls(e):fi(1),r=e.clientWidth*a.x,o=e.clientHeight*a.y,l=s*a.x,c=n*a.y;return{width:r,height:o,x:l,y:c}}function pg(e,t,i){let n;if(t==="viewport")n=t1(e,i);else if(t==="document")n=J_(bi(e));else if(Lt(t))n=i1(t,i);else{const s=O0(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Xo(n)}function k0(e,t){const i=Ii(e);return i===t||!Lt(i)||yn(i)?!1:Qe(i).position==="fixed"||k0(i,t)}function n1(e,t){const i=t.get(e);if(i)return i;let n=hn(e,[],!1).filter(o=>Lt(o)&&ia(o)!=="body"),s=null;const a=Qe(e).position==="fixed";let r=a?Ii(e):e;for(;Lt(r)&&!yn(r);){const o=Qe(r),l=cd(r);!l&&o.position==="fixed"&&(s=null),(a?!l&&!s:!l&&o.position==="static"&&!!s&&e1.has(s.position)||Sr(r)&&!l&&k0(e,r))?n=n.filter(u=>u!==r):s=o,r=Ii(r)}return t.set(e,n),n}function s1(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const r=[...i==="clippingAncestors"?Cl(t)?[]:n1(t,this._c):[].concat(i),n],o=r[0],l=r.reduce((c,u)=>{const h=pg(t,u,s);return c.top=kn(h.top,c.top),c.right=Vo(h.right,c.right),c.bottom=Vo(h.bottom,c.bottom),c.left=kn(h.left,c.left),c},pg(t,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function a1(e){const{width:t,height:i}=N0(e);return{width:t,height:i}}function r1(e,t,i){const n=si(t),s=bi(t),a=i==="fixed",r=Un(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=fi(0);function c(){l.x=Nl(s)}if(n||!n&&!a)if((ia(t)!=="body"||Sr(s))&&(o=Ml(t)),n){const f=Un(t,!0,a,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else s&&c();a&&!n&&s&&c();const u=s&&!n&&!a?L0(s,o):fi(0),h=r.left+o.scrollLeft-l.x-u.x,d=r.top+o.scrollTop-l.y-u.y;return{x:h,y:d,width:r.width,height:r.height}}function Tc(e){return Qe(e).position==="static"}function mg(e,t){if(!si(e)||Qe(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return bi(e)===i&&(i=i.ownerDocument.body),i}function z0(e,t){const i=ze(e);if(Cl(e))return i;if(!si(e)){let s=Ii(e);for(;s&&!yn(s);){if(Lt(s)&&!Tc(s))return s;s=Ii(s)}return i}let n=mg(e,t);for(;n&&R_(n)&&Tc(n);)n=mg(n,t);return n&&yn(n)&&Tc(n)&&!cd(n)?i:n||k_(e)||i}const o1=async function(e){const t=this.getOffsetParent||z0,i=this.getDimensions,n=await i(e.floating);return{reference:r1(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function l1(e){return Qe(e).direction==="rtl"}const c1={convertOffsetParentRelativeRectToViewportRelativeRect:Z_,getDocumentElement:bi,getClippingRect:s1,getOffsetParent:z0,getElementRects:o1,getClientRects:Q_,getDimensions:a1,getScale:Ls,isElement:Lt,isRTL:l1};function P0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function u1(e,t){let i=null,n;const s=bi(e);function a(){var o;clearTimeout(n),(o=i)==null||o.disconnect(),i=null}function r(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(o||t(),!d||!f)return;const g=Yr(h),p=Yr(s.clientWidth-(u+d)),v=Yr(s.clientHeight-(h+f)),m=Yr(u),y={rootMargin:-g+"px "+-p+"px "+-v+"px "+-m+"px",threshold:kn(0,Vo(1,l))||1};let A=!0;function x(E){const w=E[0].intersectionRatio;if(w!==l){if(!A)return r();w?r(!1,w):n=setTimeout(()=>{r(!1,1e-7)},1e3)}w===1&&!P0(c,e.getBoundingClientRect())&&r(),A=!1}try{i=new IntersectionObserver(x,{...y,root:s.ownerDocument})}catch{i=new IntersectionObserver(x,y)}i.observe(e)}return r(!0),a}function h1(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=hd(e),u=s||a?[...c?hn(c):[],...hn(t)]:[];u.forEach(m=>{s&&m.addEventListener("scroll",i,{passive:!0}),a&&m.addEventListener("resize",i)});const h=c&&o?u1(c,i):null;let d=-1,f=null;r&&(f=new ResizeObserver(m=>{let[b]=m;b&&b.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(t)})),i()}),c&&!l&&f.observe(c),f.observe(t));let g,p=l?Un(e):null;l&&v();function v(){const m=Un(e);p&&!P0(p,m)&&i(),p=m,g=requestAnimationFrame(v)}return i(),()=>{var m;u.forEach(b=>{s&&b.removeEventListener("scroll",i),a&&b.removeEventListener("resize",i)}),h?.(),(m=f)==null||m.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const d1=Y_,f1=$_,g1=(e,t,i)=>{const n=new Map,s={platform:c1,...i},a={...s.platform,_c:n};return G_(e,t,{...s,platform:a})};var p1=typeof document<"u",m1=function(){},uo=p1?_.useLayoutEffect:m1;function Yo(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!Yo(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=i;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Yo(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function j0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function bg(e,t){const i=j0(e);return Math.round(t*i)/i}function Mc(e){const t=_.useRef(e);return uo(()=>{t.current=e}),t}function b1(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:r}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,h]=_.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[d,f]=_.useState(n);Yo(d,n)||f(n);const[g,p]=_.useState(null),[v,m]=_.useState(null),b=_.useCallback(L=>{L!==E.current&&(E.current=L,p(L))},[]),y=_.useCallback(L=>{L!==w.current&&(w.current=L,m(L))},[]),A=a||g,x=r||v,E=_.useRef(null),w=_.useRef(null),T=_.useRef(u),M=l!=null,D=Mc(l),z=Mc(s),H=Mc(c),B=_.useCallback(()=>{if(!E.current||!w.current)return;const L={placement:t,strategy:i,middleware:d};z.current&&(L.platform=z.current),g1(E.current,w.current,L).then(k=>{const j={...k,isPositioned:H.current!==!1};F.current&&!Yo(T.current,j)&&(T.current=j,Wu.flushSync(()=>{h(j)}))})},[d,t,i,z,H]);uo(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[c]);const F=_.useRef(!1);uo(()=>(F.current=!0,()=>{F.current=!1}),[]),uo(()=>{if(A&&(E.current=A),x&&(w.current=x),A&&x){if(D.current)return D.current(A,x,B);B()}},[A,x,B,D,M]);const P=_.useMemo(()=>({reference:E,floating:w,setReference:b,setFloating:y}),[b,y]),C=_.useMemo(()=>({reference:A,floating:x}),[A,x]),O=_.useMemo(()=>{const L={position:i,left:0,top:0};if(!C.floating)return L;const k=bg(C.floating,u.x),j=bg(C.floating,u.y);return o?{...L,transform:"translate("+k+"px, "+j+"px)",...j0(C.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:k,top:j}},[i,o,C.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:B,refs:P,elements:C,floatingStyles:O}),[u,B,P,C,O])}const y1=(e,t)=>({...d1(e),options:[e,t]}),v1=(e,t)=>({...f1(e),options:[e,t]}),I0={...Xy},A1=I0.useInsertionEffect,S1=A1||(e=>e());function hs(e){const t=_.useRef(()=>{});return S1(()=>{t.current=e}),_.useCallback(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}var Hu=typeof document<"u"?_.useLayoutEffect:_.useEffect;let yg=!1,x1=0;const vg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+x1++;function _1(){const[e,t]=_.useState(()=>yg?vg():void 0);return Hu(()=>{e==null&&t(vg())},[]),_.useEffect(()=>{yg=!0},[]),e}const w1=I0.useId,E1=w1||_1;function C1(){const e=new Map;return{emit(t,i){var n;(n=e.get(t))==null||n.forEach(s=>s(i))},on(t,i){e.set(t,[...e.get(t)||[],i])},off(t,i){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(s=>s!==i))||[])}}}const T1=_.createContext(null),M1=_.createContext(null),R1=()=>{var e;return((e=_.useContext(T1))==null?void 0:e.id)||null},F0=()=>_.useContext(M1);function D1(e){return"data-floating-ui-"+e}function Rc(e,t){let i=e.filter(s=>{var a;return s.parentId===t&&((a=s.context)==null?void 0:a.open)}),n=i;for(;n.length;)n=e.filter(s=>{var a;return(a=n)==null?void 0:a.some(r=>{var o;return s.parentId===r.id&&((o=s.context)==null?void 0:o.open)})}),i=i.concat(n);return i}const N1="data-floating-ui-focusable",O1={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},L1={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ag=e=>{var t,i;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(i=e?.outsidePress)!=null?i:!0}};function k1(e,t){t===void 0&&(t={});const{open:i,onOpenChange:n,elements:s,dataRef:a}=e,{enabled:r=!0,escapeKey:o=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:d=!1,bubbles:f,capture:g}=t,p=F0(),v=hs(typeof l=="function"?l:()=>!1),m=typeof l=="function"?v:l,b=_.useRef(!1),y=_.useRef(!1),{escapeKey:A,outsidePress:x}=Ag(f),{escapeKey:E,outsidePress:w}=Ag(g),T=_.useRef(!1),M=hs(P=>{var C;if(!i||!r||!o||P.key!=="Escape"||T.current)return;const O=(C=a.current.floatingContext)==null?void 0:C.nodeId,L=p?Rc(p.nodesRef.current,O):[];if(!A&&(P.stopPropagation(),L.length>0)){let k=!0;if(L.forEach(j=>{var st;if((st=j.context)!=null&&st.open&&!j.context.dataRef.current.__escapeKeyBubbles){k=!1;return}}),!k)return}n(!1,P_(P)?P.nativeEvent:P,"escape-key")}),D=hs(P=>{var C;const O=()=>{var L;M(P),(L=va(P))==null||L.removeEventListener("keydown",O)};(C=va(P))==null||C.addEventListener("keydown",O)}),z=hs(P=>{var C;const O=b.current;b.current=!1;const L=y.current;if(y.current=!1,c==="click"&&L||O||typeof m=="function"&&!m(P))return;const k=va(P),j="["+D1("inert")+"]",st=hg(s.floating).querySelectorAll(j);let K=Lt(k)?k:null;for(;K&&!yn(K);){const at=Ii(K);if(yn(at)||!Lt(at))break;K=at}if(st.length&&Lt(k)&&!j_(k)&&!ug(k,s.floating)&&Array.from(st).every(at=>!ug(K,at)))return;if(si(k)&&F){const at=k.clientWidth>0&&k.scrollWidth>k.clientWidth,et=k.clientHeight>0&&k.scrollHeight>k.clientHeight;let Kt=et&&P.offsetX>k.clientWidth;if(et&&Qe(k).direction==="rtl"&&(Kt=P.offsetX<=k.offsetWidth-k.clientWidth),Kt||at&&P.offsetY>k.clientHeight)return}const ht=(C=a.current.floatingContext)==null?void 0:C.nodeId,Dt=p&&Rc(p.nodesRef.current,ht).some(at=>{var et;return Cc(P,(et=at.context)==null?void 0:et.elements.floating)});if(Cc(P,s.floating)||Cc(P,s.domReference)||Dt)return;const $t=p?Rc(p.nodesRef.current,ht):[];if($t.length>0){let at=!0;if($t.forEach(et=>{var Kt;if((Kt=et.context)!=null&&Kt.open&&!et.context.dataRef.current.__outsidePressBubbles){at=!1;return}}),!at)return}n(!1,P,"outside-press")}),H=hs(P=>{var C;const O=()=>{var L;z(P),(L=va(P))==null||L.removeEventListener(c,O)};(C=va(P))==null||C.addEventListener(c,O)});_.useEffect(()=>{if(!i||!r)return;a.current.__escapeKeyBubbles=A,a.current.__outsidePressBubbles=x;let P=-1;function C(st){n(!1,st,"ancestor-scroll")}function O(){window.clearTimeout(P),T.current=!0}function L(){P=window.setTimeout(()=>{T.current=!1},Tl()?5:0)}const k=hg(s.floating);o&&(k.addEventListener("keydown",E?D:M,E),k.addEventListener("compositionstart",O),k.addEventListener("compositionend",L)),m&&k.addEventListener(c,w?H:z,w);let j=[];return d&&(Lt(s.domReference)&&(j=hn(s.domReference)),Lt(s.floating)&&(j=j.concat(hn(s.floating))),!Lt(s.reference)&&s.reference&&s.reference.contextElement&&(j=j.concat(hn(s.reference.contextElement)))),j=j.filter(st=>{var K;return st!==((K=k.defaultView)==null?void 0:K.visualViewport)}),j.forEach(st=>{st.addEventListener("scroll",C,{passive:!0})}),()=>{o&&(k.removeEventListener("keydown",E?D:M,E),k.removeEventListener("compositionstart",O),k.removeEventListener("compositionend",L)),m&&k.removeEventListener(c,w?H:z,w),j.forEach(st=>{st.removeEventListener("scroll",C)}),window.clearTimeout(P)}},[a,s,o,m,c,i,n,d,r,A,x,M,E,D,z,w,H]),_.useEffect(()=>{b.current=!1},[m,c]);const B=_.useMemo(()=>({onKeyDown:M,[O1[h]]:P=>{u&&n(!1,P.nativeEvent,"reference-press")}}),[M,n,u,h]),F=_.useMemo(()=>({onKeyDown:M,onMouseDown(){y.current=!0},onMouseUp(){y.current=!0},[L1[c]]:()=>{b.current=!0}}),[M,c]);return _.useMemo(()=>r?{reference:B,floating:F}:{},[r,B,F])}function z1(e){const{open:t=!1,onOpenChange:i,elements:n}=e,s=E1(),a=_.useRef({}),[r]=_.useState(()=>C1()),o=R1()!=null,[l,c]=_.useState(n.reference),u=hs((f,g,p)=>{a.current.openEvent=f?g:void 0,r.emit("openchange",{open:f,event:g,reason:p,nested:o}),i?.(f,g,p)}),h=_.useMemo(()=>({setPositionReference:c}),[]),d=_.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return _.useMemo(()=>({dataRef:a,open:t,onOpenChange:u,elements:d,events:r,floatingId:s,refs:h}),[t,u,d,r,s,h])}function P1(e){e===void 0&&(e={});const{nodeId:t}=e,i=z1({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||i,s=n.elements,[a,r]=_.useState(null),[o,l]=_.useState(null),u=s?.domReference||a,h=_.useRef(null),d=F0();Hu(()=>{u&&(h.current=u)},[u]);const f=b1({...e,elements:{...s,...o&&{reference:o}}}),g=_.useCallback(y=>{const A=Lt(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;l(A),f.refs.setReference(A)},[f.refs]),p=_.useCallback(y=>{(Lt(y)||y===null)&&(h.current=y,r(y)),(Lt(f.refs.reference.current)||f.refs.reference.current===null||y!==null&&!Lt(y))&&f.refs.setReference(y)},[f.refs]),v=_.useMemo(()=>({...f.refs,setReference:p,setPositionReference:g,domReference:h}),[f.refs,p,g]),m=_.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),b=_.useMemo(()=>({...f,...n,refs:v,elements:m,nodeId:t}),[f,v,m,t,n]);return Hu(()=>{n.dataRef.current.floatingContext=b;const y=d?.nodesRef.current.find(A=>A.id===t);y&&(y.context=b)}),_.useMemo(()=>({...f,context:b,refs:v,elements:m}),[f,v,m,b])}const Sg="active",xg="selected";function Dc(e,t,i){const n=new Map,s=i==="item";let a=e;if(s&&e){const{[Sg]:r,[xg]:o,...l}=e;a=l}return{...i==="floating"&&{tabIndex:-1,[N1]:""},...a,...t.map(r=>{const o=r?r[i]:null;return typeof o=="function"?e?o(e):null:o}).concat(e).reduce((r,o)=>(o&&Object.entries(o).forEach(l=>{let[c,u]=l;if(!(s&&[Sg,xg].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof u=="function"){var h;(h=n.get(c))==null||h.push(u),r[c]=function(){for(var d,f=arguments.length,g=new Array(f),p=0;p<f;p++)g[p]=arguments[p];return(d=n.get(c))==null?void 0:d.map(v=>v(...g)).find(v=>v!==void 0)}}}else r[c]=u}),r),{})}}function j1(e){e===void 0&&(e=[]);const t=e.map(o=>o?.reference),i=e.map(o=>o?.floating),n=e.map(o=>o?.item),s=_.useCallback(o=>Dc(o,e,"reference"),t),a=_.useCallback(o=>Dc(o,e,"floating"),i),r=_.useCallback(o=>Dc(o,e,"item"),n);return _.useMemo(()=>({getReferenceProps:s,getFloatingProps:a,getItemProps:r}),[s,a,r])}const _g=e=>{let t;const i=new Set,n=(c,u)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const d=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),i.forEach(f=>f(t,d))}},s=()=>t,o={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(i.add(c),()=>i.delete(c))},l=t=e(n,s,o);return o},H0=e=>e?_g(e):_g,I1=e=>e;function B0(e,t=I1){const i=$e.useSyncExternalStore(e.subscribe,$e.useCallback(()=>t(e.getState()),[e,t]),$e.useCallback(()=>t(e.getInitialState()),[e,t]));return $e.useDebugValue(i),i}const wg=e=>{const t=H0(e),i=n=>B0(t,n);return Object.assign(i,t),i},F1=e=>e?wg(e):wg;function H1(e,t,i,n){var s=this,a=_.useRef(null),r=_.useRef(0),o=_.useRef(0),l=_.useRef(null),c=_.useRef([]),u=_.useRef(),h=_.useRef(),d=_.useRef(e),f=_.useRef(!0);d.current=e;var g=typeof window<"u",p=!t&&t!==0&&g;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var v=!!(i=i||{}).leading,m=!("trailing"in i)||!!i.trailing,b="maxWait"in i,y="debounceOnServer"in i&&!!i.debounceOnServer,A=b?Math.max(+i.maxWait||0,t):null;_.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var x=_.useMemo(function(){var E=function(B){var F=c.current,P=u.current;return c.current=u.current=null,r.current=B,o.current=o.current||B,h.current=d.current.apply(P,F)},w=function(B,F){p&&cancelAnimationFrame(l.current),l.current=p?requestAnimationFrame(B):setTimeout(B,F)},T=function(B){if(!f.current)return!1;var F=B-a.current;return!a.current||F>=t||F<0||b&&B-r.current>=A},M=function(B){return l.current=null,m&&c.current?E(B):(c.current=u.current=null,h.current)},D=function B(){var F=Date.now();if(v&&o.current===r.current&&z(),T(F))return M(F);if(f.current){var P=t-(F-a.current),C=b?Math.min(P,A-(F-r.current)):P;w(B,C)}},z=function(){n&&n({})},H=function(){if(g||y){var B=Date.now(),F=T(B);if(c.current=[].slice.call(arguments),u.current=s,a.current=B,F){if(!l.current&&f.current)return r.current=a.current,w(D,t),v?E(a.current):h.current;if(b)return w(D,t),E(a.current)}return l.current||w(D,t),h.current}};return H.cancel=function(){var B=l.current;B&&(p?cancelAnimationFrame(l.current):clearTimeout(l.current)),r.current=0,c.current=a.current=u.current=l.current=null,B&&n&&n({})},H.isPending=function(){return!!l.current},H.flush=function(){return l.current?M(Date.now()):h.current},H},[v,b,t,A,m,p,g,y,n]);return x}function B1(e,t){return e===t}function $o(e,t,i){var n=B1,s=_.useRef(e),a=_.useState({})[1],r=H1(_.useCallback(function(l){s.current=l,a({})},[a]),t,i,a),o=_.useRef(e);return n(o.current,e)||(r(e),o.current=e),[s.current,r]}const te=[];for(let e=0;e<256;++e)te.push((e+256).toString(16).slice(1));function U1(e,t=0){return(te[e[t+0]]+te[e[t+1]]+te[e[t+2]]+te[e[t+3]]+"-"+te[e[t+4]]+te[e[t+5]]+"-"+te[e[t+6]]+te[e[t+7]]+"-"+te[e[t+8]]+te[e[t+9]]+"-"+te[e[t+10]]+te[e[t+11]]+te[e[t+12]]+te[e[t+13]]+te[e[t+14]]+te[e[t+15]]).toLowerCase()}let Nc;const G1=new Uint8Array(16);function V1(){if(!Nc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Nc=crypto.getRandomValues.bind(crypto)}return Nc(G1)}const q1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Eg={randomUUID:q1};function X1(e,t,i){if(Eg.randomUUID&&!e)return Eg.randomUUID();e=e||{};const n=e.random??e.rng?.()??V1();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,U1(n)}function Cg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Y1(...e){return t=>{let i=!1;const n=e.map(s=>{const a=Cg(s,t);return!i&&typeof a=="function"&&(i=!0),a});if(i)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():Cg(e[s],null)}}}}function $1(e){const t=W1(e),i=_.forwardRef((n,s)=>{const{children:a,...r}=n,o=_.Children.toArray(a),l=o.find(Q1);if(l){const c=l.props.children,u=o.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return S.jsx(t,{...r,ref:s,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return S.jsx(t,{...r,ref:s,children:a})});return i.displayName=`${e}.Slot`,i}var K1=$1("Slot");function W1(e){const t=_.forwardRef((i,n)=>{const{children:s,...a}=i;if(_.isValidElement(s)){const r=tw(s),o=J1(a,s.props);return s.type!==_.Fragment&&(o.ref=n?Y1(n,r):r),_.cloneElement(s,o)}return _.Children.count(s)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Z1=Symbol("radix.slottable");function Q1(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Z1}function J1(e,t){const i={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?i[n]=(...o)=>{const l=a(...o);return s(...o),l}:s&&(i[n]=s):n==="style"?i[n]={...s,...a}:n==="className"&&(i[n]=[s,a].filter(Boolean).join(" "))}return{...e,...i}}function tw(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function ns(e,t,i){let n=i.initialDeps??[],s;function a(){var r,o,l,c;let u;i.key&&((r=i.debug)!=null&&r.call(i))&&(u=Date.now());const h=e();if(!(h.length!==n.length||h.some((g,p)=>n[p]!==g)))return s;n=h;let f;if(i.key&&((o=i.debug)!=null&&o.call(i))&&(f=Date.now()),s=t(...h),i.key&&((l=i.debug)!=null&&l.call(i))){const g=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,v=p/16,m=(b,y)=>{for(b=String(b);b.length<y;)b=" "+b;return b};console.info(`%c ${m(p,5)} /${m(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,i?.key)}return(c=i?.onChange)==null||c.call(i,s),s}return a.updateDeps=r=>{n=r},a}function Tg(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const ew=(e,t)=>Math.abs(e-t)<1.01,U0=(e,t,i)=>{let n;return function(...s){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,s),i)}},Mg=e=>{const{offsetWidth:t,offsetHeight:i}=e;return{width:t,height:i}},iw=e=>e,nw=e=>{const t=Math.max(e.startIndex-e.overscan,0),i=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let s=t;s<=i;s++)n.push(s);return n},sw=(e,t)=>{const i=e.scrollElement;if(!i)return;const n=e.targetWindow;if(!n)return;const s=r=>{const{width:o,height:l}=r;t({width:Math.round(o),height:Math.round(l)})};if(s(Mg(i)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(r=>{const o=()=>{const l=r[0];if(l?.borderBoxSize){const c=l.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Mg(i))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(i,{box:"border-box"}),()=>{a.unobserve(i)}},Rg={passive:!0},Dg=typeof window>"u"?!0:"onscrollend"in window,aw=(e,t)=>{const i=e.scrollElement;if(!i)return;const n=e.targetWindow;if(!n)return;let s=0;const a=e.options.useScrollendEvent&&Dg?()=>{}:U0(n,()=>{t(s,!1)},e.options.isScrollingResetDelay),r=u=>()=>{const{horizontal:h,isRtl:d}=e.options;s=h?i.scrollLeft*(d&&-1||1):i.scrollTop,a(),t(s,u)},o=r(!0),l=r(!1);l(),i.addEventListener("scroll",o,Rg);const c=e.options.useScrollendEvent&&Dg;return c&&i.addEventListener("scrollend",l,Rg),()=>{i.removeEventListener("scroll",o),c&&i.removeEventListener("scrollend",l)}},rw=(e,t,i)=>{if(t?.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[i.options.horizontal?"inlineSize":"blockSize"])}return e[i.options.horizontal?"offsetWidth":"offsetHeight"]},G0=(e,{adjustments:t=0,behavior:i},n)=>{var s,a;const r=e+t;(a=(s=n.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[n.options.horizontal?"left":"top"]:r,behavior:i})};class ow{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let i=null;const n=()=>i||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:i=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const r=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()})}));return{disconnect:()=>{var s;(s=n())==null||s.disconnect(),i=null},observe:s=>{var a;return(a=n())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=n())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=i=>{Object.entries(i).forEach(([n,s])=>{typeof s>"u"&&delete i[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:iw,rangeExtractor:nw,onChange:()=>{},measureElement:rw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...i}},this.notify=i=>{var n,s;(s=(n=this.options).onChange)==null||s.call(n,this,i)},this.maybeNotify=ns(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),i=>{this.notify(i)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(i=>i()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var i;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((i=this.scrollElement)==null?void 0:i.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(i,n)=>{const s=new Map,a=new Map;for(let r=n-1;r>=0;r--){const o=i[r];if(s.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((r,o)=>r.end===o.end?r.index-o.index:r.end-o.end)[0]:void 0},this.getMeasurementOptions=ns(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(i,n,s,a,r)=>(this.pendingMeasuredCacheIndexes=[],{count:i,paddingStart:n,scrollMargin:s,getItemKey:a,enabled:r}),{key:!1}),this.getMeasurements=ns(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:i,paddingStart:n,scrollMargin:s,getItemKey:a,enabled:r},o)=>{if(!r)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<i;u++){const h=a(u),d=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),f=d?d.end+this.options.gap:n+s,g=o.get(h),p=typeof g=="number"?g:this.options.estimateSize(u),v=f+p,m=d?d.lane:u%this.options.lanes;c[u]={index:u,start:f,size:p,end:v,key:h,lane:m}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ns(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(i,n,s,a)=>this.range=i.length>0&&n>0?lw({measurements:i,outerSize:n,scrollOffset:s,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ns(()=>{let i=null,n=null;const s=this.calculateRange();return s&&(i=s.startIndex,n=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,i,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,i,n]},(i,n,s,a,r)=>a===null||r===null?[]:i({startIndex:a,endIndex:r,overscan:n,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=i=>{const n=this.options.indexAttribute,s=i.getAttribute(n);return s?parseInt(s,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(i,n)=>{const s=this.indexFromElement(i),a=this.measurementsCache[s];if(!a)return;const r=a.key,o=this.elementsCache.get(r);o!==i&&(o&&this.observer.unobserve(o),this.observer.observe(i),this.elementsCache.set(r,i)),i.isConnected&&this.resizeItem(s,this.options.measureElement(i,n,this))},this.resizeItem=(i,n)=>{const s=this.measurementsCache[i];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,r=n-a;r!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,r,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,n)),this.notify(!1))},this.measureElement=i=>{if(!i){this.elementsCache.forEach((n,s)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(s))});return}this._measureElement(i,void 0)},this.getVirtualItems=ns(()=>[this.getVirtualIndexes(),this.getMeasurements()],(i,n)=>{const s=[];for(let a=0,r=i.length;a<r;a++){const o=i[a],l=n[o];s.push(l)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=i=>{const n=this.getMeasurements();if(n.length!==0)return Tg(n[V0(0,n.length-1,s=>Tg(n[s]).start,i)])},this.getOffsetForAlignment=(i,n,s=0)=>{const a=this.getSize(),r=this.getScrollOffset();n==="auto"&&(n=i>=r+a?"end":"start"),n==="center"?i+=(s-a)/2:n==="end"&&(i-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,i),0)},this.getOffsetForIndex=(i,n="auto")=>{i=Math.max(0,Math.min(i,this.options.count-1));const s=this.measurementsCache[i];if(!s)return;const a=this.getSize(),r=this.getScrollOffset();if(n==="auto")if(s.end>=r+a-this.options.scrollPaddingEnd)n="end";else if(s.start<=r+this.options.scrollPaddingStart)n="start";else return[r,n];const o=n==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,s.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(i,{align:n="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(i,n),{adjustments:void 0,behavior:s})},this.scrollToIndex=(i,{align:n="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),i=Math.max(0,Math.min(i,this.options.count-1));let a=0;const r=10,o=c=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(i,c);if(!u){console.warn("Failed to get offset for index:",i);return}const[h,d]=u;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const f=this.getScrollOffset(),g=this.getOffsetForIndex(i,d);if(!g){console.warn("Failed to get offset for index:",i);return}ew(g[0],f)||l(d)})},l=c=>{this.targetWindow&&(a++,a<r?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${i} after ${r} attempts.`))};o(n)},this.scrollBy=(i,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+i,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var i;const n=this.getMeasurements();let s;if(n.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((i=n[n.length-1])==null?void 0:i.end)??0;else{const a=Array(this.options.lanes).fill(null);let r=n.length-1;for(;r>=0&&a.some(o=>o===null);){const o=n[r];a[o.lane]===null&&(a[o.lane]=o.end),r--}s=Math.max(...a.filter(o=>o!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(i,{adjustments:n,behavior:s})=>{this.options.scrollToFn(i,{behavior:s,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const V0=(e,t,i,n)=>{for(;e<=t;){const s=(e+t)/2|0,a=i(s);if(a<n)e=s+1;else if(a>n)t=s-1;else return s}return e>0?e-1:0};function lw({measurements:e,outerSize:t,scrollOffset:i,lanes:n}){const s=e.length-1,a=l=>e[l].start;if(e.length<=n)return{startIndex:0,endIndex:s};let r=V0(0,s,a,i),o=r;if(n===1)for(;o<s&&e[o].end<i+t;)o++;else if(n>1){const l=Array(n).fill(0);for(;o<s&&l.some(u=>u<i+t);){const u=e[o];l[u.lane]=u.end,o++}const c=Array(n).fill(i+t);for(;r>=0&&c.some(u=>u>=i);){const u=e[r];c[u.lane]=u.start,r--}r=Math.max(0,r-r%n),o=Math.min(s,o+(n-1-o%n))}return{startIndex:r,endIndex:o}}const Ng=typeof document<"u"?_.useLayoutEffect:_.useEffect;function cw(e){const t=_.useReducer(()=>({}),{})[1],i={...e,onChange:(s,a)=>{var r;a?Wu.flushSync(t):t(),(r=e.onChange)==null||r.call(e,s,a)}},[n]=_.useState(()=>new ow(i));return n.setOptions(i),Ng(()=>n._didMount(),[]),Ng(()=>n._willUpdate()),n}function uw(e){return cw({observeElementRect:sw,observeElementOffset:aw,scrollToFn:G0,...e})}var Bu=(e,t,i)=>Math.min(Math.max(e,t),i),q0=(e,t,i)=>{const{minZoom:n,maxZoom:s}=i,a=Math.max(...t.map(l=>l.width)),r=e/a;return Math.min(Math.max(r,n),s)},hw=e=>{const t=$e.createContext(null);return{useContext:()=>$e.useContext(t),Context:t,Provider:n=>{const[s]=$e.useState(()=>e(n.initialValue));return S.jsx(t.Provider,{value:s,children:n.children})}}},na=hw(e=>H0((t,i)=>({pdfDocumentProxy:e.pdfDocumentProxy,zoom:e.zoom,isZoomFitWidth:e.isZoomFitWidth??!1,zoomOptions:{minZoom:e.zoomOptions?.minZoom??.5,maxZoom:e.zoomOptions?.maxZoom??10},viewportRef:_.createRef(),viewports:e.viewports,updateZoom:(n,s=!1)=>{const{minZoom:a,maxZoom:r}=i().zoomOptions;t(o=>typeof n=="function"?{zoom:Bu(n(o.zoom),a,r),isZoomFitWidth:s}:{zoom:Bu(n,a,r),isZoomFitWidth:s})},zoomFitWidth:()=>{const{viewportRef:n,zoomOptions:s,viewports:a}=i();if(!n.current)return;const r=q0(n.current.clientWidth,a,s);return t({zoom:r,isZoomFitWidth:!0}),r},currentPage:1,setCurrentPage:n=>{t({currentPage:n})},isPinching:!1,setIsPinching:n=>{t({isPinching:n})},virtualizer:null,setVirtualizer:n=>{t({virtualizer:n})},pageProxies:e.pageProxies,getPdfPageProxy:n=>{const s=i().pageProxies[n-1];if(!s)throw new Error(`Page ${n} does not exist`);return s},textContent:[],setTextContent:n=>{t({textContent:n})},highlights:[],setHighlight:n=>{t({highlights:n})},customSelectionRects:[],setCustomSelectionRects:n=>{t({customSelectionRects:n})},coloredHighlights:[],addColoredHighlight:n=>t(s=>({coloredHighlights:[...s.coloredHighlights,n]})),deleteColoredHighlight:n=>t(s=>({coloredHighlights:s.coloredHighlights.filter(a=>a.uuid!==n)}))}))),J=e=>B0(na.useContext(),e);F1(e=>({annotations:[],addAnnotation:t=>e(i=>({annotations:[...i.annotations,t]})),updateAnnotation:(t,i)=>e(n=>({annotations:n.annotations.map(s=>s.id===t?{...s,...i}:s)})),deleteAnnotation:t=>e(i=>({annotations:i.annotations.filter(n=>n.id!==t)})),setAnnotations:t=>e({annotations:t})}));var X0=_.createContext(0),sa=()=>_.useContext(X0);function Y0(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=Y0(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function dw(){for(var e,t,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=Y0(e))&&(n&&(n+=" "),n+=t);return n}var fw=dw,$0=()=>{const e=J(r=>r.virtualizer),t=J(r=>r.setHighlight),i=_.useCallback((r,o)=>{if(!e)return;const c={...{align:"start",behavior:"smooth"},...o};e.scrollToIndex(r-1,c)},[e]),n=_.useCallback(r=>{e&&e.scrollToOffset(r,{align:"start",behavior:"smooth"})},[e]),s=_.useCallback((r,o,l="start",c=0)=>{if(!e)return;const u=Math.min(...r.map(y=>y.pageNumber)),h=e.getOffsetForIndex(u-1,"start");if(h===null)return;const d=r.find(y=>y.pageNumber===u);if(!d||!(h?.[0]!=null))return;const g=h[0]??0;let p,v;if(o==="percent"){const y=e.options.estimateSize(u-1);p=d.top/100*y,v=d.height/100*y}else p=d.top,v=d.height;let m;if(l==="center"){const y=e.scrollElement?.clientHeight||0;m=g+p+v/2-y/2}else m=g+p;m+=c;const b=Math.max(0,m);e.scrollToOffset(b,{align:"start",behavior:"smooth"})},[e]),a=_.useCallback((r,o,l="start",c=0)=>{e&&(t(r),s(r,o,l,c))},[e,t,s]);return{jumpToPage:i,jumpToOffset:n,jumpToHighlightRects:a,scrollToHighlightRects:s}},gw=class{_pdfDocumentProxy;externalLinkEnabled=!0;isInPresentationMode=!1;_currentPageNumber=0;_pageNavigationCallback;get pdfDocumentProxy(){if(!this._pdfDocumentProxy)throw new Error("pdfDocumentProxy is not set");return this._pdfDocumentProxy}get pagesCount(){return this._pdfDocumentProxy?.numPages||0}get page(){return this._currentPageNumber}set page(e){this._currentPageNumber=e,this._pageNavigationCallback&&this._pageNavigationCallback(e)}setDocument(e){this._pdfDocumentProxy=e}setViewer(){}getDestinationHash(e){if(!e)return"";const t=e[0];if(e.length>1&&typeof e[1]=="object"&&e[1]!==null&&"url"in e[1])return e[1].url;if(t&&typeof t=="object"){if("num"in t)return`#page=${t.num+1}`;if("gen"in t)return`#page=${(t.num??0)+1}`}return typeof t=="number"?`#page=${t+1}`:`#dest-${String(e)}`}getAnchorUrl(e){return e.startsWith("http://")||e.startsWith("https://")?e:`#${e}`}addLinkAttributes(e,t,i){if(!e)return;const n=t.startsWith("http://")||t.startsWith("https://");n&&this.externalLinkEnabled?(e.href=t,e.target=i===!1?"":"_blank",e.rel="noopener noreferrer"):n?(e.href="#",e.target=""):(e.href=t,e.target="")}async goToDestination(e){let t;if(typeof e=="string"?t=await this.pdfDocumentProxy.getDestination(e):Array.isArray(e)?t=e:t=await e,!t||t.length>1&&typeof t[1]=="object"&&t[1]!==null&&"url"in t[1])return;const i=t[0];let n;if(i&&typeof i=="object")if("num"in i)try{const a=i;n=await this.pdfDocumentProxy.getPageIndex(a)}catch{return}else return;else if(typeof i=="number")n=i;else return;const s=n+1;this._pageNavigationCallback&&this._pageNavigationCallback(s)}executeNamedAction(){}navigateTo(e){this.goToDestination(e)}get rotation(){return 0}set rotation(e){}goToPage(e){}setHash(e){if(e.startsWith("#page=")){const t=parseInt(e.substring(6),10);Number.isNaN(t)||this.goToPage(t)}}executeSetOCGState(){}registerPageNavigationCallback(e){this._pageNavigationCallback=e}unregisterPageNavigationCallback(){this._pageNavigationCallback=void 0}},pw=new gw;_.createContext(pw);var mw=({elementRef:e})=>{const[t,i]=_.useState(!1);return _.useEffect(()=>{if(!e.current)return;const n=new IntersectionObserver(([s])=>{i(s?.isIntersecting??!1)});return n.observe(e.current),()=>{n.disconnect()}},[e]),{visible:t}},dd=()=>{const[e,t]=_.useState(window?Math.min(window.devicePixelRatio,2):1);return _.useEffect(()=>{if(!window)return;const i=()=>{t(window.devicePixelRatio)},n=window.matchMedia(`screen and (min-resolution: ${e}dppx)`);return n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},[e]),e},bw=16777216,Og=32767,yw=({background:e})=>{const t=_.useRef(null),i=sa(),n=dd(),s=J(l=>l.zoom),a=J(l=>l.getPdfPageProxy(i)),[r]=$o(s,100),o=_.useCallback((l,c,u)=>{if(!l)return 0;const h=Math.sqrt(bw/Math.max(c*u,1)),d=Og/Math.max(c,1),f=Og/Math.max(u,1),g=Math.min(l,Number.isFinite(h)?h:l,Number.isFinite(d)?d:l,Number.isFinite(f)?f:l);return Math.max(g,0)},[]);return _.useLayoutEffect(()=>{if(!t.current)return;const l=t.current,c=a.getViewport({scale:1}),u=c.width,h=c.height,d=n*Math.min(r,1),f=o(d,u,h);l.width=Math.floor(u*f),l.height=Math.floor(h*f),l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width=`${u}px`,l.style.height=`${h}px`,l.style.transform="translate(0px, 0px)",l.style.zIndex="0",l.style.pointerEvents="none";const g=l.getContext("2d");if(!g)return;g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,l.width,l.height);const p=a.getViewport({scale:f}),v=a.render({canvasContext:g,viewport:p,background:e});return v.promise.catch(m=>{if(m.name!=="RenderingCancelledException")throw m}),()=>{v.cancel()}},[a,e,n,r,o]),{canvasRef:t}},vw=16777216,Lg=32767,Aw=({background:e,baseCanvasRef:t})=>{const i=_.useRef(null),n=_.useRef(null),s=sa(),a=dd(),r=J(p=>p.zoom),o=J(p=>p.getPdfPageProxy(s)),l=J(p=>p.viewportRef),[c]=$o(r,200),[u,h]=_.useState(0),[d]=$o(u,20),f=_.useCallback(()=>{let p=n.current;if(!p){const v=t.current?.parentElement;if(!v)return null;p=document.createElement("canvas"),v.appendChild(p),n.current=p}return p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.pointerEvents="none",p.style.zIndex="0",p},[t]),g=_.useCallback((p,v,m)=>{if(!p)return 0;const b=Math.sqrt(vw/Math.max(v*m,1)),y=Lg/Math.max(v,1),A=Lg/Math.max(m,1),x=Math.min(p,Number.isFinite(b)?b:p,Number.isFinite(y)?y:p,Number.isFinite(A)?A:p);return Math.max(x,0)},[]);return _.useLayoutEffect(()=>{const p=l?.current;if(!p)return;const v=()=>{h(m=>m+1)};return p.addEventListener("scroll",v,{passive:!0}),()=>{p.removeEventListener("scroll",v)}},[l?.current]),_.useLayoutEffect(()=>{if(!l?.current)return;const p=f(),v=i.current;if(!p||!v)return;const m=l.current,b=t.current?.parentElement??null;if(!b){p.style.display="none",p.width=0,p.height=0;return}const y=o.getViewport({scale:1}),A=y.width,x=y.height,E=m.scrollLeft/c,w=m.scrollTop/c,T=m.clientWidth/c,M=m.clientHeight/c,D=b.getBoundingClientRect(),z=m.getBoundingClientRect(),H=(D.left-z.left)/c+E,B=(D.top-z.top)/c+w,F=Math.max(0,E-H),P=Math.max(0,w-B),C=Math.min(A,E+T-H),O=Math.min(x,w+M-B),L=Math.max(0,C-F),k=Math.max(0,O-P),j=a*c*1.3,st=a*Math.min(c,1),K=g(st,A,x);if(!(c>1&&j-K>.001)||L<=0||k<=0){p.style.display="none",p.width=0,p.height=0;return}p.style.display="block";const Dt=F,$t=P,at=L*j,et=k*j,Kt=j,Hi=at,aa=et;p.width=Hi,p.height=aa;const xn=L*c,wr=k*c;p.style.width=`${xn}px`,p.style.height=`${wr}px`,p.style.transformOrigin="center center",p.style.transform=`translate(${F*c}px, ${P*c}px) `,v.style.transform=`scale3d(${1/c}, ${1/c}, 1)`,v.style.transformOrigin="0 0";const Zn=p.getContext("2d");if(!Zn)return;Zn.setTransform(1,0,0,1,0,0),Zn.clearRect(0,0,p.width,p.height);const ra=[1,0,0,1,-Dt*Kt,-$t*Kt],Qn=o.getViewport({scale:Kt}),Er=o.render({canvasContext:Zn,viewport:Qn,background:e,transform:ra});return Er.promise.catch(Cr=>{if(Cr.name!=="RenderingCancelledException")throw Cr}),()=>{Er.cancel()}},[o,c,e,a,l,f,g,t,d]),{detailCanvasRef:n,containerRef:i}},Sw=({style:e,background:t,...i})=>{const{canvasRef:n}=yw({background:t}),{detailCanvasRef:s,containerRef:a}=Aw({background:t,baseCanvasRef:n});return S.jsxs(S.Fragment,{children:[S.jsx("canvas",{...i,ref:n,style:e}),S.jsx("div",{ref:a,className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:S.jsx("canvas",{ref:s})})]})},Xs=2,xw=(e,t)=>{const i=!(e.top>t.top+t.height||t.top>e.top+e.height),n=Math.abs(e.left+e.width-t.left)<=Xs||Math.abs(t.left+t.width-e.left)<=Xs||e.left<t.left+t.width&&t.left<e.left+e.width;return i&&n},_w=e=>{if(e.length<=1)return e;const t=[],i=[...e].sort((s,a)=>{const r=s.pageNumber-a.pageNumber;if(r!==0)return r;const o=s.top-a.top;return Math.abs(o)<2?s.left-a.left:o});let n=i[0];if(!n)return e;for(let s=1;s<i.length;s++){const a=i[s];if(!a)continue;if(n.pageNumber===a.pageNumber&&Math.abs(n.top-a.top)<Math.max(n.height,a.height)*.5&&(Math.abs(n.left+n.width-a.left)<=Xs||Math.abs(a.left+a.width-n.left)<=Xs||n.left<a.left+a.width&&a.left<n.left+n.width||Math.abs(n.left+n.width-a.left)<=n.height*.2)){const l=Math.min(n.left,a.left),c=Math.max(n.left+n.width,a.left+a.width),u=Math.min(n.top,a.top),h=Math.max(n.top+n.height,a.top+a.height);n={left:l,top:u,width:c-l,height:h-u,pageNumber:n.pageNumber}}else t.push(n),n=a}return n&&t.push(n),t},ww=e=>{if(e.length<=1)return e;const t=[],i=new Set;for(let n=0;n<e.length;n++){if(i.has(n))continue;const s=e[n];if(!s)continue;const a=[s];i.add(n);let r=!0;for(;r;){r=!1;for(let o=0;o<e.length;o++){if(i.has(o))continue;const l=e[o];if(!l)continue;a.some(u=>Ew(u,l))&&(a.push(l),i.add(o),r=!0)}}t.push(Cw(a))}return t},Ew=(e,t)=>{const i=e.left<t.left+t.width&&t.left<e.left+e.width,n=e.top<t.top+t.height&&t.top<e.top+e.height,s=xw(e,t);return i&&n||s},Cw=e=>{if(e.length===1){const r=e[0];if(!r)throw new Error("Invalid rect in group");return r}const t=e[0];if(!t)throw new Error("Invalid first rect in group");let i=t.left,n=t.top,s=t.left+t.width,a=t.top+t.height;return e.forEach(r=>{r&&(i=Math.min(i,r.left),n=Math.min(n,r.top),s=Math.max(s,r.left+r.width),a=Math.max(a,r.top+r.height))}),{left:i,top:n,width:s-i,height:a-n,pageNumber:t.pageNumber}},K0=()=>{const e=na.useContext(),t=()=>{const r=window.getSelection();if(!r||r.isCollapsed)return;const o=r.getRangeAt(0),l=[],c=[],u=new Map,h=new Map;return Array.from(o.getClientRects()).filter(f=>f.width>2&&f.height>2).forEach(f=>{let g=document.elementFromPoint(f.left+1,f.top+f.height/2);g||(g=document.elementFromPoint(f.left+f.width/2,f.top+f.height/2)),g||(g=document.elementFromPoint(f.right-1,f.top+f.height/2)),g||(g=document.elementFromPoint(f.left+f.width/2,f.top+1)),g||(g=document.elementFromPoint(f.left+f.width/2,f.bottom-1));const p=g?.closest(".textLayer");if(!p)return;const v=E=>{if(!E)return!1;if(E.tagName.toLowerCase()==="sup"||E.tagName.toLowerCase()==="sub")return!0;const w=E.className;if(typeof w=="string"&&["superscript","subscript","sup","sub"].some(D=>w.includes(D)))return!0;const T=E.getBoundingClientRect();if(T.height<6&&T.width<15){const M=E.textContent?.trim()||"";if(M.length<=2&&/^[\d\w]{1,2}$/.test(M)){const D=E.parentElement?.getBoundingClientRect();if(D&&D.height>T.height*2){const z=T.top+T.height/2,H=D.top+D.height/2;if(Math.abs(z-H)>D.height*.4)return!0}}}return!1},m=parseInt(p.getAttribute("data-page-number")||"1",10),b=p.getBoundingClientRect(),y=e.getState().zoom,A={width:f.width/y,height:f.height/y,top:(f.top-b.top)/y,left:(f.left-b.left)/y,pageNumber:m};if(u.has(m)||u.set(m,[]),u.get(m)?.push(A),!v(g)){const E=f.height*.85,T={width:f.width/y,height:2/y,top:(f.top-b.top+E)/y,left:(f.left-b.left)/y,pageNumber:m};h.has(m)||h.set(m,[]),h.get(m)?.push(T)}}),u.forEach(f=>{if(f.length>0)if(f.length===1)l.push(...f);else{const g=_w(f);l.push(...g)}}),h.forEach(f=>{f.length>0&&i(f).forEach(p=>{if(p.length===0)return;p.sort((m,b)=>m.left-b.left);let v=0;for(;v<p.length;){const m=p[v];if(!m){v++;continue}let b=v;for(;b+1<p.length;){const x=p[b],E=p[b+1];if(!x||!E)break;const w=E.left-(x.left+x.width),T=Math.max(Xs,x.height*.3);if(w<=T)b++;else break}const y=p[b];if(!y){v++;continue}const A={width:y.left+y.width-m.left,height:1.5,top:m.top,left:m.left,pageNumber:m.pageNumber};c.push(A),v=b+1}})}),c.length===0&&l.length>0&&l.forEach(f=>{const g=f.height*.85,v={width:f.width,height:1.5,top:f.top+g,left:f.left,pageNumber:f.pageNumber};c.push(v)}),{highlights:l.sort((f,g)=>f.pageNumber-g.pageNumber),underlines:n(c).sort((f,g)=>f.pageNumber-g.pageNumber),text:o.toString().trim(),isCollapsed:!1}},i=r=>{const l=[];return r.forEach(c=>{const u=c.top+c.height/2;let h=!1;for(const d of l){if(d.length===0)continue;const f=d[0];if(!f)continue;const g=f.top+f.height/2;if(Math.abs(u-g)<=3){d.push(c),h=!0;break}}h||l.push([c])}),l},n=r=>{if(r.length<=1)return r;const o=[],l=[...r].sort((u,h)=>{const d=u.pageNumber-h.pageNumber;if(d!==0)return d;const f=u.top-h.top;return Math.abs(f)<1?u.left-h.left:f});let c=l[0];for(let u=1;u<l.length;u++){const h=l[u];if(c.pageNumber===h.pageNumber&&Math.abs(c.top-h.top)<1&&(Math.abs(c.left+c.width-h.left)<=Xs||c.left<h.left+h.width&&h.left<c.left+c.width)){const g=Math.max(c.left+c.width,h.left+h.width)-Math.min(c.left,h.left);c={...c,left:Math.min(c.left,h.left),width:g}}else o.push(c),c=h}return o.push(c),o},s=()=>{const r=window.getSelection();if(!r||r.isCollapsed)return;const o=r.getRangeAt(0),l=[],c=new Map;return Array.from(o.getClientRects()).filter(h=>h.width>2&&h.height>2).forEach(h=>{const f=document.elementFromPoint(h.left+1,h.top+h.height/2)?.closest(".textLayer");if(!f)return;const g=parseInt(f.getAttribute("data-page-number")||"1",10),p=f.getBoundingClientRect(),v=e.getState().zoom,m={width:h.width/v,height:h.height/v,top:(h.top-p.top)/v,left:(h.left-p.left)/v,pageNumber:g};c.has(g)||c.set(g,[]),c.get(g)?.push(m)}),c.forEach(h=>{if(h.length>0){const d=ww(h);l.push(...d)}}),{highlights:l.sort((h,d)=>h.pageNumber-d.pageNumber),text:o.toString().trim(),isCollapsed:!1}};return{getDimension:s,getSelection:()=>s(),getAnnotationDimension:t}},W0=({children:e})=>{const[t,i]=_.useState(!1),n=_.useRef(null),s=J(h=>h.viewportRef),{refs:a,floatingStyles:r,context:o}=P1({placement:"bottom",open:t,onOpenChange:i,whileElementsMounted:h1,middleware:[y1(10),v1({padding:8})]}),l=k1(o),{getFloatingProps:c}=j1([l]),u=_.useCallback(()=>{const h=document.getSelection();if(!h||h.isCollapsed){i(!1),n.current=null;return}const d=h.getRangeAt(0);if(!d)return;const f=d.getClientRects(),g=f[f.length-1];n.current=d,g?(a.setReference({getBoundingClientRect:()=>({width:g.width,height:g.height,x:g.left,y:g.bottom,top:g.bottom,right:g.right,bottom:g.bottom+g.height,left:g.left}),getClientRects:()=>[g]}),i(!0)):i(!1)},[a]);return _.useEffect(()=>{const h=()=>{const f=document.getSelection();if(f&&s.current?.contains(f.anchorNode)){const g=f.anchorNode,p=f.focusNode,v=m=>{if(!m)return!1;let b=m.nodeType===Node.ELEMENT_NODE?m:m.parentElement;for(;b;){if(b.getAttribute("data-annotation-tooltip")||b.hasAttribute("data-floating-ui-portal"))return!0;b=b.parentElement}return!1};!v(g)&&!v(p)?requestAnimationFrame(u):i(!1)}else i(!1)},d=()=>{!t||!n.current||requestAnimationFrame(u)};return document.addEventListener("selectionchange",h),s.current&&s.current.addEventListener("scroll",d,{passive:!0}),()=>{document.removeEventListener("selectionchange",h),s.current&&s.current.removeEventListener("scroll",d)}},[t,s,u]),_.useEffect(()=>{const h=d=>{a.floating.current?.contains(d.target)&&d.stopPropagation()};return document.addEventListener("click",h),()=>document.removeEventListener("click",h)},[a.floating]),S.jsx(S.Fragment,{children:t&&S.jsx("div",{ref:a.setFloating,style:{...r},...c(),children:e})})},Tw=[{color:"#e3b127",localization:{id:"yellow",defaultMessage:"Yellow"}},{color:"#419931",localization:{id:"green",defaultMessage:"Green"}},{color:"#4286c9",localization:{id:"blue",defaultMessage:"Blue"}},{color:"#f246b6",localization:{id:"pink",defaultMessage:"Pink"}},{color:"#a53dd1",localization:{id:"purple",defaultMessage:"Purple"}},{color:"#f09037",localization:{id:"orange",defaultMessage:"Orange"}},{color:"#37f0d4",localization:{id:"teal",defaultMessage:"Teal"}},{color:"#3d0ff5",localization:{id:"purple",defaultMessage:"Purple"}},{color:"#f50f26",localization:{id:"red",defaultMessage:"Red"}}],Mw=({highlighterColors:e=Tw,onColorSelection:t})=>S.jsx(W0,{children:S.jsx("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem",backgroundColor:"#363636",borderRadius:"0.5rem"},children:e.map((i,n)=>S.jsx("button",{onClick:()=>t(i),title:i.localization.defaultMessage,"aria-label":i.localization.defaultMessage,style:{width:"1.25rem",height:"1.25rem",borderRadius:"0.25rem",cursor:"pointer",backgroundColor:i.color}},n))})}),Rw=e=>{const t=e.rectangles[e.rectangles.length-1];return t.left+t.width+10},Dw=e=>{const t=e.rectangles[e.rectangles.length-1];return t.top+t.height/2},Nw=({selection:e})=>{const t=J(s=>s.deleteColoredHighlight),[i,n]=_.useState(!1);return S.jsxs("div",{className:"colored-highlight",children:[e.rectangles.map((s,a)=>S.jsx("span",{onClick:()=>n(!i),style:{position:"absolute",top:s.top,left:s.left,height:s.height,width:s.width,cursor:"pointer",zIndex:30,backgroundColor:e.color,mixBlendMode:"darken",borderRadius:"0.2rem"}},`${e.uuid}-${a}`)),i&&S.jsx("button",{style:{backgroundColor:"white",color:"white",borderRadius:"5px",padding:"5px",cursor:"pointer",boxShadow:"2px 2px 5px black",position:"absolute",top:Dw(e),left:Rw(e),zIndex:30,transform:"translateY(-50%)"},onClick:()=>t(e.uuid),children:S.jsx("svg",{fill:"#000000",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"15px",height:"15px",viewBox:"0 0 485 485",children:S.jsx("g",{children:S.jsxs("g",{children:[S.jsx("rect",{x:"67.224",width:"350.535",height:"71.81"}),S.jsx("path",{d:`M417.776,92.829H67.237V485h350.537V92.829H417.776z M165.402,431.447h-28.362V146.383h28.362V431.447z M256.689,431.447
			h-28.363V146.383h28.363V431.447z M347.97,431.447h-28.361V146.383h28.361V431.447z`})]})})})},`${e.uuid}-delete-button`)]})},Ow=({onHighlight:e})=>{const t=sa(),{getDimension:i}=K0(),n=J(r=>r.coloredHighlights),s=J(r=>r.addColoredHighlight),a=_.useCallback(r=>{const o=i();if(!o)return;const{highlights:l,text:c}=o;if(l[0]){const u={uuid:X1(),pageNumber:l[0].pageNumber,color:r,rectangles:l,text:c};s(u),e&&e(u)}},[e,i,s]);return S.jsxs("div",{className:"colored-highlights-layer",children:[n.filter(r=>r.pageNumber===t).map(r=>S.jsx(Nw,{selection:r},r.uuid)),S.jsx(Mw,{onColorSelection:r=>a(r.color)})]})},Lw=e=>({top:`${e.top}%`,left:`${e.left}%`,height:`${e.height}%`,width:`${e.width}%`}),kw=_.forwardRef(({asChild:e,className:t,style:i,...n},s)=>{const a=sa(),r=J(c=>c.highlights),o=e?K1:"div",l=r.filter(c=>c.pageNumber===a);return l?.length?S.jsx(S.Fragment,{children:l.map((c,u)=>{const{pageNumber:h,type:d,style:f,...g}=c;let p=g;d==="percent"&&(p=Lw(c));const v=f?f(c):{};return S.jsx(o,{ref:s,className:t,style:{position:"absolute",...p,pointerEvents:"none",zIndex:30,...i,...v},...n,children:n.children},`highlight-${h}-${u}`)})}):null});kw.displayName="HighlightLayer";var zw=()=>{const e=new Map;let t=null,i=!1,n=null,s;const a=l=>{e.delete(l),e.size===0&&(t?.abort(),t=null)},r=()=>{if(t)return;t=new AbortController;const{signal:l}=t,c=(u,h)=>{u.parentNode!==h&&h.appendChild(u),u.style.width="",u.style.height="",h.classList.remove("selecting")};document.addEventListener("pointerdown",()=>{i=!0},{signal:l}),document.addEventListener("pointerup",()=>{i=!1,e.forEach(c)},{signal:l}),window.addEventListener("blur",()=>{i=!1,e.forEach(c)},{signal:l}),document.addEventListener("keyup",()=>{i||e.forEach(c)},{signal:l}),document.addEventListener("selectionchange",()=>{const u=document.getSelection();if(!u||u.rangeCount===0){e.forEach(c);return}const h=new Set;for(let d=0;d<u.rangeCount;d++){const f=u.getRangeAt(d);for(const g of e.keys())!h.has(g)&&f.intersectsNode(g)&&h.add(g)}for(const[d,f]of e)h.has(d)?d.classList.add("selecting"):c(f,d);if(s===void 0){const d=e.keys().next().value;d&&(s=getComputedStyle(d).getPropertyValue("-moz-user-select")==="none")}if(!s)try{const d=u.getRangeAt(0),f=n&&(d.compareBoundaryPoints(Range.END_TO_END,n)===0||d.compareBoundaryPoints(Range.START_TO_END,n)===0);let g=f?d.startContainer:d.endContainer;g.nodeType===Node.TEXT_NODE&&(g=g.parentNode);const p=g.parentElement?.closest(".textLayer"),v=e.get(p);if(v&&p){v.style.width=p.style.width,v.style.height=p.style.height;const m=f?g:g.nextSibling;g.parentElement&&m&&g.parentElement.insertBefore(v,m)}n=d.cloneRange()}catch{}},{signal:l})};return(l,c)=>{if(l._textSelectionBound)return;l._textSelectionBound=!0,e.set(l,c),r();const u=()=>{l.classList.add("selecting")};l.addEventListener("mousedown",u),l._cleanupTextSelection=()=>{l.removeEventListener("mousedown",u),a(l),delete l._textSelectionBound}}},Pw=zw(),jw=()=>{const e=_.useRef(null),t=_.useRef(null),i=_.useRef(!1),n=sa(),s=J(a=>a.getPdfPageProxy(n));return _.useEffect(()=>{const a=e.current;if(!a||i.current)return;i.current=!0,a.innerHTML="",t.current&&(t.current.cancel(),t.current=null);const r=new E_({textContentSource:s.streamTextContent(),container:a,viewport:s.getViewport({scale:1})});return t.current=r,r.render().then(()=>{if(t.current===r&&a){const o=document.createElement("div");o.className="endOfContent",a.appendChild(o),Pw(a,o)}}).catch(o=>{o.name!=="AbortException"&&console.error("TextLayer rendering error:",o)}).finally(()=>{i.current=!1}),()=>{i.current=!1,t.current&&(t.current.cancel(),t.current=null),a?._cleanupTextSelection&&(a._cleanupTextSelection(),delete a._cleanupTextSelection)}},[s.streamTextContent,s.getViewport]),{textContainerRef:e,pageNumber:s.pageNumber}},Iw=({className:e,style:t,...i})=>{const{textContainerRef:n,pageNumber:s}=jw();return S.jsx("div",{className:fw("textLayer",e),style:{...t,position:"absolute",top:0,left:0},...i,"data-page-number":s,ref:n})},Fw=["a","button","div","aside","section","main","ul","li","input","canvas"],Hw=e=>{const t=_.forwardRef((i,n)=>{const s=e;return S.jsx(s,{...i,ref:n})});return t.displayName=`PDFReader.${e}`,t},Kn=Fw.reduce((e,t)=>(e[t]=Hw(t),e),{}),Bw=({children:e,pageNumber:t=1,style:i,...n})=>{const s=J(o=>o.getPdfPageProxy(t)),a=(s.view[2]??0)-(s.view[0]??0),r=(s.view[3]??0)-(s.view[1]??0);return S.jsx(X0.Provider,{value:s.pageNumber,children:S.jsx(Kn.div,{style:{display:"block"},children:S.jsx("div",{style:{...i,"--scale-factor":1,"--total-scale-factor":1,position:"relative",width:a,height:r},...n,children:e})})})},Uw=({viewportRef:e})=>{const t=J(a=>a.viewports),i=J(a=>a.zoomOptions),n=J(a=>a.updateZoom),s=na.useContext();return _.useLayoutEffect(()=>{if(e.current===null)return;const a=new ResizeObserver(r=>{for(const o of r){const l=s.getState().isZoomFitWidth;if(o.target===e.current&&l){const c=o.contentRect.width,u=q0(c,t,i);n(u,!0)}}});return a.observe(e.current),()=>{a.disconnect()}},[s,n,e,t,i]),null},Gw=typeof window>"u"?!0:"onscrollend"in window,kg={passive:!0},Vw=()=>{const e=na.useContext();return{observeElementOffset:(i,n)=>{const s=i.scrollElement;if(!s)return;const a=i.targetWindow;if(!a)return;let r=0;const o=i.options.useScrollendEvent&&Gw?()=>{}:U0(a,()=>{n(r,!1)},i.options.isScrollingResetDelay),l=h=>()=>{const{horizontal:d,isRtl:f}=i.options;r=d?s.scrollLeft*(f&&-1||1):s.scrollTop;const g=e.getState().zoom;r=r/g,o(),n(r,h)},c=l(!0),u=l(!1);return u(),s.addEventListener("scroll",c,kg),s.addEventListener("scrollend",u,kg),()=>{s.removeEventListener("scroll",c),s.removeEventListener("scrollend",u)}}}},qw=()=>{const e=na.useContext();return{scrollToFn:_.useCallback((i,n,s)=>{const a=e.getState().zoom,r=i*a;G0(r,n,s)},[e])}},Xw=({items:e})=>{const t=J(r=>r.zoom),i=J(r=>r.isPinching),n=J(r=>r.setCurrentPage),s=J(r=>r.viewportRef?.current),a=_.useCallback(r=>{if(!s||r.length===0)return 0;const o=s.scrollTop/t,l=s.clientHeight/t,c=o+l/2;let u=0,h=1/0;for(const d of r){const f=d.start+d.size/2,g=Math.abs(f-c);g<h*.8&&(h=g,u=d.index)}return u},[s,t]);return _.useEffect(()=>{if(!i&&e.length>0){const r=a(e);n?.(r+1)}},[e,i,a,n]),null};function Yw(e,t,i){return Math.max(t,Math.min(e,i))}var xt={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function zg(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function Pg(e,t,i,n=.15){return n===0?Yw(e,t,i):e<t?-zg(t-e,i-t,n)+t:e>i?+zg(e-i,i-t,n)+i:e}function $w(e,[t,i],[n,s]){const[[a,r],[o,l]]=e;return[Pg(t,a,r,n),Pg(i,o,l,s)]}function Kw(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ww(e){var t=Kw(e,"string");return typeof t=="symbol"?t:String(t)}function It(e,t,i){return t=Ww(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jg(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Tt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jg(Object(i),!0).forEach(function(n){It(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jg(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var Z0={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ig(e){return e?e[0].toUpperCase()+e.slice(1):""}var Zw=["enter","leave"];function Qw(e=!1,t){return e&&!Zw.includes(t)}function Jw(e,t="",i=!1){const n=Z0[e],s=n&&n[t]||t;return"on"+Ig(e)+Ig(s)+(Qw(i,s)?"Capture":"")}var tE=["gotpointercapture","lostpointercapture"];function eE(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const n=tE.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(n);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:i}}function iE(e,t=""){const i=Z0[e],n=i&&i[t]||t;return e+n}function Ol(e){return"touches"in e}function Q0(e){return Ol(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function nE(e){return Array.from(e.touches).filter(t=>{var i,n;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(n=i.contains)===null||n===void 0?void 0:n.call(i,t.target))})}function sE(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function J0(e){return Ol(e)?sE(e)[0]:e}function Uu(e,t){try{const i=t.clientX-e.clientX,n=t.clientY-e.clientY,s=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,r=Math.hypot(i,n);return{angle:-(Math.atan2(i,n)*180)/Math.PI,distance:r,origin:[s,a]}}catch{}return null}function aE(e){return nE(e).map(t=>t.identifier)}function Fg(e,t){const[i,n]=Array.from(e.touches).filter(s=>t.includes(s.identifier));return Uu(i,n)}function Oc(e){const t=J0(e);return Ol(e)?t.identifier:t.pointerId}function Ys(e){const t=J0(e);return[t.clientX,t.clientY]}var Hg=40,Bg=800;function ty(e){let{deltaX:t,deltaY:i,deltaMode:n}=e;return n===1?(t*=Hg,i*=Hg):n===2&&(t*=Bg,i*=Bg),[t,i]}function rE(e){var t,i;const{scrollX:n,scrollY:s,scrollLeft:a,scrollTop:r}=e.currentTarget;return[(t=n??a)!==null&&t!==void 0?t:0,(i=s??r)!==null&&i!==void 0?i:0]}function oE(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:n,metaKey:s,ctrlKey:a}=e;Object.assign(t,{shiftKey:i,altKey:n,metaKey:s,ctrlKey:a})}return t}function Ko(e,...t){return typeof e=="function"?e(...t):e}function lE(){}function cE(...e){return e.length===0?lE:e.length===1?e[0]:function(){let t;for(const i of e)t=i.apply(this,arguments)||t;return t}}function Ug(e,t){return Object.assign({},t,e||{})}var uE=32,ey=class{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:n}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?Ko(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:n}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,oE(e)),n.down=n.pressed=n.buttons%2===1||n.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);xt.addTo(t._distance,x)}this.axisIntent&&this.axisIntent(e);const[a,r]=t._movement,[o,l]=i.threshold,{_step:c,values:u}=t;if(i.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(a)>=o&&u[0]),c[1]===!1&&(c[1]=Math.abs(r)>=l&&u[1])):(c[0]===!1&&(c[0]=Math.abs(a)>=o&&Math.sign(a)*o),c[1]===!1&&(c[1]=Math.abs(r)>=l&&Math.sign(r)*l)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[x,E]=u;h[0]=c[0]!==!1?x-c[0]:0,h[1]=c[1]!==!1?E-c[1]:0}else h[0]=c[0]!==!1?a-c[0]:0,h[1]=c[1]!==!1?r-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,f=t._active&&!t._blocked||t.active;f&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=Ko(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[g,p]=t.offset,[[v,m],[b,y]]=t._bounds;t.overflow=[g<v?-1:g>m?1:0,p<b?-1:p>y?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const A=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=$w(t._bounds,t.offset,A),t.delta=xt.sub(t.offset,d),this.computeMovement(),f&&(!t.last||s>uE)){t.delta=xt.sub(t.offset,d);const x=t.delta.map(Math.abs);xt.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[x[0]/s,x[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const n=this.handler(Tt(Tt(Tt({},t),e),{},{[this.aliasKey]:e.values}));n!==void 0&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function hE([e,t],i){const n=Math.abs(e),s=Math.abs(t);if(n>s&&n>i)return"x";if(s>n&&s>i)return"y"}var xr=class extends ey{constructor(...e){super(...e),It(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=xt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=xt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const n=typeof i.axisThreshold=="object"?i.axisThreshold[Q0(e)]:i.axisThreshold;t.axis=hE(t._movement,n)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}},dE=e=>e,Gg=.15,iy={enabled(e=!0){return e},eventOptions(e,t,i){return Tt(Tt({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Gg,Gg];case!1:return[0,0];default:return xt.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return xt.toVector(e)},transform(e,t,i){const n=e||i.shared.transform;return this.hasCustomTransform=!!n,n||dE},threshold(e){return xt.toVector(e,0)}},fE=0,Wn=Tt(Tt({},iy),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=fE){return e},bounds(e={}){if(typeof e=="function")return a=>Wn.bounds(e(a));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:n=-1/0,bottom:s=1/0}=e;return[[t,i],[n,s]]}}),Vg={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},gE=class extends xr{constructor(...e){super(...e),It(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),n={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Wn.bounds(n)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const n=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(n&&n.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=Oc(e),i._pointerActive=!0,this.computeValues(Ys(e)),this.computeInitial(),t.preventScrollAxis&&Q0(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const n=Oc(e);if(t._pointerId!==void 0&&n!==t._pointerId)return;const s=Ys(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=xt.sub(s,t._values),this.computeValues(s)),xt.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const n=Oc(e);if(t._pointerId!==void 0&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[r,o]=t._delta,[l,c]=t._movement,[u,h]=i.swipe.velocity,[d,f]=i.swipe.distance,g=i.swipe.duration;if(t.elapsedTime<g){const p=Math.abs(r/t.timeDelta),v=Math.abs(o/t.timeDelta);p>u&&Math.abs(l)>d&&(t.swipe[0]=Math.sign(r)),v>h&&Math.abs(c)>f&&(t.swipe[1]=Math.sign(o))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,pE(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=Vg[e.key];if(t){const i=this.state,n=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,n),i._keyboardActive=!0,xt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Vg&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}};function pE(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}var _r=typeof window<"u"&&window.document&&window.document.createElement;function ny(){return _r&&"ontouchstart"in window}function mE(){return ny()||_r&&window.navigator.maxTouchPoints>1}function bE(){return _r&&"onpointerdown"in window}function yE(){return _r&&"exitPointerLock"in window.document}function vE(){try{return"constructor"in GestureEvent}catch{return!1}}var Ve={isBrowser:_r,gesture:vE(),touch:ny(),touchscreen:mE(),pointer:bE(),pointerLock:yE()},AE=250,SE=180,xE=.5,_E=50,wE=250,EE=10,qg={mouse:0,touch:0,pen:8},CE=Tt(Tt({},Wn),{},{device(e,t,{pointer:{touch:i=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&Ve.pointerLock,Ve.touch&&i?"touch":this.pointerLock?"mouse":Ve.pointer&&!s?"pointer":Ve.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?AE:void 0,!(!Ve.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:n=3,axis:s=void 0}){const a=xt.toVector(e,i?n:s?1:0);return this.filterTaps=i,this.tapsThreshold=n,a},swipe({velocity:e=xE,distance:t=_E,duration:i=wE}={}){return{velocity:this.transform(xt.toVector(e)),distance:this.transform(xt.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return SE;case!1:return 0;default:return e}},axisThreshold(e){return e?Tt(Tt({},qg),e):qg},keyboardDisplacement(e=EE){return e}});function sy(e){const[t,i]=e.overflow,[n,s]=e._delta,[a,r]=e._direction;(t<0&&n>0&&a<0||t>0&&n<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(i<0&&s>0&&r<0||i>0&&s<0&&r>0)&&(e._movement[1]=e._movementBound[1])}var TE=30,ME=100,RE=class extends ey{constructor(...e){super(...e),It(this,"ingKey","pinching"),It(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=xt.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const n=Math.abs(t)*TE-Math.abs(i);n<0?e.axis="angle":n>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const n=Fg(e,t._touchIds);n&&this.pinchStart(e,n)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,n=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(a=>n.has(a))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=Uu(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=Fg(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=Uu(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,n=i._values[1],s=t.angle-n;let a=0;Math.abs(s)>270&&(a+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*a]),i.origin=t.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=xt.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-ty(e)[1]/ME*i.offset[0],0],xt.addTo(i._movement,i._delta),sy(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},DE=Tt(Tt({},iy),{},{device(e,t,{shared:i,pointer:{touch:n=!1}={}}){if(i.target&&!Ve.touch&&Ve.gesture)return"gesture";if(Ve.touch&&n)return"touch";if(Ve.touchscreen){if(Ve.pointer)return"pointer";if(Ve.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:n={}}){const s=r=>{const o=Ug(Ko(i,r),{min:-1/0,max:1/0});return[o.min,o.max]},a=r=>{const o=Ug(Ko(n,r),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof i!="function"&&typeof n!="function"?[s(),a()]:r=>[s(r),a(r)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",xt.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}}),NE=class extends xr{constructor(...e){super(...e),It(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Ys(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Ys(e),i=this.state;i._delta=xt.sub(t,i._values),xt.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},OE=Tt(Tt({},Wn),{},{mouseOnly:(e=!0)=>e}),LE=class extends xr{constructor(...e){super(...e),It(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=rE(e);t._delta=xt.sub(i,t._values),xt.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},kE=Wn,zE=class extends xr{constructor(...e){super(...e),It(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=ty(e),xt.addTo(t._movement,t._delta),sy(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},PE=Wn,jE=class extends xr{constructor(...e){super(...e),It(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Ys(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=Ys(e);t._movement=t._delta=xt.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},IE=Tt(Tt({},Wn),{},{mouseOnly:(e=!0)=>e}),fd=new Map,Gu=new Map;function FE(e){fd.set(e.key,e.engine),Gu.set(e.key,e.resolver)}var HE={key:"drag",engine:gE,resolver:CE},BE={key:"hover",engine:jE,resolver:IE},UE={key:"move",engine:NE,resolver:OE},GE={key:"pinch",engine:RE,resolver:DE},VE={key:"scroll",engine:LE,resolver:kE},qE={key:"wheel",engine:zE,resolver:PE};function XE(e,t){if(e==null)return{};var i={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function YE(e,t){if(e==null)return{};var i=XE(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $E={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Ve.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},KE=["target","eventOptions","window","enabled","transform"];function ho(e={},t){const i={};for(const[n,s]of Object.entries(t))switch(typeof s){case"function":i[n]=s.call(i,e[n],n,e);break;case"object":i[n]=ho(e[n],s);break;case"boolean":s&&(i[n]=e[n]);break}return i}function WE(e,t,i={}){const n=e,{target:s,eventOptions:a,window:r,enabled:o,transform:l}=n,c=YE(n,KE);if(i.shared=ho({target:s,eventOptions:a,window:r,enabled:o,transform:l},$E),t){const u=Gu.get(t);i[t]=ho(Tt({shared:i.shared},c),u)}else for(const u in c){const h=Gu.get(u);h&&(i[u]=ho(Tt({shared:i.shared},c[u]),h))}return i}var ay=class{constructor(e,t){It(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,n,s){const a=this._listeners,r=iE(t,i),o=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=Tt(Tt({},o),s);e.addEventListener(r,n,l);const c=()=>{e.removeEventListener(r,n,l),a.delete(c)};return a.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},ZE=class{constructor(){It(this,"_timeouts",new Map)}add(e,t,i=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...n))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},QE=class{constructor(e){It(this,"gestures",new Set),It(this,"_targetEventStore",new ay(this)),It(this,"gestureEventStores",{}),It(this,"gestureTimeoutStores",{}),It(this,"handlers",{}),It(this,"config",{}),It(this,"pointerIds",new Set),It(this,"touchIds",new Set),It(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),JE(this,e)}setEventIds(e){if(Ol(e))return this.touchIds=new Set(aE(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=WE(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let n;if(!(t.target&&(n=t.target(),!n))){if(t.enabled){for(const a of this.gestures){const r=this.config[a],o=Xg(i,r.eventOptions,!!n);if(r.enabled){const l=fd.get(a);new l(this,e,a).bind(o)}}const s=Xg(i,t.eventOptions,!!n);for(const a in this.nativeHandlers)s(a,"",r=>this.nativeHandlers[a](Tt(Tt({},this.state.shared),{},{event:r,args:e})),void 0,!0)}for(const s in i)i[s]=cE(...i[s]);if(!n)return i;for(const s in i){const{device:a,capture:r,passive:o}=eE(s);this._targetEventStore.add(n,a,"",i[s],{capture:r,passive:o})}}}};function ss(e,t){e.gestures.add(t),e.gestureEventStores[t]=new ay(e,t),e.gestureTimeoutStores[t]=new ZE}function JE(e,t){t.drag&&ss(e,"drag"),t.wheel&&ss(e,"wheel"),t.scroll&&ss(e,"scroll"),t.move&&ss(e,"move"),t.pinch&&ss(e,"pinch"),t.hover&&ss(e,"hover")}var Xg=(e,t,i)=>(n,s,a,r={},o=!1)=>{var l,c;const u=(l=r.capture)!==null&&l!==void 0?l:t.capture,h=(c=r.passive)!==null&&c!==void 0?c:t.passive;let d=o?n:Jw(n,s,u);i&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(a)},tC=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function eC(e){const t={},i={},n=new Set;for(let s in e)tC.test(s)?(n.add(RegExp.lastMatch),i[s]=e[s]):t[s]=e[s];return[i,t,n]}function as(e,t,i,n,s,a){if(!e.has(i)||!fd.has(n))return;const r=i+"Start",o=i+"End",l=c=>{let u;return c.first&&r in t&&t[r](c),i in t&&(u=t[i](c)),c.last&&o in t&&t[o](c),u};s[n]=l,a[n]=a[n]||{}}function iC(e,t){const[i,n,s]=eC(e),a={};return as(s,i,"onDrag","drag",a,t),as(s,i,"onWheel","wheel",a,t),as(s,i,"onScroll","scroll",a,t),as(s,i,"onPinch","pinch",a,t),as(s,i,"onMove","move",a,t),as(s,i,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:n}}function nC(e,t={},i,n){const s=$e.useMemo(()=>new QE(e),[]);if(s.applyHandlers(e,n),s.applyConfig(t,i),$e.useEffect(s.effect.bind(s)),$e.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function sC(e){return e.forEach(FE),function(i,n){const{handlers:s,nativeHandlers:a,config:r}=iC(i,n||{});return nC(s,r,void 0,a)}}function aC(e,t){return sC([HE,GE,VE,qE,UE,BE])(e,t||{})}var rC=(e,t,i)=>{if(!e&&!t)throw new Error("Missing memo initialization. You likely forgot to return the result of `firstMemo` in the event function");return e?i():t},oC=({containerRef:e,elementWrapperRef:t,elementRef:i})=>{const[n,s]=_.useState([0,0]),{maxZoom:a,minZoom:r}=J(f=>f.zoomOptions),o=J(f=>f.zoom),l=J(f=>f.viewportRef),c=J(f=>f.setIsPinching),u=J(f=>f.updateZoom);_.useEffect(()=>{l.current=e.current},[e,l]);const h=_.useRef({translateX:0,translateY:0,zoom:o}),d=_.useCallback(f=>{if(!i.current||!e.current||!t.current)return;const{zoom:g,translateX:p,translateY:v}=h.current;i.current.style.transform=`scale3d(${g}, ${g}, 1)`,i.current.style.willChange="scale3d";const m=i.current.getBoundingClientRect(),b=m.width;t.current.style.width=`${b}px`,t.current.style.height=`${m.height}px`,e.current.scrollTop=v,e.current.scrollLeft=p,f&&u(()=>h.current.zoom)},[e,i,t,u]);return _.useEffect(()=>{if(h.current.zoom===o||!e.current)return;const f=o/h.current.zoom;h.current={translateX:e.current.scrollLeft*f,translateY:e.current.scrollTop*f,zoom:o},d()},[e,o,d]),_.useEffect(()=>{const f=g=>g.preventDefault();return document.addEventListener("gesturestart",f),document.addEventListener("gesturechange",f),()=>{document.removeEventListener("gesturestart",f),document.removeEventListener("gesturechange",f)}},[]),aC({onPinch:({origin:f,first:g,movement:[p],memo:v})=>{const m=i.current,b=e.current;if(!m||!b||!i.current||!e.current)return;const y=rC(g,v,()=>{const T=m.getBoundingClientRect(),M=b.getBoundingClientRect(),D=[f[0]-T.left,f[1]-T.top],z=[f[0]-M.left,f[1]-M.top];return s([D[0]/h.current.zoom,D[1]/h.current.zoom]),{contentPosition:D,containerPosition:z,originZoom:h.current.zoom,originTranslate:h.current.translateY}}),A=Bu(p*y.originZoom,r,a),x=A/y.originZoom,E=y.contentPosition[0]*x-y.containerPosition[0],w=y.contentPosition[1]*x-y.containerPosition[1];return h.current={zoom:A,translateX:E,translateY:w},d(!0),y},onPinchStart:()=>c(!0),onPinchEnd:()=>c(!1)},{target:e}),{origin:n}},lC=600,cC=0,uC=({children:e,gap:t=10,virtualizerOptions:i={overscan:2},initialOffset:n,onOffsetChange:s,...a})=>{const[r,o]=_.useState([]),l=J(E=>E.viewports),c=J(E=>E.pdfDocumentProxy.numPages),u=J(E=>E.isPinching),h=_.useRef(null),d=_.useRef(null),f=_.useRef(null);oC({elementRef:d,elementWrapperRef:h,containerRef:f});const g=J(E=>E.setVirtualizer),{scrollToFn:p}=qw(),{observeElementOffset:v}=Vw(),m=_.useCallback(E=>!l||!l[E]?lC:l[E].height+cC,[l]),b=uw({count:c||0,getScrollElement:()=>f.current,estimateSize:m,observeElementOffset:v,overscan:i?.overscan??0,scrollToFn:p,gap:t,initialOffset:n});_.useEffect(()=>{s&&b.scrollOffset&&s(b.scrollOffset)},[b.scrollOffset,s]),_.useEffect(()=>{g(b)},[g,b]),_.useEffect(()=>{let E;const w=b?.getVirtualItems();return u?w&&w?.length>0&&o(w):(b?.measure(),E=setTimeout(()=>{o([])},200)),()=>{clearTimeout(E)}},[u,b?.measure,b?.getVirtualItems]);const y=b?.getVirtualItems()??[],A=r.length?r:y;Xw({items:A}),Uw({viewportRef:f});const x=J(E=>Math.max(...E.viewports.map(w=>w.width)));return _.useEffect(()=>{b.getOffsetForAlignment=(E,w,T=0)=>{const M=b.getSize(),D=b.getScrollOffset();w==="auto"&&(w=E>=D+M?"end":"start"),w==="center"?E+=(T-M)/2:w==="end"&&(E-=M);const z=b.options.horizontal?"scrollWidth":"scrollHeight";return b.scrollElement&&("document"in b.scrollElement?b.scrollElement.document.documentElement[z]:b.scrollElement[z]),Math.max(E,0)}},[b]),S.jsx(Kn.div,{ref:f,...a,style:{display:"flex",justifyContent:"center",height:"100%",position:"relative",overflow:"auto",...a.style},children:S.jsx("div",{ref:h,style:{width:"max-content"},children:S.jsx("div",{ref:d,style:{height:`${b.getTotalSize()}px`,position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",transformOrigin:"0 0",width:x,margin:"0 auto"},children:A.map(E=>{const w=l?.[E.index]?l[E.index]?.width:0;return w?S.jsx("div",{style:{width:w,height:"0px"},children:S.jsx("div",{style:{height:`${E.size}px`,transform:`translateY(${E.start}px)`},children:_.cloneElement(e,{key:E.key,pageNumber:E.index+1})})},E.key):null})})})})},hC=({onDocumentLoad:e,source:t,initialRotation:i=0,isZoomFitWidth:n,zoom:s=1,zoomOptions:a})=>{const[r,o]=_.useState(0),[l,c]=_.useState(),[u]=_.useState(i);return _.useEffect(()=>{const h=async f=>{const g=[],p=[],v=await Promise.all(Array.from({length:f.numPages},async(b,y)=>{const A=await f.getPage(y+1),x=A.rotate||0,E=A.getViewport({scale:1,rotation:u+x});return g.push(A),p.push(A.rotate),E})),m=g.sort((b,y)=>b.pageNumber-y.pageNumber);c(b=>({...b,isZoomFitWidth:n,viewports:v,pageProxies:m,pdfDocumentProxy:f,zoom:s,zoomOptions:a}))};(()=>{c(null),o(0);const f=C_(t);f.onProgress=p=>{p.loaded!==p.total&&o(p.loaded/p.total)};const g=f.promise.then(p=>{e?.({proxy:p,source:t}),o(1),h(p)}).catch(p=>{f.destroyed||console.error("Error loading PDF document",p)});return()=>{g.finally(()=>f.destroy())}})()},[t]),{initialState:l}},ry=_.forwardRef(({children:e,source:t,loader:i,onDocumentLoad:n,isZoomFitWidth:s,zoom:a,zoomOptions:r,...o},l)=>{const{initialState:c}=hC({source:t,onDocumentLoad:n,isZoomFitWidth:s,zoom:a,zoomOptions:r});return S.jsx(Kn.div,{ref:l,...o,children:c?S.jsx(na.Provider,{initialValue:c,children:e}):i||"Loading..."})});ry.displayName="Root";var Yg={maxHeight:800,maxWidth:400},dC=(e,t={})=>{const{maxHeight:i=Yg.maxHeight,maxWidth:n=Yg.maxWidth,isFirstPage:s=!1}=t,a=_.useRef(null),r=_.useRef(null),o=_.useRef(null),l=J(f=>f.getPdfPageProxy(e)),{visible:c}=mw({elementRef:a}),[u]=$o(c,50),h=dd(),d=s||u;return _.useEffect(()=>((async()=>{const g=r.current;if(!(!g||!l))try{o.current&&o.current.cancel();const p=l.getViewport({scale:1}),v=Math.min(n/p.width,i/p.height)*(d?h:.5),m=l.getViewport({scale:v});g.width=m.width,g.height=m.height;const b=g.getContext("2d");if(!b)return;const y=l.render({canvasContext:b,viewport:m});o.current=y,await y.promise}catch(p){p instanceof Error&&p.name==="RenderingCancelledException"?console.log("Rendering cancelled"):console.error("Failed to render PDF page:",p)}})(),()=>{o.current?.cancel()}),[l,d,h,i,n]),{canvasRef:r,containerRef:a,isVisible:d}},fC=({pageNumber:e=1,...t})=>{const{canvasRef:i,containerRef:n,isVisible:s}=dC(e,{isFirstPage:e<5}),{jumpToPage:a}=$0();return S.jsx("div",{ref:n,style:{minHeight:"150px",minWidth:"10px"},children:s&&S.jsx(Kn.canvas,{...t,role:"button",tabIndex:0,onClick:r=>{t.onClick&&t.onClick(r),a(e,{behavior:"auto"})},onKeyDown:r=>{t.onKeyDown&&t.onKeyDown(r),r.key==="Enter"&&a(e,{behavior:"auto"})},ref:i})})},gC=({children:e,...t})=>{const i=J(n=>n.pdfDocumentProxy.numPages);return S.jsx(Kn.div,{...t,children:Array.from({length:i}).map((n,s)=>_.cloneElement(e,{key:s,pageNumber:s+1}))})},pC=({...e})=>{const t=J(i=>i.updateZoom);return S.jsx(Kn.button,{...e,onClick:i=>{e.onClick?.(i),t(n=>Number((n+.1).toFixed(1)))}})},mC=({...e})=>{const t=J(i=>i.updateZoom);return S.jsx(Kn.button,{...e,onClick:i=>{e.onClick?.(i),t(n=>Number((n-.1).toFixed(1)))}})},bC=({...e})=>{const t=J(r=>r.updateZoom),i=J(r=>r.zoom),[n,s]=_.useState((i*100).toFixed(0)),a=_.useRef(!1);return _.useEffect(()=>{a.current||s((i*100).toFixed(0))},[i]),S.jsx("input",{...e,value:n,onClick:()=>{a.current=!0},onChange:r=>{t(Number(r.target.value)/100),s(r.target.value)},onBlur:()=>{a.current=!1,s((i*100).toFixed(0))}})};function yC(e,t){const i=[];for(let n=0;n<=t.length;n++)i[n]=[n];for(let n=0;n<=e.length;n++)i[0][n]=n;for(let n=1;n<=t.length;n++)for(let s=1;s<=e.length;s++)t.charAt(n-1)===e.charAt(s-1)?i[n][s]=i[n-1][s-1]:i[n][s]=Math.min(i[n-1][s-1]+1,i[n][s-1]+1,i[n-1][s]+1);return i[t.length][e.length]}var vC=()=>{const e=J(o=>o.textContent),[t]=_.useState([]),[i,n]=_.useState({exactMatches:[],fuzzyMatches:[],hasMoreResults:!1}),s=_.useCallback((o,l,c,u)=>{const h=[],d=l.toLowerCase(),f=o.toLowerCase();let g=0;for(;;){const p=d.indexOf(f,g);if(p===-1)break;h.push({pageNumber:c,text:l.substr(p,o.length+u),score:1,matchIndex:p,isExactMatch:!0,searchText:o}),g=p+o.length}return h},[]),a=_.useCallback((o,l,c,u,h,d)=>{const f=[],g=l.toLowerCase(),p=o.toLowerCase();let v=0;for(;v<g.length;){if(h.has(v)){v++;continue}const m=g.substr(v,p.length+10),b=yC(p,m.substr(0,p.length)),y=Math.floor(p.length*(1-u));if(b<=y&&b>0){const A=1-b/p.length;f.push({pageNumber:c,text:l.substr(v,p.length+d),score:A,matchIndex:v,isExactMatch:!1,searchText:o}),v+=p.length}else v++}return f},[]),r=_.useCallback((o,l={})=>{const{threshold:c=.7,limit:u=10,textSize:h=100}=l;if(!o.trim()){const b={exactMatches:[],fuzzyMatches:[],hasMoreResults:!1};return n(b),b}let d=[],f=[];const g=new Set;e.forEach(({pageNumber:b,text:y})=>{const A=s(o,y,b,h);d=[...d,...A],A.forEach(x=>{for(let E=0;E<o.length;E++)g.add(x.matchIndex+E)})}),e.forEach(({pageNumber:b,text:y})=>{const A=a(o,y,b,c,g,h);f=[...f,...A]}),d.sort((b,y)=>y.score-b.score),f.sort((b,y)=>y.score-b.score);const p=Math.min(d.length,Math.ceil(u/2)),v=Math.min(f.length,u-p),m={exactMatches:d.slice(0,p),fuzzyMatches:f.slice(0,v),hasMoreResults:d.length+f.length>u};return n(m),m},[e,s,a]);return{textContent:e,keywords:t,searchResults:i,search:r}};async function AC(e,t){const n=(await e.getTextContent()).items,s=t.searchText?t.searchText.length:t.text.length,a=[];let r=0,o=s,l=!1;const c=e.getViewport({scale:1});for(let u=0;u<n.length;u++){const h=n[u];if(!h)continue;const d=h.str.length;if(!l&&r<=t.matchIndex&&t.matchIndex<r+d){l=!0;const f=t.matchIndex-r,g=Math.min(d-f,o),p=h.transform,v=c.height-(p[5]+h.height),m={pageNumber:t.pageNumber,left:p[4]+f*(h.width/d),top:v,width:g*(h.width/d),height:h.height};a.push(m),o-=g}else if(l&&o>0){const f=Math.min(d,o),g=h.transform,p=c.height-(g[5]+h.height),v={pageNumber:t.pageNumber,left:g[4],top:p,width:f*(h.width/d),height:h.height};a.push(v),o-=f}if(o<=0&&l)break;r+=d}return SC(a)}function SC(e){if(e.length<=1)return e;const t=[];let i=e[0];if(!i)return e;for(let n=1;n<e.length;n++){const s=e[n];s&&(Math.abs(i.top-s.top)<2&&Math.abs(i.height-s.height)<2?i={...i,width:s.left+s.width-i.left}:(t.push(i),i=s))}return t.push(i),t}const xC=({toasts:e,onRemove:t})=>S.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"400px"},children:e.map(i=>S.jsx(_C,{toast:i,onRemove:t},i.id))}),_C=({toast:e,onRemove:t})=>{const[i,n]=_.useState(!1);_.useEffect(()=>{const r=e.duration||3e3,o=setTimeout(()=>{n(!0),setTimeout(()=>t(e.id),300)},r);return()=>clearTimeout(o)},[e,t]);const s=()=>{switch(e.type){case"success":return"#10b981";case"error":return"#ef4444";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#6b7280"}},a=()=>{switch(e.type){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}};return S.jsxs("div",{style:{backgroundColor:s(),color:"white",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"10px",minWidth:"250px",animation:i?"slideOut 0.3s ease-out":"slideIn 0.3s ease-out",cursor:"pointer"},onClick:()=>{n(!0),setTimeout(()=>t(e.id),300)},children:[S.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:a()}),S.jsx("span",{style:{flex:1,fontSize:"14px"},children:e.message}),S.jsx("button",{onClick:r=>{r.stopPropagation(),n(!0),setTimeout(()=>t(e.id),300)},style:{background:"transparent",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"0",lineHeight:"1"},children:""}),S.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes slideOut {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(400px);
            opacity: 0;
          }
        }
      `})]})},wC=()=>{const[e,t]=_.useState([]),i=(s,a="info",r)=>{const o=`toast-${Date.now()}-${Math.random()}`;t(l=>[...l,{id:o,message:s,type:a,duration:r}])};return{toasts:e,addToast:i,removeToast:s=>{t(a=>a.filter(r=>r.id!==s))},success:(s,a)=>i(s,"success",a),error:(s,a)=>i(s,"error",a),warning:(s,a)=>i(s,"warning",a),info:(s,a)=>i(s,"info",a)}},EC=({isOpen:e,onClose:t,title:i,children:n,onConfirm:s,confirmText:a="Confirm",cancelText:r="Cancel",type:o="info"})=>{if(_.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const l=()=>{switch(o){case"danger":return"#ef4444";case"warning":return"#f59e0b";default:return"#3b82f6"}};return S.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.2s ease-out"},onClick:t,children:[S.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",animation:"scaleIn 0.2s ease-out"},onClick:c=>c.stopPropagation(),children:[S.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",fontWeight:"600",color:"#111827"},children:i}),S.jsx("div",{style:{marginBottom:"24px",color:"#4b5563",fontSize:"14px"},children:n}),S.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[S.jsx("button",{onClick:t,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"white",color:"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.backgroundColor="#f9fafb"},onMouseOut:c=>{c.currentTarget.style.backgroundColor="white"},children:r}),s&&S.jsx("button",{onClick:()=>{s(),t()},style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:l(),color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.opacity="0.9"},onMouseOut:c=>{c.currentTarget.style.opacity="1"},children:a})]})]}),S.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from {
            transform: scale(0.95);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]})},CC=({isOpen:e,onClose:t,title:i,message:n,onConfirm:s,placeholder:a="",defaultValue:r="",confirmText:o="Confirm",cancelText:l="Cancel"})=>{const[c,u]=_.useState(r);_.useEffect(()=>{e&&u(r)},[e,r]);const h=()=>{c.trim()&&(s(c.trim()),t())};return S.jsxs(EC,{isOpen:e,onClose:t,title:i,onConfirm:h,confirmText:o,cancelText:l,children:[S.jsx("p",{style:{marginBottom:"16px"},children:n}),S.jsx("input",{type:"text",value:c,onChange:d=>u(d.target.value),placeholder:a,onKeyDown:d=>{d.key==="Enter"?h():d.key==="Escape"&&t()},autoFocus:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:d=>{d.currentTarget.style.borderColor="#3b82f6"},onBlur:d=>{d.currentTarget.style.borderColor="#d1d5db"}})]})},TC="LectorReviewDB",MC=1,gi="pdfs";function Ll(){return new Promise((e,t)=>{const i=indexedDB.open(TC,MC);i.onerror=()=>t(i.error),i.onsuccess=()=>e(i.result),i.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(gi)||s.createObjectStore(gi,{keyPath:"id"}).createIndex("projectName","projectName",{unique:!1})}})}async function RC(e,t){const i=await Ll(),s={id:`pdf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:e.name,size:e.size,uploadDate:new Date().toISOString(),projectName:t},a={...s,data:e};return new Promise((r,o)=>{const u=i.transaction([gi],"readwrite").objectStore(gi).add(a);u.onsuccess=()=>r(s),u.onerror=()=>o(u.error)})}async function DC(e){const t=await Ll();return new Promise((i,n)=>{const r=t.transaction([gi],"readonly").objectStore(gi).get(e);r.onsuccess=()=>i(r.result||null),r.onerror=()=>n(r.error)})}async function NC(e){const t=await Ll();return new Promise((i,n)=>{const o=t.transaction([gi],"readonly").objectStore(gi).index("projectName").getAll(e);o.onsuccess=()=>{const l=o.result.map(({data:c,...u})=>u);i(l)},o.onerror=()=>n(o.error)})}async function OC(e){const t=await Ll();return new Promise((i,n)=>{const r=t.transaction([gi],"readwrite").objectStore(gi).delete(e);r.onsuccess=()=>i(),r.onerror=()=>n(r.error)})}async function LC(e){const t=await DC(e);return t?URL.createObjectURL(t.data):null}function kC(e){URL.revokeObjectURL(e)}function gd(e){if(e===0)return"0 Bytes";const t=1024,i=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,n)*100)/100+" "+i[n]}const zC=({onFileSelect:e,loading:t=!1,error:i=null})=>{const n=_.useRef(null),[s,a]=_.useState(!1),r=d=>{const f=d.target.files?.[0];f&&o(f)},o=d=>{if(d.type!=="application/pdf"){alert("Please select a PDF file");return}const f=50*1024*1024;if(d.size>f){alert(`File size exceeds maximum of ${gd(f)}`);return}e(d)},l=()=>{n.current?.click()},c=d=>{d.preventDefault(),a(!0)},u=d=>{d.preventDefault(),a(!1)},h=d=>{d.preventDefault(),a(!1);const f=d.dataTransfer.files?.[0];f&&o(f)};return S.jsxs("div",{className:"space-y-2",children:[S.jsx("input",{ref:n,type:"file",accept:".pdf,application/pdf",onChange:r,style:{display:"none"},"aria-label":"Upload PDF file"}),S.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,onClick:l,onDragOver:c,onDragLeave:u,onDrop:h,children:S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsx("svg",{className:"w-10 h-10 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t?"Uploading...":"Click or drag PDF here"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Maximum file size: 50MB"})]})]})}),i&&S.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-2 rounded",children:i})]})},PC=({pdfs:e,currentPdfId:t,onSelect:i,onDelete:n,loading:s=!1})=>e.length===0?S.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center py-4",children:"No PDFs uploaded yet"}):S.jsx("div",{className:"space-y-2",children:e.map(a=>S.jsxs("div",{className:`flex items-center gap-2 p-2 rounded border transition-colors ${a.id===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[S.jsx("button",{className:"flex-1 text-left min-w-0",onClick:()=>i(a.id),disabled:s,"aria-label":`Select ${a.name}`,children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 flex-shrink-0 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("p",{className:"text-xs font-medium truncate",title:a.name,children:a.name}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:gd(a.size)})]})]})}),S.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",onClick:()=>{window.confirm(`Delete "${a.name}"? This action cannot be undone.`)&&n(a.id)},disabled:s,title:"Delete PDF","aria-label":`Delete ${a.name}`,children:S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},a.id))}),jC=({isOpen:e,onClose:t,templates:i,onSaveTemplates:n,totalPages:s})=>{const[a,r]=_.useState(i),[o,l]=_.useState(1),[c,u]=_.useState(!1),h=b=>{if(!b)return;const A={id:`field_${Date.now()}`,label:b,placeholder:"",type:"string",required:!1};r(x=>({...x,[o]:[...x[o]||[],A]}))},d=b=>{window.confirm("Remove this field?")&&r(y=>({...y,[o]:(y[o]||[]).filter(A=>A.id!==b)}))},f=(b,y)=>{r(A=>({...A,[o]:(A[o]||[]).map(x=>x.id===b?{...x,...y}:x)}))},g=()=>{n(a),t()},p=()=>{if(!window.confirm("Copy current page template to all pages? This will overwrite existing templates."))return;const b=a[o]||[],y={};for(let A=1;A<=s;A++)y[A]=JSON.parse(JSON.stringify(b));r(y)},v=()=>{window.confirm("Clear all fields on this page?")&&r(b=>({...b,[o]:[]}))},m=a[o]||[];return e?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[S.jsx("h2",{className:"text-xl font-semibold",children:"Template Manager"}),S.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[S.jsx("label",{className:"text-sm font-medium",children:"Page:"}),S.jsx("select",{value:o,onChange:b=>l(Number(b.target.value)),className:"flex-1 min-w-[120px] px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm",children:Array.from({length:s},(b,y)=>y+1).map(b=>S.jsxs("option",{value:b,children:["Page ",b]},b))}),S.jsx("button",{onClick:p,className:"px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-md text-sm font-medium",title:"Copy to all pages",children:" Copy to All"}),S.jsx("button",{onClick:v,className:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md text-sm font-medium",title:"Clear this page",children:" Clear Page"})]}),S.jsx("div",{className:"space-y-3",children:m.length===0?S.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[S.jsx("p",{className:"text-sm",children:"No fields for this page"}),S.jsx("p",{className:"text-xs mt-1",children:'Click "Add Field" to create one'})]}):m.map((b,y)=>S.jsxs("div",{className:"p-3 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 space-y-2",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("span",{className:"text-xs font-mono text-gray-500 dark:text-gray-400",children:["#",y+1]}),S.jsx("input",{type:"text",value:b.label,onChange:A=>f(b.id,{label:A.target.value}),placeholder:"Field label",className:"flex-1 px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm font-medium"}),S.jsx("button",{onClick:()=>d(b.id),className:"px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs",title:"Remove field",children:""})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("label",{className:"text-xs font-medium w-20",children:"Type:"}),S.jsxs("select",{value:b.type||"string",onChange:A=>f(b.id,{type:A.target.value}),className:"flex-1 px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-xs",children:[S.jsx("option",{value:"string",children:"Text"}),S.jsx("option",{value:"number",children:"Number"}),S.jsx("option",{value:"date",children:"Date"}),S.jsx("option",{value:"select",children:"Select"})]}),S.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[S.jsx("input",{type:"checkbox",checked:b.required||!1,onChange:A=>f(b.id,{required:A.target.checked}),className:"rounded"}),"Required"]})]}),S.jsx("input",{type:"text",value:b.placeholder||"",onChange:A=>f(b.id,{placeholder:A.target.value}),placeholder:"Placeholder text",className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-xs"}),b.type==="select"&&S.jsx("input",{type:"text",value:(b.options||[]).join(", "),onChange:A=>f(b.id,{options:A.target.value.split(",").map(x=>x.trim()).filter(Boolean)}),placeholder:"Options (comma-separated)",className:"w-full px-2 py-1 border dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-xs"})]},b.id))}),S.jsx("button",{onClick:()=>u(!0),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm font-medium",children:"+ Add Field"})]}),S.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t dark:border-gray-700",children:[S.jsx("button",{onClick:t,className:"px-4 py-2 border dark:border-gray-600 rounded-md text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),S.jsx("button",{onClick:g,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md text-sm font-medium",children:"Save Templates"})]})]})}),S.jsx(CC,{isOpen:c,onClose:()=>u(!1),onConfirm:h,title:"Add Field",placeholder:"Enter field label"})]}):null};function IC(e){const t=[];if(!e.properties)return t;for(const[i,n]of Object.entries(e.properties)){const s=n,a={id:i,title:s.description||i,description:s.description,fields:Vu(s.properties||{},i,e.definitions||{})};t.push(a)}return t}function Vu(e,t,i){const n=[];for(const[s,a]of Object.entries(e)){const r=a,o=`${t}.${s}`;if(r.$ref){const l=r.$ref.replace("#/definitions/",""),c=i[l];if(c)if(l.startsWith("Sourced")){const u=oy(c);n.push({id:s,label:rs(r.description||s),description:r.description,type:u,required:!1,path:o,isSourced:!0})}else{const u=Vu(c.properties||{},o,i);u.length>0&&n.push({id:s,label:rs(r.description||s),description:r.description,type:"object",required:!1,path:o,properties:u,isSourced:!1})}}else if(r.type)if(r.type==="object"&&r.properties){const l=Vu(r.properties,o,i);n.push({id:s,label:rs(r.description||s),description:r.description,type:"object",required:!1,path:o,properties:l,isSourced:!1})}else if(r.type==="array"&&r.items){const l=FC(r.items,o,i);n.push({id:s,label:rs(r.description||s),description:r.description,type:"array",required:!1,path:o,items:l,isSourced:!1})}else n.push({id:s,label:rs(r.description||s),description:r.description,type:BC(r.type),required:!1,enum:r.enum,path:o,isSourced:!1});else if(r.allOf){const l=HC(r.allOf,i);l.enum&&n.push({id:s,label:rs(r.description||s),description:r.description,type:"enum",required:!1,enum:l.enum,path:o,isSourced:!0})}}return n}function FC(e,t,i){if(e.$ref){const n=e.$ref.replace("#/definitions/",""),s=i[n];if(s&&n.startsWith("Sourced"))return{id:"item",label:"Item",type:oy(s),required:!1,path:`${t}[]`,isSourced:!0}}return{id:"item",label:"Item",type:"string",required:!1,path:`${t}[]`,isSourced:!1}}function oy(e){if(!e.properties?.value)return"string";const t=e.properties.value.type;return t==="string"?"string":t==="number"?"number":t==="integer"?"integer":t==="boolean"?"boolean":"string"}function HC(e,t){const i={};for(const n of e){if(n.$ref){const s=n.$ref.replace("#/definitions/",""),a=t[s];Object.assign(i,a)}n.properties&&(Object.assign(i,n.properties),n.properties.value?.enum&&(i.enum=n.properties.value.enum))}return i}function BC(e){return e==="string"?"string":e==="number"?"number":e==="integer"?"integer":e==="boolean"?"boolean":e==="object"?"object":e==="array"?"array":"string"}function rs(e){const t=e.match(/^([^:?]+)/);return t?t[1].trim():e}function Lc(e,t,i,n){return{value:e,source_text:t,source_location:i,highlightId:n}}const UC=({sections:e,data:t,onDataChange:i,onLinkHighlight:n,currentSection:s})=>{const[a,r]=_.useState(new Set([s||e[0]?.id])),o=d=>{r(f=>{const g=new Set(f);return g.has(d)?g.delete(d):g.add(d),g})},l=(d,f="")=>{const g=f?`${f}.${d.id}`:d.id,p=GC(t,g);return d.isSourced?c(d,g,p):d.type==="object"&&d.properties?S.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:[S.jsx("label",{className:"text-sm font-medium block",children:d.label}),d.properties.map(v=>l(v,g))]},d.id):d.type==="array"?h(d,g,p):u(d,g,p)},c=(d,f,g)=>{const p=g&&typeof g=="object"&&"value"in g?g:{value:g||""};return S.jsxs("div",{className:"space-y-1",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("label",{className:"text-sm font-medium",title:d.description,children:[d.label,d.required&&S.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n&&S.jsx("button",{onClick:()=>n(f),className:"text-xs text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300",title:"Link to highlight",children:" Link"})]}),d.type==="enum"&&d.enum?S.jsxs("select",{value:p.value||"",onChange:v=>i(f,Lc(v.target.value,p.source_text,p.source_location)),className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800",children:[S.jsx("option",{value:"",children:"Select..."}),d.enum.map(v=>S.jsx("option",{value:v,children:v},v))]}):S.jsx("input",{type:d.type==="number"||d.type==="integer"?"number":"text",value:p.value||"",onChange:v=>{const m=d.type==="number"?parseFloat(v.target.value):d.type==="integer"?parseInt(v.target.value):v.target.value;i(f,Lc(m,p.source_text,p.source_location))},placeholder:d.description,className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800"}),S.jsx("input",{type:"text",value:p.source_text||"",onChange:v=>i(f,{...p,source_text:v.target.value}),placeholder:"Source text (exact quote)",className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-xs bg-gray-50 dark:bg-gray-700/50"}),S.jsx("input",{type:"text",value:p.source_location||"",onChange:v=>i(f,{...p,source_location:v.target.value}),placeholder:"Source location (e.g., Table 1, Page 4)",className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-xs bg-gray-50 dark:bg-gray-700/50"}),p.highlightId&&S.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:" Linked to highlight"})]},d.id)},u=(d,f,g)=>S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-sm font-medium",title:d.description,children:[d.label,d.required&&S.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d.type==="enum"&&d.enum?S.jsxs("select",{value:g||"",onChange:p=>i(f,p.target.value),className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800",children:[S.jsx("option",{value:"",children:"Select..."}),d.enum.map(p=>S.jsx("option",{value:p,children:p},p))]}):d.type==="boolean"?S.jsx("input",{type:"checkbox",checked:g||!1,onChange:p=>i(f,p.target.checked),className:"rounded"}):S.jsx("input",{type:d.type==="number"||d.type==="integer"?"number":"text",value:g||"",onChange:p=>{const v=d.type==="number"?parseFloat(p.target.value):d.type==="integer"?parseInt(p.target.value):p.target.value;i(f,v)},placeholder:d.description,className:"w-full px-2 py-1 border dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-800"})]},d.id),h=(d,f,g)=>{const p=Array.isArray(g)?g:[];return S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("label",{className:"text-sm font-medium",children:d.label}),S.jsx("button",{onClick:()=>i(f,[...p,d.items?.isSourced?Lc(""):""]),className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"+ Add"})]}),S.jsx("div",{className:"space-y-2 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:p.map((v,m)=>S.jsxs("div",{className:"flex items-start gap-2",children:[S.jsx("div",{className:"flex-1",children:d.items&&l({...d.items,id:`${d.id}[${m}]`},`${f}[${m}]`)}),S.jsx("button",{onClick:()=>i(f,p.filter((b,y)=>y!==m)),className:"text-red-500 hover:text-red-600 text-xs",title:"Remove",children:""})]},m))})]},d.id)};return S.jsx("div",{className:"space-y-4",children:e.map(d=>S.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>o(d.id),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between text-left",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-sm",children:d.title}),d.description&&S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:d.description})]}),S.jsx("svg",{className:`w-5 h-5 transition-transform ${a.has(d.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.has(d.id)&&S.jsx("div",{className:"p-4 space-y-3",children:d.fields.map(f=>l(f))})]},d.id))})};function GC(e,t){const i=t.split(".");let n=e;for(const s of i){const a=s.match(/^(.+)\[(\d+)\]$/);if(a){const[,r,o]=a;n=n?.[r]?.[parseInt(o)]}else n=n?.[s];if(n===void 0)return}return n}function VC(e){const[t,i]=_.useState([]),[n,s]=_.useState(null),[a,r]=_.useState(!1),[o,l]=_.useState(null),c=_.useCallback(async()=>{try{r(!0),l(null);const g=await NC(e);i(g),!n&&g.length>0&&s(g[0].id)}catch(g){l(g instanceof Error?g.message:"Failed to load PDFs")}finally{r(!1)}},[e,n]);_.useEffect(()=>{c()},[c]);const u=_.useCallback(async g=>{try{if(r(!0),l(null),g.type!=="application/pdf")throw new Error("Only PDF files are supported");const p=50*1024*1024;if(g.size>p)throw new Error(`File size exceeds maximum of ${gd(p)}`);const v=await RC(g,e);return await c(),s(v.id),v}catch(p){const v=p instanceof Error?p.message:"Failed to upload PDF";return l(v),null}finally{r(!1)}},[e,c]),h=_.useCallback(async g=>{try{r(!0),l(null);const p=t.find(v=>v.id===g);if(p?.blobUrl&&kC(p.blobUrl),await OC(g),await c(),n===g){const v=t.filter(m=>m.id!==g);s(v.length>0?v[0].id:null)}return!0}catch(p){return l(p instanceof Error?p.message:"Failed to delete PDF"),!1}finally{r(!1)}},[t,n,c]),d=_.useCallback(async()=>{if(!n)return null;try{return await LC(n)}catch(g){return l(g instanceof Error?g.message:"Failed to load PDF"),null}},[n]),f=t.find(g=>g.id===n)||null;return{pdfs:t,currentPdfId:n,currentPDF:f,setCurrentPdfId:s,uploadPDF:u,removePDF:h,getCurrentPDFUrl:d,loading:a,error:o,reload:c}}C0.workerSrc=new URL("/assets/pdf.worker-BgryrOlp.mjs",import.meta.url).toString();let qC=0;const XC=()=>`h${++qC}`,$g={1:[{id:"study_id",label:"Study ID (DOI/PMID)",placeholder:"e.g., 10.1161/STROKEAHA.116.014078"},{id:"first_author",label:"First Author",placeholder:"e.g., Kim"},{id:"year",label:"Year of Publication",placeholder:"e.g., 2016"},{id:"country",label:"Country",placeholder:"e.g., Korea"}],2:[{id:"research_question",label:"Research Question",placeholder:"Primary research question"},{id:"study_design",label:"Study Design",placeholder:"e.g., Retrospective-Matched Case-Control"},{id:"control_definition",label:"Control Group Definition",placeholder:"How was control defined?"}],3:[{id:"total_patients",label:"Total Patients (N)",placeholder:"e.g., 112"},{id:"intervention_size",label:"Intervention Group Size",placeholder:"e.g., 28"},{id:"control_size",label:"Control Group Size",placeholder:"e.g., 56"}],4:[{id:"age_mean",label:"Age (Mean  SD)",placeholder:"e.g., 59.0  11.6"},{id:"gender_male_pct",label:"Gender (% Male)",placeholder:"e.g., 64.3%"},{id:"baseline_status",label:"Baseline Neurological Status",placeholder:"e.g., GCS score, NIHSS"}],5:[{id:"primary_outcome",label:"Primary Outcome",placeholder:"e.g., mRS 0-2 at 12 months"},{id:"effect_measure",label:"Effect Measure (OR/RR/HR)",placeholder:"e.g., OR 4.815"},{id:"confidence_interval",label:"95% CI",placeholder:"e.g., [1.45, 3.78]"},{id:"p_value",label:"P-value",placeholder:"e.g., 0.009"}]};function YC({highlights:e,onAddHighlight:t,searchTerm:i,onSearchResultsChange:n,onUpdateSearchHighlights:s,onPageChange:a,onJumpToPageReady:r,onSearchResultsData:o}){const l=K0(),{jumpToPage:c}=$0(),u=sa(),h=J(),d=h?.numPages||0,{searchResults:f,search:g}=vC();_.useEffect(()=>{c&&r(c)},[c,r]),_.useEffect(()=>{u&&d&&a(u,d)},[u,d,a]);const[p,v]=_.useState(null);_.useEffect(()=>{i&&i.trim().length>0&&g(i)},[i,g]),_.useEffect(()=>{if(f?.exactMatches&&f.exactMatches.length>0){n(f.exactMatches.length),o(f.exactMatches);let y=!1;return(async()=>{const x=[];for(const[E,w]of f.exactMatches.entries()){if(y)break;try{const T=h?await h.getPage(w.pageNumber):null;if(T)(await AC(T,{pageNumber:w.pageNumber,text:w.text,matchIndex:w.matchIndex||0})).forEach(D=>{x.push({id:`search-${E}-${x.length}-${Date.now()}`,label:`Search: "${i}"`,kind:"search",pageNumber:D.pageNumber,x:D.left,y:D.top,width:D.width,height:D.height})});else{const M=w.rects&&w.rects[0]?w.rects[0]:w.rect?w.rect:{x:100,y:100,width:200,height:20};x.push({id:`search-${E}-${Date.now()}`,label:`Search: "${i}"`,kind:"search",pageNumber:w.pageNumber||1,x:M.x||0,y:M.y||0,width:M.width||200,height:M.height||20})}}catch(T){console.error("Failed to calculate highlight rects for match:",T);const M=w.rects&&w.rects[0]?w.rects[0]:w.rect?w.rect:{x:100,y:100,width:200,height:20};x.push({id:`search-${E}-${Date.now()}`,label:`Search: "${i}"`,kind:"search",pageNumber:w.pageNumber||1,x:M.x||0,y:M.y||0,width:M.width||200,height:M.height||20})}}y||s(x)})(),()=>{y=!0}}else n(0),o([])},[f,i,h,n,o,s]),_.useEffect(()=>{l&&l.rects&&l.rects.length>0&&v({rects:l.rects,pageNumber:u||1,text:l.text||""})},[l,u]);const m=_.useCallback(()=>{if(p){const y=prompt("Enter highlight label:",p.text.substring(0,50));if(y){const A=p.rects[0];t(A,p.pageNumber,y)}v(null)}},[p,t]),b=e.map(y=>({id:y.id,pageNumber:y.pageNumber,rects:[{x:y.x,y:y.y,width:y.width,height:y.height}],color:y.kind==="search"?"rgba(255, 255, 0, 0.4)":"rgba(0, 255, 0, 0.3)"}));return S.jsxs("div",{className:"relative w-full h-full",children:[S.jsx(W0,{children:p&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg shadow-lg hover:bg-green-700 transition-colors text-sm",children:" Highlight Selected Text"}),S.jsx("button",{onClick:()=>v(null),className:"px-3 py-2 bg-gray-600 text-white rounded-lg shadow-lg hover:bg-gray-700 transition-colors text-sm",children:""})]})}),S.jsx(uC,{className:"p-6",children:S.jsxs(Bw,{children:[S.jsx(Sw,{}),S.jsx(Iw,{}),S.jsx(Ow,{highlights:b})]})})]})}function $C(){const{toasts:e,success:t,error:i,info:n,removeToast:s}=wC(),[a,r]=_.useState(()=>{const R=localStorage.getItem("projects");return R?JSON.parse(R):["default"]}),[o,l]=_.useState("default"),[c,u]=_.useState("/Kim2016.pdf"),[h,d]=_.useState(null),f=_.useRef(null),{pdfs:g,currentPdfId:p,setCurrentPdfId:v,uploadPDF:m,removePDF:b,getCurrentPDFUrl:y,loading:A}=VC(o);_.useEffect(()=>(p?y().then(R=>{R&&(f.current&&URL.revokeObjectURL(f.current),d(R),f.current=R)}):(f.current&&(URL.revokeObjectURL(f.current),f.current=null),d(null)),()=>{f.current&&(URL.revokeObjectURL(f.current),f.current=null)}),[p,y]);const x=h||c,[E,w]=_.useState(""),[T,M]=_.useState(0),[D,z]=_.useState([]),[H,B]=_.useState(0),[F,P]=_.useState(()=>{const R=localStorage.getItem(`proj:${o}:highlights`);return R?JSON.parse(R):[]}),[C,O]=_.useState(()=>{const R=localStorage.getItem(`proj:${o}:templates`);return R?JSON.parse(R):$g}),[L,k]=_.useState(()=>{const R=localStorage.getItem(`proj:${o}:pageForm`);return R?JSON.parse(R):{}}),[j,st]=_.useState(1),[K,ht]=_.useState(9),[Dt,$t]=_.useState("1"),[at,et]=_.useState(null);_.useEffect(()=>{$t(j.toString())},[j]);const Kt=_.useCallback(R=>{et(()=>R)},[]),[Hi,aa]=_.useState(null),[xn,wr]=_.useState(!1),[Zn,ra]=_.useState(!1),[Qn,Er]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const G=await fetch("/schema.json");if(G.ok){const Ct=await G.json(),Nt=IC(Ct);aa(Nt)}else console.warn("Schema.json not found, schema forms will be disabled")}catch(G){console.error("Schema parse error:",G),i("Failed to load schema")}})()},[]),_.useEffect(()=>{localStorage.setItem("projects",JSON.stringify(a))},[a]),_.useEffect(()=>{localStorage.setItem(`proj:${o}:highlights`,JSON.stringify(F))},[o,F]),_.useEffect(()=>{localStorage.setItem(`proj:${o}:templates`,JSON.stringify(C))},[o,C]),_.useEffect(()=>{localStorage.setItem(`proj:${o}:pageForm`,JSON.stringify(L))},[o,L]);const Cr=_.useCallback((R,G)=>{st(R),ht(G)},[]),kl=R=>{l(R);const G=localStorage.getItem(`proj:${R}:highlights`);P(G?JSON.parse(G):[]);const Ct=localStorage.getItem(`proj:${R}:templates`);O(Ct?JSON.parse(Ct):$g);const Nt=localStorage.getItem(`proj:${R}:pageForm`);k(Nt?JSON.parse(Nt):{}),t(`Switched to project: ${R}`)},ly=()=>{const R=prompt("New project name?");R&&!a.includes(R)?(r([...a,R]),kl(R),t(`Project "${R}" created`)):R&&a.includes(R)&&i("Project name already exists")},cy=()=>{if(o==="default"){i("Cannot delete default project");return}if(confirm(`Delete project "${o}"?`)){const R=a.filter(G=>G!==o);r(R),localStorage.removeItem(`proj:${o}:highlights`),localStorage.removeItem(`proj:${o}:templates`),localStorage.removeItem(`proj:${o}:pageForm`),kl("default"),t(`Project "${o}" deleted`)}},uy=(R,G,Ct)=>{const Nt={id:XC(),label:Ct,kind:"user",pageNumber:G,x:R.x,y:R.y,width:R.width,height:R.height};P(Je=>[...Je,Nt]),t("Highlight added")},hy=R=>{const G=F.find(Nt=>Nt.id===R);if(!G)return;const Ct=prompt("New label?",G.label);Ct&&(P(Nt=>Nt.map(Je=>Je.id===R?{...Je,label:Ct}:Je)),t("Highlight updated"))},dy=R=>{P(G=>G.filter(Ct=>Ct.id!==R)),t("Highlight deleted")},Jn=_.useCallback(R=>{R<1||R>K||(at?at(R):st(R))},[K,at]),fy=async R=>{try{const G=await m(R);G?(t(`PDF "${R.name}" uploaded successfully`),v(G.id)):i("Failed to upload PDF")}catch(G){i(G instanceof Error?G.message:"Failed to upload PDF")}},gy=R=>{v(R),n("PDF selected")},py=async R=>{try{await b(R)?t("PDF deleted"):i("Failed to delete PDF")}catch(G){i(G instanceof Error?G.message:"Failed to delete PDF")}},pd=C[j]||[],my=(R,G,Ct)=>{const Nt=`${Ct}:${R}`;k(Je=>({...Je,[Nt]:G}))},by=(R,G)=>{k(Ct=>({...Ct,[R]:G}))},yy=R=>{O(R),t("Templates saved"),ra(!1)},vy=()=>{const R={project:o,source:x,highlights:F,templates:C,pageForm:L,exportedAt:new Date().toISOString()},G=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),Ct=URL.createObjectURL(G),Nt=document.createElement("a");Nt.href=Ct,Nt.download=`${o}_export_${Date.now()}.json`,Nt.click(),URL.revokeObjectURL(Ct),t("Data exported as JSON")},Ay=()=>{const R=[["Project","Page","Field","Value","Highlight Label","Highlight Page"]];Object.entries(L).forEach(([ts,zl])=>{const[Ey,Cy]=ts.split(":");R.push([o,Ey||"",Cy||"",String(zl||""),"",""])}),F.forEach(ts=>{R.push([o,"","","",ts.label,String(ts.pageNumber)])});const G=R.map(ts=>ts.map(zl=>`"${zl}"`).join(",")).join(`
`),Ct=new Blob([G],{type:"text/csv"}),Nt=URL.createObjectURL(Ct),Je=document.createElement("a");Je.href=Nt,Je.download=`${o}_export_${Date.now()}.csv`,Je.click(),URL.revokeObjectURL(Nt),t("Data exported as CSV")},Sy=_.useCallback(R=>{P(G=>[...G.filter(Nt=>Nt.kind!=="search"),...R])},[]),xy=_.useCallback(R=>{z(R),B(0)},[]),oa=_.useCallback(R=>{if(D[R]&&at){const G=D[R];at(G.pageNumber),B(R)}},[D,at]),_y=_.useCallback(()=>{if(D.length>0){const R=(H+1)%D.length;oa(R)}},[H,D.length,oa]),wy=_.useCallback(()=>{if(D.length>0){const R=(H-1+D.length)%D.length;oa(R)}},[H,D.length,oa]);return _.useEffect(()=>{(!E||E.trim().length===0)&&P(R=>R.filter(G=>G.kind!=="search"))},[E]),S.jsxs("div",{className:"flex h-screen bg-gray-50",children:[S.jsx(xC,{toasts:e,onRemove:s}),S.jsxs("aside",{className:"w-64 border-r p-3 space-y-4 bg-white overflow-y-auto",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("label",{className:"text-xs font-semibold",children:"Project"}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("select",{className:"flex-1 border p-1 rounded text-sm",value:o,onChange:R=>kl(R.target.value),children:a.map(R=>S.jsx("option",{value:R,children:R},R))}),S.jsx("button",{className:"px-2 border rounded",onClick:ly,"aria-label":"Add project",children:"+"}),S.jsx("button",{className:"px-2 border rounded",onClick:cy,"aria-label":"Delete project",children:""})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"text-xs font-semibold",children:"PDF Management"}),S.jsx(zC,{onFileSelect:fy,loading:A,error:null}),g.length>0&&S.jsx(PC,{pdfs:g,currentPdfId:p,onSelect:gy,onDelete:py,loading:A})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("label",{className:"text-xs font-semibold",children:"Or load from URL:"}),S.jsx("input",{className:"w-full border p-1 rounded text-sm",value:c,onChange:R=>u(R.target.value),placeholder:"Enter PDF URL...",disabled:!!p})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"text-xs font-semibold",children:"Search"}),S.jsx("input",{className:"w-full border p-1 rounded text-sm",placeholder:"Search in PDF...",value:E,onChange:R=>w(R.target.value)}),T>0&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex items-center justify-between gap-2",children:[S.jsxs("div",{className:"text-xs text-gray-600",children:["Match ",H+1," of ",T]}),S.jsxs("div",{className:"flex gap-1",children:[S.jsx("button",{onClick:wy,className:"px-2 py-1 text-xs border rounded hover:bg-gray-100",title:"Previous match",children:""}),S.jsx("button",{onClick:_y,className:"px-2 py-1 text-xs border rounded hover:bg-gray-100",title:"Next match",children:""})]})]}),S.jsxs("div",{className:"max-h-40 overflow-y-auto border rounded text-xs bg-white",children:[D.slice(0,10).map((R,G)=>S.jsxs("div",{onClick:()=>oa(G),className:`p-2 cursor-pointer hover:bg-blue-50 border-b last:border-b-0 ${G===H?"bg-blue-100":""}`,children:[S.jsxs("div",{className:"font-medium text-blue-700",children:["Page ",R.pageNumber]}),S.jsxs("div",{className:"text-gray-600 truncate",children:[R.text?.substring(0,60)||"Match found","..."]})]},G)),D.length>10&&S.jsxs("div",{className:"p-2 text-center text-gray-500 italic",children:["Showing first 10 of ",T," results"]})]})]})]}),S.jsxs("div",{className:"space-x-2",children:[S.jsx("button",{onClick:vy,className:"text-sm bg-green-200 px-2 py-1 rounded hover:bg-green-300","aria-label":"Export JSON",children:"Export JSON"}),S.jsx("button",{onClick:Ay,className:"text-sm bg-red-200 px-2 py-1 rounded hover:bg-red-300","aria-label":"Export CSV",children:"Export CSV"})]})]}),S.jsxs("main",{className:"flex-1 grid grid-cols-[1fr_340px]",children:[S.jsx("div",{className:"overflow-hidden flex flex-col",children:S.jsxs(ry,{source:x,className:"flex-1 flex flex-col",zoomOptions:{minZoom:.5,maxZoom:3},children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-gray-50",children:[S.jsx("div",{className:"flex items-center gap-2",children:S.jsxs("button",{onClick:()=>Er(!Qn),className:"px-3 py-1 text-sm border rounded hover:bg-gray-200",title:"Toggle thumbnails",children:[Qn?" Hide":" Show"," Thumbnails"]})}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(mC,{className:"cursor-pointer hover:bg-gray-200 p-1 rounded"}),S.jsx(bC,{className:"text-sm font-mono"}),S.jsx(pC,{className:"cursor-pointer hover:bg-gray-200 p-1 rounded"})]})]}),S.jsxs("div",{className:`flex-1 grid ${Qn?"grid-cols-[200px_1fr]":"grid-cols-[0_1fr]"} transition-all duration-300`,children:[Qn&&S.jsx("div",{className:"border-r bg-gray-50 overflow-y-auto",children:S.jsx(gC,{className:"p-2 space-y-2",children:S.jsx(fC,{className:"border rounded hover:border-blue-500 cursor-pointer"})})}),S.jsx("div",{className:"overflow-hidden",children:S.jsx(YC,{highlights:F,onAddHighlight:uy,searchTerm:E,onSearchResultsChange:M,onUpdateSearchHighlights:Sy,onPageChange:Cr,onJumpToPageReady:Kt,onSearchResultsData:xy})})]})]})}),S.jsxs("aside",{className:"border-l p-3 space-y-4 bg-white overflow-y-auto",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"text-xs font-semibold",children:"Page Navigation"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{className:"px-2 py-1 text-xs border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Jn(j-1),disabled:j<=1,"aria-label":"Previous page",title:"Previous page",children:""}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("input",{type:"number",min:1,max:K,value:Dt,onChange:R=>$t(R.target.value),onKeyDown:R=>{if(R.key==="Enter"){const G=parseInt(Dt);G>=1&&G<=K&&Jn(G)}},className:"w-12 px-2 py-1 border rounded text-center text-xs","aria-label":"Go to page"}),S.jsxs("span",{className:"text-xs text-gray-500",children:["/ ",K]})]}),S.jsx("button",{className:"px-2 py-1 text-xs border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Jn(j+1),disabled:j>=K,"aria-label":"Next page",title:"Next page",children:""})]}),S.jsxs("div",{className:"flex gap-1",children:[S.jsx("button",{onClick:()=>Jn(1),disabled:j===1,className:"flex-1 text-xs px-2 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Jump to first page",children:"First"}),S.jsx("button",{onClick:()=>Jn(K),disabled:j===K,className:"flex-1 text-xs px-2 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Jump to last page",children:"Last"})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{className:`flex-1 px-3 py-2 text-xs border rounded ${xn?"bg-gray-100":"bg-blue-500 text-white"}`,onClick:()=>wr(!1),children:"Template Form"}),S.jsx("button",{className:`flex-1 px-3 py-2 text-xs border rounded ${xn?"bg-blue-500 text-white":"bg-gray-100"}`,onClick:()=>wr(!0),children:"Schema Form"})]}),!xn&&S.jsx("div",{className:"mb-2",children:S.jsxs("button",{onClick:()=>ra(!0),"aria-label":"Manage field templates",className:"w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 flex items-center justify-center space-x-2",children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Manage Templates"})]})}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"flex items-center justify-between",children:S.jsx("h3",{className:"font-semibold text-sm",children:xn?"Schema Fields":`Fields for page ${j}`})}),xn&&Hi?S.jsx(UC,{sections:Hi,data:L,onDataChange:by,onLinkHighlight:R=>{n(`Link highlight to field: ${R}`)}}):S.jsxs(S.Fragment,{children:[pd.length===0&&S.jsx("div",{className:"text-xs text-gray-500",children:"No fields for this page."}),S.jsx("div",{className:"space-y-2",children:pd.map(R=>{const G=`${j}:${R.id}`;return S.jsxs("div",{className:"space-y-1",children:[S.jsx("label",{className:"text-xs",children:R.label}),S.jsx("input",{className:"w-full border p-1 rounded text-sm",placeholder:R.placeholder||"",value:L[G]||"",onChange:Ct=>my(R.id,Ct.target.value,j)})]},R.id)})})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"flex items-center justify-between",children:S.jsx("h3",{className:"font-semibold text-sm",children:"Your Highlights"})}),S.jsxs("ul",{className:"text-sm divide-y max-h-56 overflow-auto",children:[F.length===0&&S.jsx("li",{className:"text-xs text-gray-500 py-2",children:"No highlights yet. Select text in the PDF to create highlights."}),F.map(R=>S.jsxs("li",{className:"py-2 flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"font-medium text-xs flex items-center gap-2",children:[S.jsx("span",{className:`w-3 h-3 rounded ${R.kind==="search"?"bg-yellow-400":"bg-green-400"}`}),R.label]}),S.jsxs("div",{className:"text-xs text-gray-500",children:["p.",R.pageNumber]})]}),S.jsxs("div",{className:"flex gap-1",children:[S.jsx("button",{className:"px-2 text-xs border rounded",onClick:()=>Jn(R.pageNumber),children:"Go"}),R.kind==="user"&&S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"px-2 text-xs border rounded",onClick:()=>hy(R.id),children:""}),S.jsx("button",{className:"px-2 text-xs border rounded",onClick:()=>dy(R.id),children:""})]})]})]},R.id))]})]})]})]}),S.jsx(jC,{isOpen:Zn,onClose:()=>ra(!1),templates:C,onSaveTemplates:yy,totalPages:K})]})}C0.workerSrc=new URL("/assets/pdf.worker-BgryrOlp.mjs",import.meta.url).toString();ES.createRoot(document.getElementById("root")).render(S.jsx($e.StrictMode,{children:S.jsx($C,{})}));
